[Music] thank you [Music] hi everyone hi sir this is Thomas Sandra from flushbit so I'll be talking today about cross-domain PBS interfaces for survival oh thank you so much for invitation thank you everyone who's listening uh I will be listening the recorded version uh let's go uh so maybe first introduction of uh what's my story with flashbirds during flashbirds in 2021 is a mate which means there's like contribute to individual contributor full-time uh one of them they liked Mev gaps back so really just specifying which was built by the by the Creator the engineering design team from uh from flashbirds then working on the lvme Boost design so the design of the PBS for the proof of Stack ethereum uh the major focused on the product management of the early flashbots relay in the time of the Gaff and then then the flashbulance block Builder later took over by others then worked on the some of the swap for architecture components so think of suave as like many many modules like vs components working together towards the the single unified option for body expression and I work on some of them and some of that research I'll present today it's based on the recent thoughts that I uh when I have been exploring the decentralization shared sequencers the centralizations on of the sequencers on L2 is mostly and the cross chain and these is something that photographs have been interested for a long time we've published some of the research and and this kind of introduction to the cross cross domain and maybe in the past so so check out what flash plus posted on the research basis in the past um and uh maybe as a disclaimer so this part of the building the open uh of flashpot so it may it may present some ideas that already at least research stage uh they may not be fully reviewed by all the strategy teams that uh flashboats and uh this means that in some areas it may not be yet fully aligned with the flashbots values uh or even the quality of design of the research might be lucky uh nonetheless I think that's uh more of the uh to present it as an invitation to to collaboration on the and the idea as presented uh and also well like to to work together towards the full alignment of of how he wants to present all the products at flashbacks and uh how do we want to achieve full alignment is always eliminating democratizing Distributing mmv in a permissionless transparent way for uh for ethereal manager chains so when you think about elimination it's we bring transparency about the past so explaining what happened on the Chain explaining through various tools and and write-ups explaining what happens now by by the real-time dashboards monitoring tools Solutions and explaining also what will happen in the future by educating researching and providing fundamental research for today blockchain Community uh democratizing the permissionless access for for us Solace takers for solo Searchers uh when you think about the minigap in the past this was all about enabling solo Searchers to access the market without any big OTC Arrangements nowadays through the Mev Booth that's democratizing for allowing solar stakers to access that market without having to access to Joint polls and distributing so for the solutions that can be shared nowadays but also for through Suave our like ultimate goal uh Distributing Mev uh to the into where it originates from to the users or also uh together in collaboration with Solutions uh from EF like MV burn Distributing it across all day all the ethereum holders and also like the the holders like the online Builders of other chains or whoever the users are so all this free uh free ideas also behind uh what I'm calling here as a Mev Garden so uh we say let's move away from the Dark Forest of Mev to to a movie Garden so we want to start introducing solutions that are all continuing introducing solutions that are very clean clearly divided into components uh in this modular way they create a space that is adapting to to all the different market conditions and uh different stage of growth of various Builders participants of that market and obviously designed for the pleasure and utility of users so maybe one aspect of it the bright place that defines transparency the transparency of rules and arrangements for sure but not the transparency of what users want to hide so privacy and all of this for sure so some some space for privacy in this Garden is very important for the users to decide what they disclose about trades and what they do not within the Suave ecosystem all right so with our design goals to reveal some of these ideas and to introduce some new so we want to support well first of all what we are building with a movie Garden we are building a solution for connecting block proposers with block Builders but in the cross domain market so the same as you say PBS in ethereum connects the ethereum proposers it even validators vegetarian blood Builders we want to do that for l2s for different domains for multiple and Watts working together and potentially enable block building for multiple chains at once so the builders to be able to make proposals make beats about synchronized blocks together now uh what we want to achieve while designing the solution we want to support multiple Solutions on sequencers so however however the design is whatever the design is coming from ltus from ill wants about how to sequence whether to share sequencers whether to provide the native sequencers only whether they are ready to decentralize or not yet all of that should be ideally connected to the solution to as well I want to make sure that it's all permissionless and transparent in design so any any shared sequencer should be able to join the system without any white listing without any um any permissions from from trusted operators so maybe unlike the nowadays solution of uh of PBS where to some extent you think that the relays are whitelisted by participants they the design goal here is to allow anyone to join be in line with a different protocol Direction so um we do we do origin from ethereum space and we do think that ethereum is defining much of the Innovation and defining how Mev is built into protocols so we want to make sure that we don't design something that will be at odds with the designs coming from the from the ethereum foundation and from General ethereum Community I want to respect the market space of various players and uh this is very similar to the first goal of supernic heterogeneous sequencer space But Here we say that not only we want to support everyone to say that we build for other builders to to connect to uh to code design a solution and again this is an invitation to to research together for sure uh they should be stepped towards Suave so even as we talk here about something that we uh call uh Mev Garden it's not really like that's important this name because it should be simply a component or Suave and and a step towards swap so it shouldn't be alternative to so it should be inconsistent to as well anything that we design here should be part of this great vision of fastball status on this unifying called the expression of value within the context of an Eva and we'll say permissionless fair financial markets on and off chain and the last part which is particularly important because uh I would say it's not fully resolved in this design it's ensuring equal rights of Solace takers and large operators equal rights and more like equal opportunities because rights are the same but the opportunities are there for the large operators to uh to have a bit of advantage and hence and the solution might be centralizing not very much you'll feel that this is not a big concern maybe not comparable to the one that we've seen in the in the PBS space before PBS was introduced but nonetheless the one that is necessarily uh necessary has to be solved before we say that the solution is consistent with the value so of how flashbots designs products and a bit of a glossary maybe uh the basics so we do separate the roles of sequencers proposal Builders and relays and particularly I'm pointing out at the sequencers and Builder separation so uh sequencers are those uh here in this context sequencers are those who pick the transactions in order that Builders are the ones who really take what sequencers provide revert and uh and wrap it up with the metadata and construct blocks out of it so maybe further filter the data uh there's the rules not necessarily have to be separated in the in the actual designs but they might be uh so we'll be separating those and proposers are the ones who pick the blocks from the best blocks provided by Builders and proposing to the uh to the market right so announce them to the chain as it is nowadays with validators on ethereum or in other situations and domains is this concept that was introduced by the early cross-domain flashbots research so domains are either blockchains or centralized exchanges or any space which provides the opportunities for MVD creation for the for the state that is less and more discrete and changes over time so when we talk about cross domain we can imagine that might be between the centralized and decentralized exchange not necessarily to decentralize exchanges and not necessary to blockchains and the most important innovation here uh not the complex I hope is the idea of global time or maybe not the complex to understand but but possibly complex to implement so the global time and synchronized proposals we want to introduce the the notion of looking at all the blockchains all the domains together and ordering the events there and and having a consensus on how how those events were ordered across this non-unified time of different chains and when we think about global time the the order of events we show that we want to sequence events from multiple domains it can be as in this example ethereum start net polygon blocks happening one after another what we what we want to achieve is to say that the HTML block 100 happened before block 23 on startnet and we want all the participants of this Market to agree on this ordering of events uh so so we have to find some solution to that so we can propose something but this not necessarily is easy called point B in the top and actually for discussion uh so one of the examples it could be a set of chain of servers kind of oracles or simply notes that are trying to achieve a consensus uh that look at the look at different chains that are forced to observe chains and uh put the information about the blocks appearing as soon as they appear so for the observation of the exchange of messages we can we can do some kind of attestations to what we observing the same way as the ethereum laser testing to the uh to the blocks appearing and being served in the P2P Network the same way we can we can build something here obviously observation of multiple chains chains with various speeds think about Solana versus ethereum and so on this might be quite challenging but we do want to have a simple chain of events like this so there should be no processing no access to vbm operations we just want the ordering of events here you can imagine a construction like this built on on some Modern Maple Solutions uh we've ordered like the the basic normal plus ball shark uh solution for example so saying yeah we want to have thousands or or more events every second but not necessarily any calculations based on that it's just a just a blockchain of records of what happened when uh why do we need that we'll explain so we need the ability to to prove something for sloshing and related to the announcements of the shared proposers or show it um so I want to Define also something that I call here synchronized proposals so when we were when we were designing some of the Cross area codes the main Solutions at watch what we were saying that we can't do the beads on the on the success of transactional cross domain execution so we can say that as a server I promise to pay if something happens transactionally and then someone can claim that bid claim that payment so as a Searcher I say if you manage to execute transactionally on ethereum and start net then I'll pay you X if those transactions learning chain and I don't know how you do that uh you have to judge if you can do that and if you do that then actually the chain as well will allow you to to claim the payment now um the thing is what I wanted to introduce with my mini garden is also the possibility to make some kind of credible commitment and promise about the synchronized proposal so if you're an Executor on multiple chains how can you promise to me that you actually can do the transactionally so I feel a bit more confident about bidding and how can I potentially slash you if you if you don't deliver on that promise uh so I'm proposing here just like three different definition of that synchronized proposals uh not because I think there are only three or exactly free or that one of them is perfect or just that in the in the context of our discussions in research we realized that this is not just like very very clear definition that this is what uh synchronized means I'm proposing three examples but what really is the final definition of synchronized proposal is this is a bit open so here I'm saying the universal strict would be like we have a set of domains that we're looking at here in the example it's ethereum polygon start but there are three different domains and I'm saying that the two blocks are synchronized only if only if they are like generally happening uh in a sequence after another but there's no other block to belonging to any domain in between so in this example ethereum X is synchronized with polygon y these are two blocks that are sequenced one after another and the same for the the last two blocks but I already say that uh ethereum X is not synchronized with Darkness Z because there's some falling on Block in between now very often when we talk about cross domain Mev we and we think about two domains we don't care about what happens on other domains so here we are very very strict universally across all the domains that we could take ever into consideration in our Global time assessment so it might be really too straight and we say that if there's any other event from any chain in between then then it's no longer synchronized like some someone might have executed some kind of Med extraction that changes the state of the Cross domain execution in a way that I am no longer too confident that the transactional execution of material must start net will be uh will be good enough because something in polygon might have changed the opportunities um as I say it might be too strict but we present it the domain strict are probably closer to how I would think about it the it says that everything is synchronized as long as there's uh there are no other no other blocks uh belonging to the same domain in between so I'm saying here that uh for example ethereum x with start and z are actually synchronized even as there is blood polygon Y in in between because I don't care about the domains outside of the domains that I'm that I'm considering in my cross domain proposal synchronized proposal promise but uh I would say that the polygon Y is not synchronized with ethereum X plus 2 here why because there is some other ethereum block so I want to say that synchronize box are only the ones that we think the same domain are after another there should be anything in between uh and even less strict uh synchronized proposal definition is the one that says well uh there might be a multiple blocks belonging to the same domain uh so like ethereum X is synchronized here with stagnet Y plus one even as there is a starting at Y block in between but what I'm blocking like what I'm removing from from the definition of synchronized is that there shouldn't be any other like pair of synchronized blocks in between so ethereum X here is not synchronized we start net y plus two because there's some other pair of starknet ethereum blocks synchronized in between so I'm saying that well I feel that I can extract something transactionally as long as there is no other opportunity to extract something transactionally in the same demands domains which would totally lock me out of of the ability to execute Mev extraction in a predictable way uh as I say this is not super strict definition you can think of your own how you would like to say that something is synchronized why do we need this synchronized proposals we'll we'll start talking about the messages being exchanged between Builders and proposers so in ethereum PBS we have the builders we have also the proposal so the validators and they talk to each other through the relay and in the current design the relay is the trusted part in between um the epbs so in short PBS and ethereum assumes that the regulate disappears that actually solution doesn't change much because you still have the builders and the proposers uh collaborating but instead of using the relay there is some set of other stations and staged at the station and P2P communication that Alice Wellness agreement on what the best beats between the builders are and how to how to keep the proposals to their promise and pro potentially slash slash them on non-execution on delivering the promise so we remove the relay you remove the trusted component from uh in between and we remember that these angle from the beginning of the amification which says well you should be in line with ethereum protocol Direction so now we say that whatever communication between the proposal and Builders about any about the synchronized proposals I would like to have the messaging between those two parties between the cross domain Builders and cross domain proposers the messaging should be not necessary through the relay the design should allow for the P2P based communication and I think we should intuitively see that yeah that should be requirements for the the relay they might be slightly more difficult because they don't have the same level of the stations but with the global time uh with the global time that we mentioned uh it should be possible now this cross chain PBS is uh as we introduce this cross-domain proposal Builder separation we're adding communication from proposal to builders not only from Builders to proposers like nowadays so nowadays we have Builders announcing the reads announcing the best blocks then it goes to the relays or through the mptp communication goes to the proposers proposal select the best block and announce it and here we say that not only this direction but also proposers communicate with Builders back they announced that the about to propose something in a synchronized way so we have this synchronized proposal announcements and they should be ideally uh delivered and announced and included on the global time and why on global type chain because you need to potentially be able to slash The Proposal all failure of delivery a failure on the promise right so you're failing to deliver the promise and what's uh why do we use this communication why we use the global type chain just to make sure that it can be permissionless and transparent so the proposers can join and announce whatever they want and they should be slashable so there should be some some deposit you can imagine that it might be in the form of the eigen layer uh deposit so the the risk taking and uh and anyone can join if you can verify that they actually made a deposit it's transparent it's included on that chain uh this is example of a proposal where I say I'm announcing a proposal and there is a specific slot uh like some Sometimes some some time that I sequence and I have a set of domain proposals that Define the domain and domain slot 30 so some number of chain uh and when I estimate in my my expression of global time or something so sequence or daytime when it would happen and I say that maybe I'm proposing According to some rules of synchronization so I'm saying that there is like universally strict announcement that I will propose on ethereum and polygon for example at the same time and I and I say that maybe a minute ahead uh so now the the builders have this announcement they can check that it exists on the global time and I may start preparing the beads and they know that I'll be sloshed if I don't deliver so they start to be a bit more confident to set the blocks so if I if me as a proposal if I accept the blocks uh then I have to deliver those and the same as I I include my announcements on global time also the beads with the headers can be and also bubble time and my commitment to the headers can be announced in the global time so you can have the same properties as a of the commitments as in ethereum PBS where I say I'm about to publish that blog so I signed that header so you give me the body of that block the details of the blog the transactions so I can actually announce it that if I don't announce it I get slashed um what can be the types of proposal so as I mentioned we want to respect the all the players in the market so whether these are shared sequencers native sequencers they can all participate in those announcements shared sequencers should be much more confident about uh doing any like uh shared shirt proposals they may be absolutely sure like 100 probability that they will whatever they will announce they will not be slashed uh in some cases they might be randomly being chosen on different chains and sharing that with other sequencers that are competing with them uh in those cases they will maybe judge whether they want to risk slashing or not like was their level of confidence in vertical in particular unit of time that they'll produce the blocks that will be synchronized that will be next to each other sequence in the global time uh and again like all the whether these are centralized or decentralized sequencers they can all make these announcements nobody is whitelisting them nobody's blocking them uh they should be allowed so here you have an example of This Global time when actually I'm indexing events and uh somebody analysis the deal about the to to propose synchronized ethereum and start net n plus one that they approve some beat for for these two blocks with some hash and since they approved and announced both of those events can be slashable against their deposit uh drawing and layer some other solution and uh and if it's slashable then the the Beats can be uh can be protected the same way as they are nowadays protected with with the sloshing condition on ethereum so this design goal it should be step towards Suave so uh as I mentioned that's what we have designs for these beads to be payable on successful execution but we didn't have maybe the design on how to uh how to slash on a promise in the executor telling that there is some specific probability of execution so me as a Searcher as a cross domain Searcher or Builder I can feel a bit more confident so it adds a piece of swab like on the side of proposers making similar commitments like on the size on the side of build makers on the Searchers so now we have both sides actually trying to to communicate of how much how much they can achieve and what what kind of promises they make uh and that last call that I mentioned that it's not resolved and notice it here so if I'm about to make announcements about the sequenced synchronized proposals then the larger my stake Keys onto different chains the more likely I am to have synchronized proposals so the more often I'll be benefiting from the extra bits extra payments to me from the from the Searchers if I'm a solo sticker then I cannot do that on multiple chains because I'm not probably not take care of multiple chains so you would have to team up with someone or just give up and join the large operator a large pool that can actually synchronize this across many chains that they are they are operating so there should be a solution when me as a Solace taker can dynamically exchange messages with some other Solace thinkers and together make commitments to the uh to the synchronized proposals so what is required first of all we need to Define this communication between proposers something that is reliable and again it would have some promises but then the question is about the splitting the the payment from the from the cross domain block Builder across domain sequencer uh about how how exactly you're paying to to the proposal on chain Y and chain B uh so this should be doable that should be easy part uh maybe slightly harder is the sloshing Target so if I don't deliver my promise who is really slashed if I'm if I'm teaming up with as a proposer on ethereum if I'm teaming up with a proposal on polygon uh the who will be slashed if we don't deliver that promise uh that's a good question uh and well so that's why this has to be answered so within the roadmap think about this collaboration of uh of the multiple multiple proposers has to be resolved and uh well and also making sure that this design really answers the questions from the shared sequencers and whoever build sequencers so it all has to work together to satisfy the goals of how flash what builds the products as very early it's building in the open it's just a research potentially components would be dropped never delivered or maybe something that would be fundamental component of thank you so much thank you foreign [Music] 