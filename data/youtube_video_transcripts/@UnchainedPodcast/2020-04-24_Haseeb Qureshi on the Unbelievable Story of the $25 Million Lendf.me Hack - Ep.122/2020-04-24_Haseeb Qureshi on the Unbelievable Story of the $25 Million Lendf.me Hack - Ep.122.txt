hi everyone welcome to unconfirmed the podcaster reveals how the martinis and crypto are reacting still these top headlines you see inside scoop on what they say on the horizon I'm your host Laura Shin in response to the challenging times crypto become is waiving the 3.5% credit card fee for all crypto purchases downloads and crypto combat today today's guest is hasib Qureshi managing partner at dragonfly Capital welcome perceive hey so last weekend a defy protocol was hacked d-force which is a Chinese each by protocol backed by multi coin capital last twenty four point nine million dollars via its lending platform lend F me and let's not talk about the significance of that name what happens with the D force attack so it's kind of a complicated story and there's a little bit of a backstory to understand what exactly happened so it was a busy weekend in d phi and so the the story centers around this particular asset called IM BTC which was the cause of this hack and actually another hack that happened 24 hours before this hack so let me let me just do a live it a set up so IM BTC is this is this is this token that's basically a BTC peg minted by this company called IM token which is a Chinese etherium wallet it's like the biggest etherion wallet in the world and I am btc-e is not an e FC Twente it's an ER c 777 so nearly seven seven seven is a new token standard that's kind of an augmentation of ER c20 the sort of a fancier ER c 20 with a bunch of other bells and whistles and it turns out those bells and whistles that they added to this token standard makes it behave somewhat differently than ER c 20 and it's a little bit complicated what exactly those augmentations are but long story short what it lets you do is if the contract that integrates in the era 220 doesn't know that it's integrating with the ERC 777 you can potentially do a reentrant c attack we enters the attack for those of you who remember is the same attack that attacked the dow the sort of the original massive etherium hack that resulted in the etherium for so 24 hours before this land f thing happened I am BTC which is an IRC 777 was drained in the you know swap lucrative pool for I am BTC vs. Eve so basically somebody was able to take a little bit of this IME TC and steal all the money in the you know swap pool that was that was a balance between Ethan and 9 BTC so now this was not you know swaps fault because you know swap allows anybody to create a pool so you the swap was like well you know this is kind of is really unfortunate but you know the people who created this pool should have known that it was well known in advance that ERC seven seven sevens have this problem so 24 hours later so you know this is really bad and we're talking about this this weekend 24 hours later it turns out that some attacker out there was scouring all of defy looking for places where similar type of attacks might have been possible it turns out the biggest liquidity pool anywhere for IM BTC was in Lemna so what is lend f lend f is a chinese defy compound clone that was built by these two guys in china Minda yang who's a chinese defy investor and Shushan who's the founder of spark pool which is one of the largest theory of mining pools so they're two you can think of them as like defy celebrities in china so this was a very hot project it was widely renowned in china as being like the wheel breakout defy project because china doesn't really have any big defy contenders lendeth was kind of their their export to the defy ecosystem and if you if you remember back a few months ago they were actually brought into some controversy because they copied compound v ones code and they were aggressively listing assets into their collateral pool and they sort of added these augmentations as their business model and so a lot of people in the west were kind of you know pissed off of them as kind of being a derivative project of compound p1 so they the this is also an older version of compound right so compound is upgraded to comp times v2 since then and compound has this very careful listing process where they list you know only one at a time they do a risk review they do all this stuff and linda was a lot more aggressive in all the assets that they added and one of the assets they added was this IM BTC and the reality is that people knew about this reentrant C attack since at least June last year actually I think open Zeppelin a security research firm actually published an open-source version of this exploit that could have actually worked against you know swamp and this was back in June last year so people who talk to anybody in security they know that this is a problem so what happened was on April 18th yuuna swamp was attacked 24 hours later almost to the dot an attacker started draining the land F contract okay you can think about this as though basically the attacker is fooling this compound like protocol into thinking that they have more and more collateral than they really have and so if they're you know putting in a little bit of collateral they can sort of double it or triple it or quadruple it and they keep doing that over and over again taking out bigger and bigger loans until eventually they take out a loan the size of all of the money in the pool and by the end of about four hours of repeatedly iterating on draining money out of the pool the entire pool of lend F was emptied and the attacker made off with 25 million yeah so for people who are not familiar with that attack I'll just describe it briefly and also I just wanted to say the unis WAP hack from the day before was a loss of three hundred thousand dollars but essentially the way this reinsuring reentrant seed attack works is that it's like if you were to go to a bank teller and say I want to withdraw $100 and your account has a hundred and five dollars within it then they'll give you your hundred dollars and then so normally they would give it to you and then update your balance to five dollars but in this case what the smart contract does is it's able to interrupt the tailor at that point and request the 100 dollars again and because the balance in your account hasn't been updated to five dollars the bank teller thinks that you still have 100 dollars and like enables you to take out the hundred dollars again and that's essentially how this these funds were siphoned from the Dow and from Len F me and you know these other and you know swap it's just like a small amount every time but it just keeps going and the smart contracts like is automatic and it works very quickly exactly right so when thing that I wanted to ask you about also was if the re-entrance Eve ulnar ability was known about with the ERC 777s from a year back then why haven't all the different smart contracts that might be vulnerable upgraded like and also weirdly like why would it take somebody so long to even exploit it if it was known for all this time so that's a great question it's it's sort of you know people have this kind of efficient market hypothesis thing in defy that like well everybody in the world can see all these contracts and all the information is out there therefore the moment that something vulnerable is on may net it should get hacked and of course we see that that's not true right it takes some time for somebody to kind of put all the pieces together right so a year ago it was known and security experts everywhere know that years see seven seven seven has this issue but you know it's like okay maybe then nine months or ten months later I am because he is in the or see seven seven seven and they list on their own you know swap pool and it's not that big yet and not many people in the West know what I'm BTC is right and so it sort of takes some time for these things to get remembered and integrated in the right way that people realize like oh yeah there there was that attack from a year ago the real question in my head was it took 24 hours after the you swap pack for Len dev or somebody to put the pieces together like oh I can do this to lined up as well and so I have to imagine you know there are a bunch of people probably looking for what else can I do what sort of a copycat attack that I can do you know remember with the bzx hat we saw a copycat attack like just you know a day later doing the same fundamental kind of thing with flash loans against bzx the same thing we saw here today but it took a whole day for that attack number two to happen and I have to imagine somebody was like practicing they were playing around with their they were making sure the attack wasn't exactly the same there are some different details and how exactly the two contracts are set up but the overall problem was the same that the the contract did not the contract allowed itself to get interrupted mid execution with another contract call and that's the fundamental issue of reentrant see that you have to avoid to fix this thing so you just want knew that this was a problem and it says in you know swap do not listen here see seven seven seven into you know swamp-like that is not supported compound compound reviews all the assets that they list and they would never have listed in the RFC 707 because they know that it's a problem but because you know when def just didn't have all those pieces and have all the contacts that other people had when they decided to integrate I am BCC and that's what led to this thing so I'm sorry are you saying that you know that they didn't know about ERC 7 7 7 or you're just I mean I assume they have to have to not know because certainly that the engineer is a compound we're aware of this ok all right so in a moment we're gonna discuss um the second part of the story which is the fact that the hacker actually returned the money it's a good story but first a quick word from the sponsors who make this show possible in response to the challenging times crypto TOCOM is introducing three measures to help the community first the 3.5% credit card fee for all crypto purchases will be waived for the next three months second you can now get up to ten percent back by using the MCO Visa card on food and grocery shopping lastly you could buy gift cards on the crypto comm F from merchants like Whole Foods Safeway Burger King and more and get 20% back on food and 10% back on groceries download the crypto comm app today back to my conversation with Hashim Qureshi so wait actually before we go to the part about how they they gave the money back I also just want to talk about the fact that like they started conversing each other through the through these like 0 through these um no value transactions can you talk a little bit about that like some of the messages were a little bit I don't know it to me it was crazy to watch yeah no totally so one of the things to understand about the blockchain so this is like super old right this goes back to Bitcoin days one of the things that you can add to a transaction is a memo right and this is how many like proof of existence thing works is that you put a zero dollar transaction on chain and you put some data into the memo field so what people started doing after this attack was they started sending zero dollar transfers to the attacker and they put a memo in the data field and so if you go into ether scan you can you can do this yourself you can go in either scan find the attackers address and go read some of the zero dollar transactions look at the memo field open it up and read it in ascii and that will show you english text of what was being communicated back and forth as the only way to contact this attacker because of course you know you don't have an email address you don't know everybody can see what's being sent to this person so the first thing that happened was the attacker sent a message to the lend of admin with just the message better future but clearly it was not so when you spoke native english because that's a weird very weird place ooh it wasn't pretty much money it was like a hundred twenty-six thousand dollars and i thought it was like just like well this is my interpretation but to me it was kind of like a jerk move where it's like hey i still twenty five million dollars from you but here's a little memento better like next time like yeah good luck you know try to recover you know the best best best wishes but like yeah so they sent back some packs of h USD and some h BTC which are all like basically centralized stable coins HTC is like centralized pegged it's four B's bitcoin peg so they returned those assets but I would have to imagine because they thought they were gonna get censored or like they weren't gonna be able to defense the assets once they stole them they're also like to growth in low liquidity assets right compared to what US DC or other things like that so I have to imagine it'd be very easy or it started be very hard for them to actually extract those assets I imagine that's why they return them and so d-force attempted to get in contact with them by dropping an email address in the in one of the memo fields to the to the code to the attacker and a bunch of other people also started messaging the attacker upon realizing that this was happening so you had you had messages from random people saying like hey you know like I don't know who you are but like coronavirus has been really bad for me and my family this was all my life savings like please do me you know there were there are four or five messages like this yeah here's one of the quotes and there's a reason why I picked this one in particular but anyway I'll in a second it says the virus hurt all of us life is not easy my saving funds on blend F come from bank loans with it I will lose my wife and children's exclamation point please return our funds god bless you okay so you guys I don't give investment advice but do not take on debt to invest in defy like what the hell yeah yeah you just I thought just blew my mind but anyway yeah keep going agree let me just double down on that please do not take out bank loans to put into d5 recommend against that so okay so III kind of want to sort of zoom out a little bit right because of course the moment that all of this happened Twitter just blew up with with seeing all this because one of the things about a defy hack is that everybody sees it right it's sort of globally visible we all are watching the bank robbery in real time so that said like in the in the social media reaction to this thing there were two very very different responses for the West like you know all of crypto Twitter basically was jeering at all this so they blamed it on DeForest they took this as a referendum on Chinese defy they sort of said look you got you know you guys had this coming you stole compounds code you don't know what you're doing this this just sort of shows how crappy and shady Chinese crypto is or how Chinese tea fires or d-force or whatever right China had the totally opposite response China actually was very supportive of d-force so they rallied behind the project they saw him in Dow and Shushan as trailblazers and as having been you know taking a proud risk for China there was a lot of nationalist fervor that we saw in the way that people were responding to this hack so it's actually it's very striking reflection of the time right now when actually a lot of nationalistic fervor in sort of you know the corona virus epidemic is getting reflected I think in the way that we're dealing with these kind of things in defy so many people in Chinese crypto community vowed to continue supporting min Dow and xu shin even if they were to revive the protocol they said look we're gonna continue to support you guys because what you're doing is so important so the that one ain't yeah go ahead no I I'm I'm a little bit confused about that I think it's a lot of it really has to do with the fact that look China doesn't have a lot of representation in the d5 protocols you know so even in the lower ones right like there was most of the projects that have really been successful in crypto that are pure tech plays have come from the West most of the the training most of the you know the really big you know mining businesses and trading businesses and lending businesses come from China but so far they haven't really been able to get a strong foothold on the technology side so I think for a lot of the Chinese defy community in the etherium community they really saw a d-force as those were there guys you know and mandala Shushan are very well respected in the Chinese community so imagine if like imagine if it was like you know Robert from compound and wound from maker Dow go launch a new project together you know and yeah they got hot and yeah it was terrible but like they were your guys you know you want to see this thing succeed and I think that was really the sentiment that people felt in China after seeing this hack it was a lot of anger at the at the attacker and that you know the sore the West for piling onto this thing and a lot of in a lot of support for what they saw as to really genuine entrepreneurs who basically got very unlucky okay let's now move on to let's talk about how that hacker keep the money so why do you think that yes so I so III will add a caveat that some of this is sort of why they reported and some of this is also we don't really know the full story because they haven't told us everything but basically it's almost immediately after the hack d-force reported this to the Singaporean police and began to try to monitor the addresses of the attacker to make to try to figure out you know where are they moving the money how can we stop this how can we mediate so one of the things that anybody who was watching the attackers address saw was that the attacker it immediately started exchanging some of these funds so they were using Dex's they were using one inch in Paris WAP which are basically Dex aggregators so you can think of it like shape-shift or something to start selling some of the assets and moving assets around they even put some of the USD C in a compound so it's almost like they were rebalancing the portfolio immediately after his giant hat so now one of the one of the problems here is that using a platform like one inch or para swab means that the the attacker could have been using their front ends being using their website if they were using their website they might have leaked their IP so one of the very first things that d-force did is they contacted one inch and Parris WAP and asked them hey did you track the attacker when they used your platform and you know naturally most these companies have analytics they want to know you know what people are doing on their product and it turns out one inch did log the attackers IP so one inch revealed they did not reveal the IP publicly but they did reveal that they were coming from a Chinese IP and they were using a Mac with English settings enabled and so one inch got in touch with a Singaporean police and apparently they shared the IP and the Singaporean police started to triangulate on who this attacker was so same time parallel thread d-force is getting a touch of the attacker so they get on an email thread and they decide to get on a phone call and from what I've heard and I can't verify any of this but when I heard they negotiated on the phone and basically there was a little bit of a bluff so they they were able to kind of narrow down because thing is like Chinese defy community is not huge right if this was somebody in China and you have to imagine it was somebody in China if like they knew how when def worked and they were close to the code and they were able to do this attack effectively like good chance and also the honey wrote better future crimes like a wave setting like good luck so you know better like okay this probably a Chinese person and the number of Chinese people who are active in defy and are sophisticated enough to pull off this hack probably aren't that many so there was a relatively small pool of people who they thought this could have come from and basically my guess is that they had a reasonable idea of like one out of a pool of people who it could be they got on the phone with them and they bluffed and they said something along the lines I'm gonna guess we know who you are or the Singaporean police knows who you are they're gonna track you down you're gonna go to prison for a very very long time if you don't return all the assets right now we are watching on chain you're not going to be able to divest these funds and the other thing to remember of course is that you know coronavirus is going on right now so if you imagine you have just stolen twenty five million dollars you can't leave the country you can't get away where you gonna go like right now you know you are under lockdown just like everybody else so you are certainly bad time to be hacking people intrude but you can't mean the country like nobody's bees so I think the the attacker probably felt cornered and they felt like they had no choice they felt like they'd already given up too much information and they might not have known how much information the other people had on them so what basically at the end of this conversation the hacker agreed to return the funds and d-force agree that if they return the funds they were going to drop any charges so a couple hours later the hackers started slowly returning all the funds to the contract until finally all 25 million less transaction fees were finally returned to the d-force admin so d-force then published a blog post saying hey we've got all the money back and we're going to start a process of refunding all the people who who originally deposited funds into d-force and they wind it down the contract and they said they're going to spin up lend f again once they you know engage in audits and have a full security review and so on and so forth so that was the end of the of the D force hacking saga add the D force hack been pulled off it would have been I believe the third-largest hack in aetherium history behind the dow hack and then the first parity first parity wallhack but I don't know if you count this as being that their big attack because basically you know they gave all the money back so I don't know I don't know I don't know how this idea how the categories this one will have we're gonna have to create a lot of new categories of things in general in the crypto world okay but wait one thing I wanted it just backtrack on and ask you about is are you saying so it's so initially when you said that they got on the phone I thought it was you know they connected through the the email and the and the transactions that they were sending but are you saying that between the IP address and and then sorry sorry it's from the IP address they were able to narrow it down to maybe a geography and then because the community is small they like even could figure out the person or like do you know what I'm saying like when they got on the phone was it someone who to them was anonymous or was it someone where like they were like we know who this person is so I I'm not going to pretend to know that he tells here but okay from what I've heard my understanding was that there was verbal communication between d-force and the attacker okay and okay I'm sorry yeah I don't know that they knew the person okay okay and then I guess the other thing is they were contacting the Singaporean authorities but if it was an IP address in China then how could this Singapore authorities go after somebody in China I don't know I assume it must be because when death or and if the deforest was probably incorporated in Singapore but I don't know the details that would be on the site although it may have been that the person was in Singapore oh okay right because I did see some people online saying that this person used a VPN yes so it's it's very likely that if this person was using defy it was using defy protocols that they were using a VPN and the VPN may have routed their IP Emma China they may have gotten in touch with a VPN through the Singaporean police and you know been able to didn't autumn eyes them through through that mechanism as opposed to something all the way I don't so I don't know I don't have the details here on a speculative right okay yeah where so now we're veering away from what we know and and just trying to figure it out while on a podcast yeah anyway okay well this has been so interesting and really mind-blowing actually but yeah I really enjoyed this discussion thanks for coming undone confirmed likewise don't forget next up is the news recap probably the biggest news this week aside from the d-force hack which was covered in the episode was the rollout of the dcep pilot in China but since we covered that in last week's news recap we'll make our main story a coronavirus related story first headline the coronavirus spurs demand for stable coins coin metrics reports the market cap for stable coins is now at nine billion dollars up by one billion dollars since the start of April Spencer noon tweeted this out as a handy jiff that shows just how quickly stable coins have grown over the last couple years in particular tether on aetherium additionally circle CEO jeremy lair says his company is seeing demand from small and medium sized enterprises telling coin desk quote we are getting feedback from Asian market participants that there is more and more demand for US DC from SMEs seeking both the safety and utility of digital dollars and I also have a link for you from the Block in which the site collated dynamic charts of stable coins on aetherium and they refresh every 24 hours the charts show that tether on aetherium is at more than five billion dollars market cap with ever increasing market share and that has only accelerated in the last month and in somewhat related news coinbase saw a spike in deposits for $1,200 which coincidentally is the max amount for coronavirus checks next headline why Chinese Bitcoin mining firms are struggling less than three weeks before the having spring is normally a profitable time for miners in China due to April showers making hydropower even cheaper however coin desk reports the downturn in March and a Bitcoin price and about 7,000 all month has caused mining farms that offer hosting services to operate below capacity writer Wolfie Zhao a previous guest on ton confirmed says quote if bitcoins price remains at its current level of $7000 after the having older mining equipment is expected to shut down which would lead to a decrease of the network's hashing power making it even harder for firms that need customer to fulfill their capacity we'll have to keep on eye on it to see how this affects the having next headline it's actually three different sort of related headlines they're all about product news in defy next story dharma launches social payments dharma launched a new product called social payments which seems pretty cool you deposit funds to your Dharma account find the twitter handle you want to send funds to and then send your payment dharma says you should also retweet the dharma baat and tag your recipient so they see the payment hilariously when i was looking into this to put it in the newsletter I saw that Dharma had sent me five dollars via the f but I actually I never got notified by Twitter I don't know I feel like that notifications on Twitter don't work very well but anyway I will try to claim these funds and update you all next week on how it went next headline coin based launches BTC USD and Ethio as D price Oracle's recognizing the growth in defy in the need for reliable price Oracle's or trusted feeds of price data coin based launched Oracle's that obtain price data from coin based pro as the company says in a blog post quote anyone can publish the prices on chain and since the data is already signed by coin basis private key there is no need to trust the publisher using the coin based price oracle public key anybody can verify the authenticity authenticity of the data next headline dy/dx bringing perpetual contract markets in BTC to defy dy/dx entered a private alpha for a perpetual contract market for BTC US DC which surprise surprise is not going to be available in the US however dydx says quote perpetual czar the most widely traded product in all of crypto with daily trade volume in the billions of dollars eclipsing spot trading volume in 2019 as the most popular way to gain crypto price exposure given that BTC is the most widely traded cryptobiosis asset this could prove to be quite popular next headline Renaissance Technologies considers trading Bitcoin futures Renaissance Technologies a seventy-five billion dollar hedge fund reputed to have quote the best math and physics department in the world because of its focus on hiring from the science field as opposed to Wall Street stated in a regulatory filing that is considering training CME's cash-settled Bitcoin futures Richard creep of numerate old coin desk Renaissance and firms like it are very good at working with time series data and already understand corn futures and oil futures and trade all those markets so I don't think it means they have any thesis on Bitcoin I don't believe they are going to be long Bitcoin or something but it's definitely worth taking on next headline finance plans a smart contract platform add this to the list of potential etherium killers the finance smart chain as outlined in a new white paper finance denied to coined us that it was an aetherium killer but it does plan to be fully compatible with the dominant smart contract platform coin des says quote by Nance Martine would give the new smart contract layer direct access to an ecosystem filled with relatively mature applications and community meaning aetherium fun bits hello world meet chief I there's a new educational course to teach women about EFI and you guessed it it's called chief I the group is also pulling funds that they agree to donate to a nonprofit at the end of the course as a woman in crypto I know I find myself wondering why there aren't more women because there isn't anything of hook crypto that seems inherently more male than female to me so this might be worth checking out to see if it would be helpful for you or anyone you know second fun bits crypto Twitter bingo speaking of women she 256 tweeted out a hilarious quip der crypto Twitter bingo card and sadly I had a bunch of squares such as have created or been on a crypto podcast have theorized who Satoshi is and have lost your seed phrase before but I didn't manage to get a bingo however you should definitely look up this card in the show notes and play thanks for tuning in to learn more about Hasib and the Len F Mia had hack be sure to check out the links in the show notes of your podcast player whatever your favorite crypto meme is Lambos unicorns or the Guy Fawkes mask it's probably on the Unchained rabbit hole t-shirt check it out at shot unchain podcast calm and also be sure to check out our hats mugs and stickers unconfessed by me Lauren with help from Franklin recording Anthony Yuna Daniel knows Josh Durham and the team a CLK transcription thanks for listening 