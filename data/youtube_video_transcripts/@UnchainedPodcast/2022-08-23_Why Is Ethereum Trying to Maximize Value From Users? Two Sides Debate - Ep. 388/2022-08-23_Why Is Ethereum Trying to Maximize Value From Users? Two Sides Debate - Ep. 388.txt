[Music] hi everyone welcome to unchained your no-hype resource for all things crypto i'm your host laura shin author of the cryptopians i started covering crypto seven years ago and is a senior editor at forbes was the first mainstream media reporter to cover cryptocurrency full-time this is the august 23rd 2022 episode of unchained i'm looking for a part-time evergreen editor for unchained if you're skilled in seo and love blockchain and crypto email your resume and writing samples to hello unchainedpodcast.com with the subject line evergreen editor application with the crypto.com app you can buy earn and spend crypto in one place download and get 25 with the code laura link in the description harness the full power of the avalanche network with core your new web3 command center built by ava labs core is more than just a wallet it's a non-custodial browser extension engineered for users to seamlessly and securely experience web3 like never before explore avalanche dapps nfts bridges subnets and more today whether you're crypto curious or a c-suite decision maker you have to check out web3 with a16z the chart-topping technology podcast about the future of the next internet listen to web 3 with ae16z on apple podcasts spotify or wherever you get your podcasts today's topic is mev which up until recently was called minor extractable value and is now being called maximal extractable value here to discuss are stefan gosselin co-founder and chief architect of flashbots and uri clarman ceo of blocks route labs welcome stefan and nori hey hello hello meb is a pretty controversial subject as i discovered when i started diving into it but before we get into all the concerns and arguments about it let's just make sure people really understand what mev is how it works etc right now we're in uh a phase where ethereum has a proof-of-work consensus algorithm so why don't we just talk about what mev looks like right now under proof of work stefan do you want to start with a description sure yeah so i mean as you mentioned mev is a very deep rabbit hole extremely deep rabbit hole full of monsters um and uh and unexpected findings but uh i mean you know what's been really interesting about mev and in particular i guess the the narrative and the the meme of muv is how it's sort of come to mean something different to different people and it's it's a narrative that's been sort of picked up by a variety of different users of blockchains to help advertiser protocol try to explain what they're doing try to say what's wrong with other people's protocol try to it's it's just become this this really deep and interesting technical topic in terms of you know the flashbacks perspective on on mev um we saw mev as uh sort of an economic force that came to be with with blockchains but exists outside of it um and and in particular you know our observation was that this this economic force came from the roles that certain actors in in a blockchain have in particular um at the time when the research came out so we we explored what are the different activities that miners are able to take with regards to the powers that they have in the protocol and how can they use those powers to be able to maximize the amount of value that they they generate for themselves practically a lot of mev means ordering censorship or inclusion of transactions and so the power to of miners to be able to create blocks and decide which transactions go in the block also means that they have sort of a monopoly on the execution of the evm over a given a block that they're that they're assigned and so the question for them is how do i maximize the amount of value given given this power um and and the flashbot sort of introduction to it um to the ecosystem and the way that the mev sort of industry has evolved on on proof of work is for miners to outsource it to searchers so third parties who come up with strategies on how to order transactions how to insert their own transactions and then compete for the inclusion into a block and erin can you elaborate on that by giving people some concrete examples of how mav work the types of transactions that happen i was just about to say coming from slightly a different angle it's kind of like if you think about a regular user a regular user buys a uniswap or makes something d5 transaction and you could think that if somebody's about to buy a lot of eth okay then the price is going to go up when d5 started to get big traders figured out they can see other people transactions and front run them okay get to their transaction before a major transaction happens kind of like capture value by buying your cheap just before the price go up so that's kind of front running is one piece a second piece is you know there is a price of ethon uniswap just before the block comes out somebody sees that the price on coinbase just crashed right so they'll try to capture arbitrage they know the price is actually different from what's happening on uniswork and they'll try to get their transaction in to capture that arbitrage and so traders had been doing that when d5 started to get serious and then they started competing who would be the fastest and who would be the one to pay the most right so this is where it moved to mev to minor extractable value people started saying well if i'm making a thousand dollars i'll pay 500 of it as tip for the miner or the validator doesn't really matter which protocol but i'll pay it as a tip and then they'll put to my transaction first before somebody else so that led kind of like to the gas wars that kind of like were 3 15 59 and three flash bots and so traders started to kind of try to compete with one another capturing these opportunities and in my mind mev more than anything is basically front running and capturing arbitrage these are the two big pieces as i see it once things have evolved then miners realized wait instead of actually you know they started by maybe doing under the under the table deals and all these kind of stuff flashbacks came out and said how about we make it public how about we allow everyone to participate and it's minor extractable value because you could think whoever is really good at extracting value can pay more and get their transaction executed and it is the minor that's being paid for it right so if i can make a hundred dollar on an arbitrage but stefan is really good at it he can make 150 then he can offer 101 and his transaction or his arbitrage or his front runner will get in and mine won't and this is kind of like where things currently stand where miners are the ones making most of the money they're not actually doing it themselves other people are kind of like professionalized and kind of like found the expertise in capturing this value bribing or paying the fee or however you'd like to call it to whoever construct blocks it's validators in pos it's miners in proof of work that piece doesn't really matter and that's kind of like where things stand earlier you talked about how this happens in d5 does this also happen with things like nfts or what about single payments so nft is for sure right it's the same story if a big nft drop is happening everybody want to be the first one to capture it or maybe meant a million i don't know kitty cats or whatnot etc so because of the financial implications of the nfts that game is also being played but if i'm just you know i'm sending one east to laura sim then this transaction there's no rook there's no arbitrage there isn't front running there isn't anything like that that transaction would go through one way or another it's not inside this game right the mev game is very much about defy and nfts and it's less about you know somebody making a payments from one entity to another or i deploy a smart contract which does something which isn't that valuable at this time or there's no value to extract from it then that's the regular game and it's probably worth mentioning that we at blockchain have been in the game for quite a while when flashbots came out i was actually slightly worried from the implications of that but flashbots actually did a really solid favor to the community by siloing this competition right if we had the gas wars and people try to outbid one another basically driving out all normal usage right my normal transaction won't go through if i not pay if i'm not paying really tons of gas and really high fee although i really shouldn't so at the time this was prior to 1559 et cetera the immediate result of flashbots siloing the mev game and kinda separating it from regular usage was that regular users were no longer kind of like forced to compete in this game so the immediate result of flashback was actually a very positive thing i was wrong on that i was like i was actually concerned about that and that like that taught me to be like i have my own opinions i'm a very opinionated guy but we should also all kind of like well i might be wrong but what my opinion is so i think wait but uri just to clarify are you saying that the immediate benefit for users was lower gas fees yeah when flashbacks came out that was the immediate result basically take all the gas competition put it silo they're competing against one another and only the best one is included everybody else not really affected and so just to quantify this for users you wrote a blog post recently where you said that maybe costs users 160 000 eth per year that's roughly 300 million dollars and about 50 of that is front running that's that's kind of like taking it from immediate immediate result of flashbacks was kind of like that effect on the other hand i think frontrunning is bad okay basically if a user make a transaction and somebody else come and this user gets a worse trade then the outcome is friction it's not value it's not economic activity it's that me trying to buy a thousand eve cost me um i don't know 1.1 million rather than 1 million okay that kind of thing and i'm trying to look for ways to capture all the good and the upside of the mev in the system kind of figuring figuring that piece out without hurting the users which is hard okay so obviously we've already been talking about flashbots but it's been early talking about it so stefan why don't you explain uh flashback's role in working on mev um okay i mean there's a few ways i could go about it one of them is to try to entangle some of the things yuri talked about but maybe instead i'll i'll talk about you know how we see our own role in the ecosystem so flashbacks emerge as a a research collective um and so it was based on the idea that we see this mev activity having negative externalities on the network there's a lot of spam in the transaction pool regular users are end up ending up paying more and more volatile gas prices is there like a fundamental flaw in the way that that the transaction pool works that causes this that was the initial sort of approach and so we developed a solution for this right which was ended up being called mev geth and it is that you know the transaction pool was not expressive enough for certain types of users of ethereum certain types of users had preferences on the specific position in the block that they had that the only way they could express that preference was by causing spam or by optimizing for latency or by you know basically creating some some externality to everyone else in the network so our our view of mev is mev is a complex you know systemic problem for blockchains and solutions depending on how they're implemented have some externalities so we we research what are the externalities of various different solutions and how can solutions be designed to to maximize the alignment with the objectives and the the principles of the underlying blockchain and so mavgaf is a version of the go ethereum client which is i think still the most popular client that essentially enables these mav auctions to happen in a separate place rather than as already said like right in the mempool or or right on the blockchain is that is that a fair characterization correct so it replaces what was you know the most common strategy pga right which has a latency game which is price price gas auction and it replaces that with just a sealed uh steel bed auction so instead of leaking value to investing into low latency strategies instead you capture that value in the auction directly okay now uri how is block sprout working on mev so block start is a service provider okay we're a networking company we allow people to see transaction fast to see blocks fast to act fast which for competitive defy actors and anybody in the space basically you want to see any transaction happening before it before it's added to the chain because you want it's going to affect the price you want to know how it affects the price what's happening at any given moment especially if you're a large market maker if you're a major trader playing both the d5 game and the c5 game so that's at the core of our business and when mev became a thing then many of the mev actors are actually our customers okay so all the mev sergers want to see everybody else's transactions and they want to see the blocks as fast as they come they want to make sure that their transactions or their bundles go directly and asap to all the the mining pools because they want to make it to the next block etc so we're more like picks and shovels as a company then when flash what came out they're running the flashbot relay which kind of connects searchers to the mining pools we're running also flashback relays kind of like a private version of that that people pay us to get faster latency etc i think when stefan says like you know some transactions has preferences they want to express i think that's really like high level of saying somebody wants to be first to capture arbitrage or to front run another transaction not always but almost always right or just come after a transaction because it creates some opportunity which is usually still arbitrage and i think maybe the point where me and stefan kind of like disagree is that i see it as okay we want to minimize externalities and figure out the the effect on gas was very easy to see so that's like that's definitely a point to to flashbacks credit but what are we paying here and when we define the system in such a way or we build the system in such a way what's the price price that's being paid if we say that always ethereum is optimizing for mev so every transaction all the all the value that can be extracted will be extracted and so it's really hungry and attempting actively to kind of capture anything left behind it what does that mean for users okay like what does that mean if i'm if i'm a regular user and i'm not i know high frequency trading firm whatnot etc and i just see a price on ethereum and i you know on sorry on uni swap and i tried to buy there but i allowed for some slippage because maybe the price would slightly change and i would always get the worst price or i would always get front run there are some d5 projects i spoke with somebody interesting not long ago basically you know automated vaults that kind of like adjust their positions based on oracles etc but they can't be fully automated because all the meb searchers know oh here's an oracle transaction this is how the positions are going to be adjusted they always act before this protocol works and that protocol always gets the worst price okay so this actually affects more than just the regular user that kind of like made the transaction it also means what kind of product we can or can't build in d5 and the question is what's the trade-off what do we want to enable what we don't want to enable how much it's benefiting to users how much it's you know giving them hard time and that's maybe the point where me and stefan might not see it eye to eye okay so before we get into the controversial aspects which i definitely want to get to let's make sure that we explain how mev is going to change as a theory moves to proof of stake next month yeah i'm happy to to talk about it obviously proof of stake has been a long time in the making but uh at flash bots yeah you know we we try to keep up to date with as many research topics as we can and we saw that you know around about last last summer that um a lot of the core developers are starting to ramp up and focusing on the merge as being the next major release of ethereum immediately after the london hard fork um and so we started engaging and figuring out okay well the easy thing to do would be for us to continue shipping you know the same software that we already have muv geth for a proof of stake environment but we thought we could do better and so we engaged with uh with various different stakeholders including ethereum foundations validators core devs client development teams to try to figure out is there you know something that we can do to improve the current situation of of muv on ethereum the biggest concerns that they had were basically twofold one was client diversity and the second one was uh solo staker participation in muv so you know one of the big limitations of the way that mev geth works is that requires uh miners to see the full content of the transactions that they receive and so that means that you cannot send these transactions to every single miner you can only send it to mining pools that have some trust involved and that you can monitor how they operate with the transactions that they receive matching that over to a proof of stake world it would not have been possible to send these transactions over to the solo validators in order to mitigate this we basically developed a new piece of software from the ground up right called mev boost and that aims to sort of solve for these these key concerns so it's a neutral piece of software it's like done sort of in an open source probably good way and it's software that any validator from you know the largest sticking pools the solo validators at home can run to uh to get full access to uh to muv one other component that will be part of this is something called propose or builder separation or do you want to explain what that is sure um although i think being stefan should have like like switch roles because i think stefan would actually like i would explain the first bit better and he would this one i want to add something to to what i'm stephanie saying which i think is important um especially for the greater community who can like figure out where we're going and what are the implications what mev boost does is that it allows any validator out there to receive sealed blocks okay so just like you don't know what's inside the block they received a seal block and actually multiple potential seal blocks and they choose who pays them the most okay so maybe one block builder block builder are special mev entities that try to maximize how much mev they can capture and they're each trying to capture as much mev as possible and they're again similar to the previous setup trying to outbid one another who would pay the validator the most and so the validator gets several hopefully several um competing potential blocks and it chooses which one to actually sign blindly and then the block propagated either by that validator or by the relay but basically it signed it blindly and then it goes to the network which basically means and i think it's a big deal that blocks are constructed to optimize mev okay if something improves the amount of mev it will be included if it's not then it wouldn't be included or lower priority and it's a major shift again from the perspective of the users as i see it knowing that this is how blocks are constructed is a big deal now mev boost is a step towards pbs is basically the idea of separating the proposer the validator which proposed a new block to the other valley letter from the builder the one who construct the block and i think it was vitalik and like two weeks ago in a conference was saying that the motivation to separate these entities is that a small if there isn't a separation okay so think about the validator try to optimize and extract as much mev you could imagine that a solo validator would earn much less proportionately compared to a giant liquidity pool with tons of resources right the solo validator would either construct a vanilla block or would use some open source tool that would help him while the very large entity will have professionals trying to come up with strategies and constructive better and more optimized block which means that larger validators would be better off okay so a validator which is a hundred times bigger would make more than a hundred times more money maybe a thousand times more money i don't know like i don't know the math around and so by separating the validator and the constructor of the block you're preventing the economies of scale effect of this off centralization so if larger pools are more profitable it makes sense that they will be more dominant and this is a centralization force and if you split the two pieces the actual validation of blocks and the construction of blocks then the economies of scale and centralization power stays within the mev block building space well validators are all the same whether you're small or you're big you're getting you're going to make the same amount of proportional money if you're 10 times bigger you'll make 10 times more money but not a thousand times more money because somebody else would be providing we'll be doing this work right we'll be providing them the same options okay so it sort of sounds like you feel like some parts of this at least are not a good move like what would you prefer to see happen so i feel there are issues here me and stefan are actually kind of like we were dming it like the other day et cetera i was like stephan mentioned the externalities around it okay we're doing all of this to mitigate negative externalities and the question is what are these negative externalities like what good are we doing here what like what how are we saving ethereum right or we're improving it and what is the cost and kind of like balancing between the two the downside of pbs and the downside of me boost mvv boost etc as i see it is that it optimizes to maximize mev now i'm totally okay or personally i feel totally okay that arbitrage opportunities will be captured like they'll be captured by somebody for the system to be efficient it's not bad maybe it doesn't hurt anybody there is inefficiency and whoever fixes it profit and i don't see any reason why that wouldn't be the validators it's actually a good thing but optimizing for front running and enabling that so trading is not somewhat adversarial it's like the most adversarial you're never going to stand a chance you're always in like the worst position you could ever be in that is a cost to the users and the system so like we want d5 to flourish if there was in front running d5 would flourish more obviously and so this is the cost the question is what's the upside and i think this is more of a question of stefan we're gonna cookie what what's the benefit of doing it and is it worth it yeah stefan so i'm curious like did you guys ever look at constructing mev boost in a way where front running would not be allowed in some fashion you know i don't know how you would implement that but what kind of what's your take on the parts of mev that are harmful to users i think it's difficult to have a conversation under this framing you know a lot of the categorization of mev that yuri has been presenting i think is inaccurate and doesn't represent how mev works from a research and protocol development perspective i think that there's very complex implications for mev across the application layer as well as the protocol layer and the most important way to think about it is through the frame of where is the value accrual going and how are the strategies for capturing that value impacting others i think there's also like some correctional output to the way that mv boost as software was framed so mv boost does not inherently maximize mev in any way it's actually completely unopinionated the only thing that it does is it allows validators to outsource the way that they construct blocks to third parties and the approach that those third parties use is completely detached from from the muvboo software itself so asking a question like why doesn't mev boost prevent front running is you know from the protocol developer perspective just not really like a coherent question there's a few undefined things here so first of all front running itself isn't like a defined concept within the realm of blockchains right so you have such a thing as a public transaction pool which you know some operators pay people like blockshrout to get preferred access to and then they use the transaction that they receive from that channel to then insert other transactions ahead of it right and then submit that to miners for um for inclusion so i think those are the types of strategies that that yuri is trying to to refer to as as as front-running which is really just um a subset of the the mav strategies that that are out there thinking about like how do we mitigate those kinds of strategies is is a difficult topic to talk about and and we can get into that but you know the the sort of perspective of of the mev boost is it's not meant to be a layer for solving this this kind of strategies or preventing those kinds of strategies is purely just meant to be a layer for allowing validators to outsource and get access to the mev hopping in for a second so first of all you're right every boost like i was like mvp boost allows to give it to third parties not necessarily to whoever pays it the most so i totally agree with that but i remember we were speaking briefly on this in paris we were talking about front running versus arbitrage versus other and you said like i disagree with like the definition so i'm not trying to kind of like throw you and like phrase a question in a in a way that looks bad rather i know you have a different opinion about it i'm honestly like interested to get your take i think like it's kind of like arbitrage is kind of like okay and front running is bad and we should try to mitigate it i know your opinion is different but and i would very much like to like better understand that yeah sure so like these are very deep research questions on which even i don't have the best perspective so you know flashbots has a whole research team that's focused on answering these kinds of questions and they publish a lot of useful documentation on trying to classify different types of muv you know for anyone that's listening to this interest in checking those out you can see writings.net and that's where a lot of the preliminary research and research articles that we post go you know with regards to the ethical side of uh and arbitrage and just types of strategies out there um we have an upcoming post that's going to be on that topic that's going to be published maybe by the time this um this episode goes out it's going to go into like depth about those different different classifications so i wouldn't want to spoil the surprise or uh before it gets posted and what about the externalities we we talked about that too um it's kind of like it's for me it's super interesting it's kind of like what are the externalities that really you think like mev boost is is solving for it's kind of like one thing is like basically allowing everyone to participate that's like super easy and kind like understood what other i like we were just again we were talking about you and i asked you something you said like no that's that's not really what we're solving for so what are the externalities on the chain and on the user we're trying to solving for with the mvv boost or pps like one or the other yeah so i sort of mentioned right like the design goals behind mvv boost are to allow for soul validators to participate in mev and then also to keep promoting sort of client diversity both of those things are maybe i'd say the client diversity one is mostly just an architectural technical one but allowing solo validators to participate is uh is perhaps the the main one that has implications for the way that the you know the ecosystem of mev develops which is uh you want them to be able to extract at the same rate the value of mev as even the largest staking pools and node operators can so there's it eliminates right the economies of scale that that comes with being a node operator in a way that encourages even even solo stakers to participate in the network that's really the the main the main objective uh with both pbs and an mev boost now one thing that i want to like specify is pbs itself sits on like a much larger road map of um of ethereum and so whenever we talk about these technologies about these these protocol features they come with one a lot of unanswered research questions and two dependencies on other parts of for example the ethereum roadmap to be able to sort of fit together in a cohesive puzzle so like while pbs may solve right the ability of solo validators to permissionlessly participate in um you know in mev it doesn't solve other other issues that uh the ethereum may have all right so we're gonna dive a little bit more into the controversy around this but first a quick word from the sponsors who make this show possible curious about the world of crypto and the future of the next internet then check out web3 with a16z the chart topping technology podcast from the minds at andreessen horowitz the go-to destination for discussions on tech as it changes our world whether you're a crypto curious person looking for signal versus noise in the day's headlines or a c suite decision maker seeking to understand web 3 as part of your business strategy web3 with as16z is the podcast for you tune in each week for leading insights from the top scientists and makers in the space through carefully curated conversations with acclaimed podcast host sonal choxi former showrunner and long-time host of the ae16z podcast along with frequent guest appearances and hosting by chris dixon listen to web3 with a16z today on apple podcasts spotify or wherever you get your podcasts join over 10 million people using crypto.com the easiest place to buy earn and spend over 150 cryptocurrencies spend your crypto anywhere using the crypto.com visa card get up to eight percent cash back instantly plus 100 rebates for your netflix spotify and amazon prime subscriptions download the crypto.com app now and get 25 with the code laura link in the description is your web3 experience hindered by inadequate crypto wallets and browser extensions ava labs has created core a free non-custodial browser extension engineered for avalanche users to have a more seamless and secure web 3 experience the best in class avalanche bridge now offers native support for the bitcoin network put your bitcoin to work in the robust d5 ecosystem by bridging btc to avalanche today with core you can also easily swap assets display your nfts in style store your assets in a ledger enabled wallet and put real dollars into your crypto wallet in just a few clicks pour is everything you need for a simple secure and convenient web 3 experience download the free core browser extension from google chrome's app store today back to my conversation with stephon and uri so one question i had about what you were saying before about how mavboost you know doesn't do anything on its own to maximize the amount of mav being extracted as far as i understand it at least makes that aspect of it competitive meaning builders will propose you're right it's builders proposed it's complex it's confusing so they're creating these blocks and they're doing it in a way where they're trying to make it something that is profitable for the miner and for themselves right so the more value that they can extract then the better rate they can offer the miner and the better profit that they can give to themselves so in that aspect i do think that pbs does or mev boost does kind of contribute to this right yeah so you know here we're getting more talking about what is inherent about mev and less about the specifics of the mv boost software so one way to think about mev is like this free energy that's created by uh by applications wallets and users right they create transactions in such a way that they're giving the power to someone else to be able to extract value and the question is okay what what is the impact of this and how are third parties able to uh to extract that value um that's really sort of where the value uh originates so someone is going to be able to see okay there's an opportunity here that i want to capture how do i go about capturing it you know in the like full mev boost system right they these are searchers so searchers see some value capture opportunity here they submit it to to a builder a builder aggregates all of these uh these bundles and they produce a block and then they submit those blocks to validators for uh for inclusion so the reason why you want you know a system like this to happen efficiently is because it puts all of each step of a value capture in a public public auction a public market so the amount that a builder pays to the validator for for the block becomes publicly known to the entire network there's no longer sort of these special relationships these special deals where a builder can you know agree with with a validator to say i will produce all your blocks and we will like split the revenue uh 50 50. instead you have this public market where all of the the data and the payments become transparent and it just brings a lot more light to uh to this entire supply chain or this entire industry okay so you've clearly you know delineated some of the benefits but when i asked about mav on twitter the vast majority of the responses were kind of negative to the concept and you know as we've been discussing being able to extract mep is actually becoming more baked into ethereum rather than something that's being avoided and here's just a few of the comments you know one user harry popper riccio wrote why as an industry and community are we not focusing more on prevention instead of just accepting it as something that will always exist bitcoin dad pod tweeted why would anyone knowingly consent to participate in a system with mev why not just stick with the fiat system so what are your responses to this i think it's very easy to look at mev on the surface immediately and say like well can we just get rid of it isn't there something that we can do like isn't there someone that can you know prevent this from being uh devs do something yeah exactly and and the answer is it's a lot harder than it may look immediately so mev like exists and like exists in the traditional financial system as well and it's the reason why you have such large like financial intermediaries are just like dominating you know and doing a lot of regulatory capture so it's not like it doesn't exist elsewhere it exists elsewhere just the ways in which it's dealt with or maybe not as transparent and like maybe the the public is not as aware about uh about where the mev resides so you know step one is just making sure that people understand how the system works people understand where the value goes and there are definitely a bunch of different solutions that can be developed for dealing with uh with this value capture you know one of the ways that flashbots is sort of a strong believer in is in reducing the amount of mev that actually gets exposed so a lot of the mev right on on on ethereum is exposed from the way that the applications are designed so ethereum it's um i mean uniswap right is a is a great example and it's sort of the one that that was used in the initial the initial explorations of mev unislop on works by exposing a ton of uh slippage for for its users but uniswap could also decide to design an alternative system that doesn't allow the users to expose that much slippage similarly wallets could also uh figure out how to produce transactions and send user transaction in a way that doesn't leak as much value from uh from their users in a way that you know is capturable by other people so so one of the important things about like you know oh wow like mev is bad you know i me if only we could solve mev well users have the choice right they choose which application that they want to use they choose which wallet that they want to use and the reality is a lot of them continue to choose wallets and applications that expose a lot of value that they could capture but instead they send that value to the operators and ultimately to miners and so you know the the flashboss job is like okay well what do we do with all this value that you know users and applications have decided to expose um and and the most stable thing that you can do is uh submit that all the way down the chain in a transparent way to the validators of the network i actually also want to ask about one specific comment that someone made where they pointed me to a talk that was given um by people like it was a panel vitalik and hassu and people from paradigm and at one moment there was uh they were asked oh would you rather uh trade on you know on a flashbots version of of of aetherium with uh a movie booster or or mev big 10 or a fair sequenced roll-up which uh is just what it sounds like it's you know not something where the transactions have been reordered in any fashion and he pointed out and i did watch this segment that even your own investors people from paradigm uh would have you know chosen the fair sequence roll up so what is your response to that i mean i can't speak for the people at paradigm and i don't know the like exact situation involved yeah so it's probably best to ask them what they meant by that maybe they didn't understand exactly how the system works i'm not sure maybe they have some other interest in mind i think it's worthwhile to to ask them and so you you wouldn't go with a fair sequence roll up you would choose something with the flash boss method so i don't think there's any i mean there are some solutions that i think approximate what like a good trading experience would be on ethereum today the batch auction uh sort of approaches to building uh decentralized exchanges is actually quite good and and helps mitigate a lot of the the externalities so i think you know solving it is a solvable problem at the application layer um it's not necessarily something that needs to be solved at the at the protocol layer and and that is sort of compatible with uh with any chain right so it's a it's a system that you can build um that helps mitigate or helps find better prices for end users of um of decentralized exchanges that's not dependent on the protocol in which it's built which is always like a good way to build these kinds of applications so like what i prefer to use like flashbots versus fair sequencing to me isn't really the question the question is like would i prefer to build use a decentralized exchange that gives me the best price or one that like exposes you know value to someone else and my answer is always going to be the one that gives me the best price i also was wondering just kind of if we're going to look at sort of other consequences of implementing this more fully into ethereum i saw that the number of mev extractors has decreased over the last two years it went from 80 down to like about 27 now and i wonder as we get into this space where it's sort of more baked in won't over time the larger extractors simply become more competitive therefore winning more auctions eventually leading eventually to centralization or if if this assumption is incorrect you know what do you think will happen or why have we already seen that the number of extractors has been decreasing i think it's an uh it's an important discussion to have i will ask like is that based on the flashbots explorer uh numbers or is it basically a dune xyz yeah yeah i think it's difficult to know exactly the number um because as as strategies get more complex there are it becomes harder and harder to define exactly like what is uh mev strategy and what isn't right like so we can say we can look at a specific strategy like atomic arbitrage on ethereum and we can see that like over time uh there are fewer parties that are sort of excelling at it i think that's normal right like for a given strategy space you'll have specialization over time and certain parties will be able to to sort of reliably capture more opportunities the ones that aren't and eventually follow the market um so you know it's it's interesting to look at it as a as a per strategy space definitely i think mev just like every other industry sort of as it matures you sort of see very clearly who are the winners and and who um who aren't able to compete the goal i think in in mev and any other industry should be to foster maximum amount of competition right so you want to be able to have a system that trends towards more pure competition and low barriers to entry for new entrants rather than something that trends towards being more monopolistic where a single party is able to capture all of it and that's that's perhaps the the the conversation that becomes more interesting is like does having only few parties are acting monopolistically have any externalities and flashbacks perspective is like yes definitely it does um and so that's something that we we want to avoid um and we want to maximize the amount of competition so another question that i have which is highly relevant given what happened with tornado cash recently is that again this was suggested on twitter by rebecca reddig of ave and she mentioned that the bank of international settlements recently wrote a paper on mav and in it they said in most jurisdictions activities such as front-running are considered illegal and in the paper they suggested that exploiting mev in blockchains could be illegal in those jurisdictions and i also saw a paper published last week in ssrn by two researchers at the university of surrey they assert that sandwich attacks which is having a transaction that pushes up the user's price and then a transaction on the other side that is able to benefit from that profit from that that they run a significant risk of being found to violate the chief anti-fraud provision of the commodities exchange act as effectuated by cftc rule 180.1 so what do you guys think about this potential illegality of exploiting at least certain types of mev especially you know as we're seeing these kind of freakouts about what the sanctions might mean for ethereum at the protocol level first of all the intern i always take with a grain of salt everything coming out from the international bank of settlement and that like not even regarding to this this might actually have a point but like as a source for like whose announcements we should be listening to but i think this and especially with the tornado cache and everything around him actually brings us to some serious questions we need to answer also in the in in the context of mev and frontrunning in general when what do we as actors in it what do we do with emmy specifically tornado cash is a complicated question right if blocks route is a block builder and we're trying to add transactions and construct them into a block and give that to the validator and that block includes a banned transaction and oofek ban transaction we facilitating that transaction and maybe the answer is yes maybe the answer is no we think the answer is no because you know we're helping the validator order the transaction based on their preference they get accepted or not accepted etc but it's definitely a major legal question that everybody in the space are looking into and what are the implications of what both for major um standing pools whether they are like you know coinbase and exchanges whether they're lido do they comply do they not comply do they include build blocks with such transaction do they not build yeah but i want you to answer these questions for mev you know it's it's it's not as serious as olfactors but just because of like like the implications of it and how like is this national security or is this like a slap on the wrist but the same goes here as well it's kind of if you're participating in it are you in fact breaking the law in your jurisdiction and there are two parts here um one of them is completely legal which i think both me and stefan are not the person to add to the people to actually answer about it okay it's kind of like well it really depends when you create a system like is what my entity doing is not participating or not participating if i'm accepting from somebody else and doing front running am i participating in it also front running isn't necessarily the right term for that we're just like we just borrowed it from a different field so there's it's not exactly the same from my perspective it's more like uh think uh flash boys right the people connected new york and chicago right if you're one millisecond faster than everybody else and you you managed to reach you know price crashes in new york you're the first one to reach chicago and sell before everybody else are you front running and that's kind of like there are legal questions around that i think the more interesting question especially for people like us are actually not the legal ones it's actually the ethical ones like is this a bad thing that we're doing here is this a bad thing we're enabling here it might be a bit of a non-answer because like it's a legal question you know me and stephan are not lawyers but i think we disagree on is it a good thing is it a bad thing um if stefan calls mbv like it's energy out there that people you know mev actors or or others could extract i see it slightly differently if somebody makes a transaction and he wants to buy eth for a thousand dollars and the price of e is a thousand dollars but you know 15 seconds later okay the price have changed and it's kind of like well price went down to nine hundred dollars and now someone oh look at this sucker transaction i can buy sell him for a thousand and then sell after him and capture value that way is that a bad thing it's and saying that the application layers should just like solve it i'm not sure i agree with that look maybe some obligations cancel some of it but if we're talking about ethereum like what should the theorem as the base layer do it's an open question from my end should it optimize to like that and just leave it to applications on top of it or provide a system-wide solution which aims to mitigate it yeah i i didn't get to mention this but you know as uri just said it looks like this will be integrated at the protocol of i guess we alluded to that earlier but given these risks about the potential illegality of if even even if not talking about included in the protocol which is you know the the next big thing de facto this is how validators are going to run very very soon okay this is happening right now and it's a major change maybe it's a good thing maybe it's a bad thing i know but it's definitely a major change and i'm not sure all the community would agree with stefan that this is kind of like a neutral situation how does this affect users etc and i think something is something that users should be aware this is how ethereum is going to act very very soon stefan what do you think given what i just mentioned about this potentially being illegal in some jurisdictions what do you think about the fact that this is the way ethereum is moving is to integrate it more i don't think that's true um i don't think that's the way that ethereum is moving again you know movie boost does a very specific thing right it allows all validators to be able to extract at a proportional amount to their state rating eliminates economies of scale it doesn't have sort of an opinion on um on like legal issues that um that that you mentioned so i just want to avoid sort of entangling separate uh separate questions or concerns together uh in this in this conversation because i don't think it's you know it definitely causes more confusion than it does uh help the the public uh understand how these systems work wait so you're saying that if this does get integrated at the protocol level then it's you don't think there's a problem with you know what what at least these legal analyses say what is this and what does integrated at the protocol level mean oh i mean building uh pbs into ethereum yeah so pbs is a commit reveal scheme right at the block level that allows for a validator to accept a block from the network and then it does a change to the way that the fork choice rule works to be able to say to accommodate the fact that you have this commit reveal at the protocol level well it doesn't say it doesn't say anything about the way that the blocks are constructed or sort of anything that happens before uh before that commit reveal period um so you know pbs while like it is sort of a a protocol change it it really does not impact the way that uh mev itself gets extracted from from how it does today one of the research paths that that is interesting is uh sort of further transaction pool privacy um right um and is there ways to provide that in a way that is not trusted so today right like users can use uh something uh like flashbacks protect to be able to send transactions directly to a builder and get those transactions included included on ethereum but they still have to reveal those transactions to uh to the builder and so ultimately the builder can only in a trusted way sort of promise hey i won't operate on any of the information that you've revealed but you know using privacy technologies like threshold encryption sgx or others right it would be possible to um to implement technologies where it's not possible for a builder to to see um to see the content of the user transactions um so i think like those kinds of solutions those kinds of research topics are sort of completely separate from pbs and pbs getting included at the protocol level and and are definitely sort of active areas of research that might be more relevant to to questions of you know what options does a user have when they send their transactions um to a platform like um like uh like ethereum you know about the the the posts that you mentioned uh the reported by the bic and and the reports on on the cftc rule on uh yeah on the cftc role and sandwiching so i think like this is a new topic that's being explored um academically which is like what are the ethics of uh of transactions how does that relate to mev and uh how does that relate to to the law end i think those are good like initial explorations but they um they do miss some some aspects of of the problem as far as i understand again we have our research team that's like specifically looking at this i don't know the details but but my understanding is that parts of the analysis may not consider exactly how how it actually sort of ends up working on ethereum for example presenting a similarity that front-running in in the traditional finance uh sphere is the same as for earning in the in the in the blockchain context they're they end up being very very different um very different activities that you know probably would benefit from being called differently because otherwise it's it involves a lot of mental models that are borrowed from a system that is completely different interesting about threshold encryption and some of these other options that you mentioned to conceal the mempool and make it effectively impossible to exploit mav as far as i know i think osmosis at least is working on baking in threshold encryption are we seeing that other chains are trying to do this and if so would that eventually make ethereum less competitive against them or is this something that ethereum is also looking into so i don't think that they make it less possible to extract mev again all mev that exists will be extracted and the question is just what are the externalities of that extraction um and so if an application how with threshold encryption can people exploit that if they can't see the transactions so i mean there's multiple different ways so it pushes it at the edges of the encryption right so it depends on what is the sequencing model of those transaction it depends on what happens before transaction is encrypted and depends on what happens when a transaction is decrypted so for example if you have like a bunch of opportunities that create an arbitrage behind them and you push those through a threshold encryption system whenever the threshold encryption decrypts right is when the mev gets exposed and then whoever is in the best position to capture that mev gets to capture it so it transforms what has been sort of an auction based system around the the capture of that opportunity into a latency game so whoever is co-located is the first one to see the decryption and able to submit a solution to it gets to capture that uh the mev under that framework okay but front running wouldn't be possible no similarly you can build other systems on the other end of the of the threshold encryption so because users are sort of submitting transactions to this threshold encryption you don't actually solve the problem of payment for order flow right so order flow in itself has value that comes from the information that contained in the transaction submitted by the end users and so threshold encryption doesn't solve this this problem and so you can build a system in front of the threshold encryption that says hey if you route transactions to me i will give you the same execution or better execution then you would get through the threshold encryption system and you know you can see it because i'm willing to pay you for it and so you can actually you know still see that the mev that gets exposed can either be captured at either end of the the encryption scheme although in that part it means the user captures part of it of its own mev right if if whoever builds a system right it's gonna well show me the transaction i would bid you to send them through me versus through a different system it means the user who created this value with his transaction would capture a bigger part of it and whoever built that system would build will capture a smaller piece of that and if it's competitive you could say you could pre similar to the argument about like miners or validators eventually capturing all the value if you have a competitive system that everybody tried to outbid one another to see the order flow then it would be the user who would capture the value and in my opinion it's a better equilibrium okay it's gonna yes if the value being extracted goes back to whoever created it it wasn't extracted it stayed with whoever created it yeah the big the big problem that that exists with order flow systems in this way is that oftentimes the value is not attributable right um and so it can be difficult to tell exactly who generated the mev that ends up being extracted but for sure i think you know in the best design applications and wallets they'll be the ones and again i'm saying you know applications on wallets because a payment for order flow type of solution to me exists at the application level right it doesn't exist at the at the protocol level but you know the the best uh the best uh applications of wallace will be the ones are able to return the maximum amount of value to their users effectively giving them the best price um and so what this also means is exposing a lot less mev by these users right so one way to think about it is a good order flow system right like or a good order flow solution is one that minimizes the amount of mev that's exposed um ori you have a theory about different levers that can be pulled to affect mav and it also goes into kind of how much mev is impacting the east price or if we were to reduce it how much that would benefit the youth price so can you talk a little bit about that sure so the high level is something along these lines um thinking from my comment earlier i think the major pieces of mev is basically arbitrage opportunities and front-running opportunities and arbitrage is kind of okay it doesn't hurt anybody somebody should capture it it might as well be the miners or validators or whoever produces blocks it actually might be a good thing that way but front-running meaning hurting the user okay you send the transaction and you get the worst execution either time passed or and and your pricing like maybe you made a bad transaction but also you might have done your due diligence but the market have changed and kept you kind of like exposed because you were trying to buy ether a thousand dollars even though while waiting the price had crashed and you will get front run my take is that in order to achieve that we have two interesting levers none of them actually solve it by itself but i haven't given up about finding a better solution to the current situation one of them is understanding that when now that we're moving from proof of work to proof of stake there is a new actor in like playing that actor ours is our rs takers okay so in a proof-of-work world you have miners they're you know using their hardware they're trying to get as much if in in our context etc with pos all of a sudden whoever construct blocks also has a giant bag of youth in today price i don't know 25 30 billion dollars or so and so if you look at the mev game and you say well wouldn't it be nice if arbitrage still existed and people be able to capture it and even validate or capture it is fine but do we have a magical way to eradicate front running so it doesn't hurt users and if you look at the numbers if you see if mev pays the validators and therefore the stakers um something like a hundred million dollar per year in emmy in forefront running so something like a hundred million dollar four arbitrage opportunities and a hundred million dollar for captured through front running this is a really big number up until you compare it to how much is at stake okay so if you look at all the stakers together and they have 20 billion 30 billion dollars worth of bag of eve and you could say well how much is that for you and that's something like well if you do the work 100 million out of that like the tldr going back for a second if there was a theoretical world in which front running doesn't happen and you'd ask yourself how does that affect the price of eve and how does that affect the bags of the stakers and you'd say you know what if we magically eradicate the front running the value of eve in five years will be let's say 10 higher in this theoretical world where d5 flourish and there is no front running compared to the current world with front running if the difference is only five percent or ten percent then stakers would actually rather not allowing for front runners okay stakers would make more money if front-running if front-runnering is eradicated somehow magically and their value of their eth goes up okay because 100 million dollars is nothing when you have a giant giant bag of eve and so the math around it is kind of nice basically if it would only increase the price of eth by something like four percent over five years and the audience could think what would price of earth look like you know and that and anybody could have an opinion would it be five percent more 10 more 50 more 2x if we somehow magically allowed the defect to flourish without front running and so this is a super powerful lever okay stakers decide what validators would do okay if stickers stick with value they don't do front running there will be no front running the problem with that or with this particular lever and why this single lever doesn't solve the problem is that if there was just one staker in the world and he would have to choose oh do i eradicate front running or not then he would definitely choose to eradicate front running okay eradicating front running would pay him something like 300 400 million dollar per year even if we're talking about a small price change of of 10 over five years versus the 100 million that it would get from front running but if you have if you have many stakers it's still in their collective favorite this is a classical tragedy of the commons each one of them would want everybody not to do front running but each one individually when it's their turn to propose a block they would you know i'd actually make more money if i include front running and i'll make slightly more money so as a collective they'll make more money if they eradicate trunk running and only stick with validators which don't do front running but each individual one would actually be slightly better off if it does front running which kind of like breaks this entire like utopian dream but it's a start point okay they would make more money can we push them in this right direction which brings us to the second level that we have which is users stefan alluded earlier that users actually control the order flow okay whoever makes the money from front runner actually needs to feed this transaction and currently people just send out the transaction to the peer-to-peer network being seen by everyone and get wrecked like and this is where i kind of like disagree with the fun it's not a good thing that you send your transaction out there and you'll always get the worst possible execution for your transaction but they can choose where to send their transaction right so you could imagine a world where there'll be an mev searcher or a block builder and again if there was just a single user right and who was doing all the transaction it would tell them listen i give you the transactions but you don't front-run me you can capture arbitrage you can make money however you'd like but you don't front-run if your front run me i take my order flow and i go elsewhere and that med searcher or builder would be the most profitable one he has access to the order float he can capture arbitrage he can make money and others can't so users actually have a lot more power as a group than they're actually utilizing or people realize but again it's a utopian dream how do we actually do it like how do users actually leverage the fact that they control the order flow and it's an interesting and hard question metamask is a bit of a king maker in that regard you could say well metamask and choose whoever if we all direct the transaction to a trusted entity we have to deal with that's not really decentralized right basically we just moved to a centralized setup so there is a trade-off here like you want it to be decentralized and send it anybody who send it everywhere and so users are kind of like faced with a hard choice and users or wallets depending on how you look at it do i send it everyone and the user took you know just through the broad peer-to-peer network and everybody get wrecked or we send it to just a few entities who promise us that they won't front run us but kind of like lose out on the decentralization piece and my what i'm trying to solve for and i'm trying to figure out in through blocks out and in general and discussion with the community is how how can we utilize these two levers to get the best outcome for users okay and i think it's the users we should care about and i think this is where me and stefan not necessarily agree okay i think you know well taking it back so if i'm looking at a really funny way i'm sure and again stephanie is a good like it's not that i think stephanie's a bad guy it's just that i think it is possible to reduce mev by playing with these levers and designing the system right and kind of like at the ethereum level okay so we make the base layer provide some economic guarantees and some mode of operation and not go to every application say oh figure yours out okay like build it in a way that doesn't extract mev and going back to stefan's first point we just if if there are more serious validators who can extract more value and there are the solo validators who extract less value then mev boost basically said well okay now everybody are super well armed everybody are good at extracting okay so we took a somewhat under adversarial setup and we made it super adversarial in terms of like okay everybody are fair but this is very very adversarial your transaction would be try to take advantage of and my angle is more oh okay so the angle we should be exploring is how do we utilize maybe these two levels which i mentioned that it's actually in the staker's benefit for front running not to happen okay if mev boost allows validators to connect to any third party that produces a block then maybe stakers tell their validators listen accept blocks but only if they don't have front running if you if they accept front running send it to somebody else so it's a potential and if user transaction would kind of like be could be used combined then maybe we stand a chance maybe we can find a good solution yeah so um we're like over time why don't stefano why don't you respond to that while you're talking about it let's bring in this idea again about how um validators could potentially share their mev profit with users because i find that an interesting idea and go ahead and respond to uri yeah i didn't like that framing um so i think i'd encourage everyone to look at something that's called the mev supply chain and i think it's probably the most useful concept to think about how can this system evolve and what is like a good direction for the entire thing to evolve and what is a bad direction for for it to evolve and the simple heuristic that i give in that it's both a presentation and an article is that you should look at where the value accrual is if most of the value ends up accruing with users or validators it's probably a good mev supply chain if most of the value ends up accruing with someone in the middle like a searcher a builder or a relay or some other roles or an application a wallet then it's probably not a good supply chain the problem with mev is that there's a lot of incentive for value capture and so it's easy for someone to say hey here's a solution that solve mev you have to pay me to access it we're both going to be better off because you're going to receive more value i'm going to receive money but the problem is usually that causes some centralization risk in the supply chain so this you know the order flow problem in this question that we're discussing is one of the main ways in which the supply chain ends up becoming super centralized right a block builder that's saying hey if you exclusively send your transactions to me i'll give you a better deal also means that this block builder is not operating on the same amount of transactions as all the other block builders in the system and they can then use this advantage to integrate further down the supply chain and sort of reinforce a monopolistic position so it's not that simple it's not as simple as just saying like okay here's a product that's better for users in this scenario if this product also helps a certain entity get uh sort of a monopolistic position then it'll be bad for the uh a whole set of users as a whole and sort of entrench this um this entity so you know the fireplace perspective on this on this problem is there are multiple different sources of centralization the main one initially was access to block space and it's sort of the initial monopoly that the flashbacks unbundled but we see other two big sources of monopolies that are unsolved for as of yet one of them is order flow and the other one is cross-domain execution so execution on multiple different chains and you know the solution that we see to this is what we sort of loosely define as decentralized block building and it's really just a vision of the future that says this supply chain that we have is going to be maximally competitive in such a way that there is no single entity in the middle that's able to extract a huge amount of the rent and therefore the value gets pushed back to the user under the form of better overflow systems or applications like expose less mv i should say or uh if efficient and transparent markets for uh for block space which return the value to uh to validators and stakers all right there's so much more to unpack i had a number of other questions that we're going to have to maybe touch on another time and one last fact that i do want to throw out there is that right before we recorded hassu of flashbots did also announced that flashpots is going to be open sourcing its relay or ahead of the merge i think they'd originally plan to do it at the time of the merge but given what happened with tornado cash i i guess they felt the need to to move that timeline up um all right you guys this has been so fascinating where can people learn more about each of you and your work um you could always google blocks route b-l-a-x-r-o-u-t-e or you know me oricletman basically on twitter like i think that goes for a lot of the interesting discussion stephan shoot your way but um basically i'm trying to keep everything on twitter in the open because i think the community should be a part of the discussion and not just like you know left for us like mev nerds in our in our in our channels um yeah so flashbots um we still don't have a website i don't know we're two years into into this project and and we still have failed to put together a website um but uh but we do have a writings website so writings.flashbots.net is a good place to go and we have a discord community where people can go and hang out and we're also super active on twitter so there are a lot of various flash class participants that are engaging perfect all right well it's been a pleasure having you both on unchained thank you so much to you thanks so much for joining us today to learn more about mev stefan and uri check out the show notes for this episode unchained is produced by me laura shin what's up from anthony yoon matt pilchard juan urbanovich pamajimdar shashank and clk transcription thanks for listening [Music] you 