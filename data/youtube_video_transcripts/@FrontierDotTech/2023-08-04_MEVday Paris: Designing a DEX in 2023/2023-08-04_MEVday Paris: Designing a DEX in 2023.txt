we had I think 1300 1400 people apply for for this event and we could only lend 200 people so every single person in here I know has a strong opinion um and the goal is to let it be heard so don't uh don't be shy please otherwise I'll start calling on people that I know are in here and uh you know it might be a little bit on the spot so okay without said and get please uh please take it away hi hello everyone I'm Ankit I'm head of research at Frontier uh we have a packed the house today uh to start uh the first panel that we have designing decks in 2023 um I would let you just let everyone go by order and introduce themselves and tell us what they're working on right now and then we can take things from there yeah hi everyone uh sit on good my name is Max Resnick I'm the head of research at special mechanisms group and we design mechanisms primarily we're focused on Mev and specifically on Mev on ethereum for now uh I think you'll hear a lot more about what we we think about lvr today hi I'm Andrea Nido I am Senior research Economist at Cal swap Cal protocol and uh yeah so I I also spent a lot of time thinking and designing mechanism and in particular we we've been working recently at Cal protocol on you know thinking about how you would design an amm or a DEX when all the trades are batched because obviously that's what we do and I think we're gonna discuss it a bit later cool uh Doug kolkit a Founder at uh ambient or some of us you might know us as Croc swap uh we're primarily focused on building an amm where the economics are sustainable for Passive healthies hi everyone I'm Shin I'm a researcher at unisoft labs and I'm working on all things unusual but most recently you know sawbacks and unusual V4 hi everybody I'm Eugene I work at Ellipsis Labs we are building a fully on chain limit order book decks on Solana uh I think I can just start by maybe Eugene can start and we can start by them you guys should tell us what are your spiciest opinions on am design spiciest opinions on amm design um I don't know if it's spicy in 2023 but I think it's pretty clear at this point that ammlps on average in expectation tend to not make money uh who are the remaining LPS why do they still do it is not super clear to me uh it seems like there is still plenty of room to innovate on the amm design space But at the end of the day it does seem like kind of the goal of an amm is to mimic to some degree what a professional liquidity provider you know where they would want to place liquidity perhaps on like a centralized limit order Book Exchange so our opinion at Ellipsis is probably can't do it with 12 second block times probably can't do it with 30 million gas per block so we're giving it a go on Solana do we have anyone in the room who's like a passive LP on uh on amms genuinely and in size like you put you know for profit or just for fun for fun okay we have one over here only on assets to have a peg okay so what does that mean just like only a curve stable pools or what is is it assets are also traded on centralized exchanges or only assets that are like not liquid on socialized exchanges gotcha gotcha okay cool there's only one LP he's the only LP on all of uniswap everyone you can go talk to him afterwards he'll be in the lobby okay Carry On should I go yeah okay um I think my spices take might not be tax related I think tax related wise I'm like pretty mid curve um but uh I think um I mean in terms of Mev Solutions um the I think the best ones are always going to be uh kind of scenario dependent and custom to to each application rather than you know there's like one catch-all solution but you know I think that's probably going to cause some controversy but that's that's kind of my opinion uh yeah I guess my spacious opinion would be I think the the industry in general is going the wrong direction moving towards professional liquidity I don't think can really have decentralized markets if there's six trading firms that you require to provide liquidity that's just not decentralized in my opinion um I also think retail has a much lower cost of capital than professional liquidity I don't think Citadel is getting out of bed for anything less than 100 expected returns whereas your average retail participant is happy with six seven eight percent so right the big problem with amms is toxic flow just isn't segmented and am uh LPS eat all the toxic flow but I think there are ways that you can fix that and keep liquidity fully decentralized and fully passive yeah so um like as we know the problem from LP Viewpoint is that can be frame in terms of asymmetric information that they may be trading against RB Treasurer that are better informed than them and therefore exploit them this is toxic flow and I think that a lot of the solutions have been proposed are uh to some extent missing the point and I'll explain this via an example suppose that you've inherited uh a piece of antique from your grammar and you have no idea how much is worth it and you don't like it you want to sell it now if someone shows up and this person is a super expert in antiques you know he's gonna screw you okay he's gonna like tell you a price that is just convenient to him on the other side if someone shows up and you know this person doesn't know anything about antiques it's just tell you a price that corresponds to his own how much he likes it then okay you know statistically you may get a good price or a bad price but it's non-systematic now when you see this way you immediately have like you can I'm sure you can think of a solution to the problem because if there are multiple experts out there you can play them against each other and still get a good price even if you do not know anything and so I think to some extent a lot of the discussion about am design has been about you know how do I know the correct price for example feeding the price of an oracle through an amm or how do I distinguish between the informed guys and the uninformed guy you know the informed guy you know wear fancy dresses and speaks with a French accent and the guy who is not informed is more Scrappy or similar things but the idea of in fact you know we like the toxic flow provided that we can play the informed players against each other has somewhat escaped and this is a bit like the work that we've been doing recently yeah I think uh I I mostly agree with this I think we what other people have said is the toxic flow is the problem that long block times accentuate it which I think is true but I think maybe one thing that isn't discussed is that the proposer and their role in the system on chain where there's one person who gets to write to the chain who gets to decide all the order of all the transactions is uh contributing to the problem as well and it makes it really difficult to pit all of the training firms against each other and give users good prices so we have a paper that's about how it's difficult to hold auctions quickly on chain and which is kind of what you need to do if you want to solve this problem is you need to hold auctions quickly we know that we can capture some of the lvr like if you go look at the PBS auction the PBS auction is redirecting a ton of lvr to the proposer of the block because they're like the only person who can do it so I think if we could figure out somehow how to run an auction in a market system where the proposer wasn't a monopolist then we could push more Revenue back to the LPS yeah I heard a lot about toxic non-toxic flow how to differentiate how traditional Finance does something on it does anyone want to take on like how do how do some of some of these firms differentiate between toxic non-toxic order flow do you think there is uh venue that we can even do something like that on chain uh maybe maybe Andreas you can you can take it I mean the in the theoretical literature the difference will be between informed and informed Traders and informed Traders would be someone who is paying attention to the you know prices everywhere say the binance price if that's where the the price discover is done and as soon as it observe a deviation from the your local decks from that price will trade so to exploit this uh so the difference is that of information and instead non-toxic flow will be people that kind of want to trade at a reasonable price um so for example a cow swap you know we receive intention to trade we aggregate them in a batch and then we there is a mechanism to look for the best execution now we we we claim that we have a non-toxic flow precisely because the batch imposes a delay and it's also unclear then from the trader point of view how the batch will be executed there is a kind of a competition that will determine afterward so it's very likely that an arbitration can exploit differences in batch in the various prices through our batch so we think that our our our flow is non-toxic but instead go directly on attacks and compete to have their transaction included earlier in the block precise to be the one that rebalances will be the one that are the toxic yeah I mean yeah like I mean to First approximation toxic flow right now is just the price of binance like here's the like the reality is price Discovery happens at binance and if you look at the stat Arbonne chain it's pretty much just check the price against binance and go there right so like there is arbitrage lawyers need to exist um they're important so it's not necessarily getting rid of toxic flow just making it pay enough so if the price of binance gaps 50 bips and the statar uh Mev bot is paying five bips to trade on the amm pool it's just not sustainable so it's not necessarily about getting rid of toxic flow it's just making about making toxic flow paid to the LPS a fair share of the actual economic grants and right right now those rents go to ethereum so it's great if you're an ethereum holder juices the burn um raises staking yields but sucks sucks for LPS so like a lot of what we focused on is okay like how can we move I'm going to move that layer keep it decentralized but probably ethereum itself isn't sufficient to do that so like we're really excited right now about coprocessors um we think you can do a lot of really complex stuff in coprocessors uh off chain what do you what do you mean by co-processor oh yeah co-processors basically some decentralized way to do compute off chain and then post the proof that the compute is is accurate so ZK would be an example but you know depending on what the the security risks are even something like The Enclave might be fine right and like you can pump in into sgx or something and you can make reasonable assertions and if it's not fully secure maybe someone gets to swap they hack sgx swap at one basis point instead of 50 basis points and that's fine like occasionally so we think there's a lot of room to do computation off chain um but still in decentralized way still in a fully trustless way or near trustless and and move that logic off chain and then have basically the chain and the amm be the be the settlement layer I think one of the ways that they deal with this in traditional Finance is actually payment for order flow so like Citadel wants to distinguish between the toxic flow and the non-toxic flow so they buy all of the non-toxic flow from Robin Hood and then they give them pretty good prices because they're not toxic um you know it's debatable whether those prices are very good The Citadel people would say they are but I think that's something that's very clearly coming down the pipe in crypto and the question is whether the people who are able to pay for the toxic flow will end up being LPS somehow in which case they'll be able to kind of price discriminate give good prices to uninformed Traders because they know they're not getting screwed in your your example of the Antiques assessor right uh and then give worse much worse prices to the toxic flow I think what's going to happen though is that the citadels of our world are going to be able to pay more than the LPS for the non-toxic flow and then what's going to be left over is only the toxic waste and that's what's going to be for the LPS so even though I think private order flow has the potential to alleviate this it may actually make it worse depending on who kind of wins the auctions for the the order flow I think Unison packs also launched recently which is also very similar to doing some compute off chain gin you want to take some of this question as well yeah uh so I guess I can first talk about the the lever question a little bit and then um we can talk about unusual X so I think with uh with the thinking around uh returning uh lever to LPS uh in general unisoft has always taken a market-oriented approach to solving pretty much anything and specifically for designing pools with custom functions and encourage people to to innovate is this thing cut called hooks which basically allows each pool to have its own sort of custom logic and more or less arbitrary logic that can be executed while the pool is is executing certain functions and people have been discussing on Twitter oh what we can do with these Hooks and those ideas that my panelists just mentioned have all kind of come up before which I think are like promising ways to to solve this problem like you can you can auction out the the ability to for example trade in a pool in a block right and and that essentially just passes on some of the kind of willingness to Arbitrage from the arbitr to the LPS uh it's unclear to me at this point whether you know the details are are going to actually work out but you know I think these are promising research directions uh and I think unisoft X is just tackling a separate problem which is the routing problem like when swappers are swapping especially with it's about V4 you will see a ton of pools and it will be almost impossible for you to kind of find the best routes yourself without you know having this PC machine and complex math and and all that so uniform X is really uh a product uh with the swap pressing mind and say again Outsource uh routing and execution to the market and say you know whoever gives me best execution can have the trade and you know so we're kind of saying these are two uh orthogonal problems that can be solved better if they're decoupled right instead of putting them together um yeah that's that's kind of my take on it it looks like a lot of these new newer versions of amm designs are trying to split into two types of users toxic and non-toxic type of users uh does anyone in the audience has have any opinions on this direction that amm design is taking spicier the better yes uh they pass it on to other exchanges to like like for instance like the one inch RFQ system if if there's something that one inch market makers don't want to fill it might go on to uniswap or Dota or some other uh entity but uniswap is unique in that when there's some flow that the market makers don't want it would then transition on towards the uniswap liquidity providers and it just it seems to me like you guys are the only ones that are sort of like out of conflict with yourselves um so to speak and I was just I was curious like I don't know it just seems like a really socially complicated like you know governance like I'm curious like how you guys are handling that from a variety of different angles sure sure uh I can't answer it uh I think it's uh it's a bit of a nuanced topic I would say um I would agree with you um uh the fact that it is a hard trade-off to balance because we do have two type of users we have swappers and LPS and we're trying to optimize for both but sometimes they are uh kind of in this position where you have to make a decision on where you want to be on the Spectrum but uh it's not uh true that all the flow has to be all the residual flow has to be routed to unit swap right for example uh if I'm operating a status shop I'm very well positioned to Route everything to any exchange it doesn't have to be on chain in fact it might be cheaper to just hatch your position in binance as as dark side right I can just I can win the order first and I can if I don't want to internalize I can just route it to binance so it really depends on the situation I would say and not exactly um clear well I I fully support the uni swap front-end routing to ambient personally haha I think um I think there's a distinction to make here between not necessarily routing all of the bad flow to your LPS versus making sure that they never get any of the good flow which I think is the current problem because all of the good flow would get filled by the RFQ system yeah under this sort of RFQ system you turn the passive LPS essentially into this liquidity of Last Resort where the RFQ liquidity providers who are probably going to be these professional firms they're going to take a look at the flow that is coming in decide if they want to fill it at a better price than the the passive LPS will fill it at so on balance you know ignoring anything that V4 might change it's probably going to reduce the amount of non-toxic flow that hits the the passive LPS there's definitely a trade-off between the swap or welfare and the lp welfare although it's definitely not this like purely zero-sum game because right now there's like a ton of loss external to the system so I do I do support the general framing that you know you kind of want to reduce this loss to Arbitrage I think it's super super clear right now that and on LPS pay like way too much because you see some of the folks in this room here bidding like 10 ether to be able to build a block where they get to make the first trades and that is getting just like lost from the amm system entirely just going to the ethereum holders let's do a a test of honesty um who in this room would consider themselves to be toxic flow can you put your hand up all right we have we have a few people in here yeah another show of hands would any of you want to take like be makers on only the orders that Citadel and jump and Jane Street and everybody who just raised their hand didn't want so can you hear me yeah okay cool um so we've worked recently with balancer at cow swap on an integration it's still experimental so it touches on certain pools not all of them it by which but essentially the idea is that our solvers that are the one that executes the the batch so the orders in the batch can access those pools at 80 discount on the fees so this is to say that um the logic there is rather that even so some of those orders may be matched by private liquidity some of those because we have a batch some of these orders may be batch peer-to-peer So within the batch with Coincidence of wants and what is left however is still considered non-toxic so much so that balancer is willing to give a very large discount or it is experimenting with this idea of giving large discount to the floor coming from cow swap so yeah so in this sense I will tend to agree with the idea that uh what is left doesn't need to be toxic necessarily um but but definitely uh we are going to say there is no we so we act in the interest of our Traders period we we do not have the lp side so this is a kind of a uh uh and an initiative that we started that seems beneficial to both of us but ultimately we are working in the interest of the Traders I think like a lot of uh LP leaking values due to price Discovery happening on off-chain venues like binance or other faster exchanges uh what is this panel's opinion on how can price Discovery especially for the most liquid assets can happen on chain maybe Eugene you can you can take this question yeah so Alisa Ellipsis our opinion is there's all these really really sophisticated liquidity providers that exist in traditional Finance they've been playing on these electronic markets they've invested tens of billions of dollars in r d and infrastructure into getting really really good at providing liquidity and sort of the result of this competition and there are a bunch of like zero sum or negative sum aspects of it but the end result really is that on these centralized exchanges there are really really competitive prices really really deep liquidity because the way you compete as a liquidity provider is by providing better prices or by providing at the same price with more size so in contrast with the amm approach which is sort of taking this very prescriptive view on what liquidity ought to look like with a limit order book you sort of let these liquidity providers put the liquidity wherever they want to put it in a way where you're again allowing them to compete on price you're allowing them to compete on size and the result of this game which might be zero sum or negative sum between them is better prices for the the non-toxic flow for the swappers and in this world the other is probably very little role for the passive amm LP and I would argue that that's okay I don't think there's any reason that you know passive Capital necessarily should be able to make a return or like you know be providing better prices than a citadel or a jump trading who again has spent like so much resources into getting really really good at this particular task and if we put if we're able to put all of this on chain then uh maybe you're still never going to be quite as efficient as binance but you can approximate something that's uh more likely to facilitate some of the price Discovery happening on chain so uh I'll disagree with that a little bit so yeah you're right uh wait inner Trad fire right market makers compete the problem is they don't necessarily compete on price a lot of times to be honest they compete on who gets first position in the queue if you ask any hft Market maker would you rather have the best Alphas in the world or would you rather always get first Q position on new level formation nine out of 10 of them are going to tell you we just want the best Q position so the reality is like traditional markets and and Order books or even professional liquidity always turns into this PVP game so if Citadel and Jane Street are competing for order flow even if that order flows non-toxic it becomes toxic because they're both bidding against it and therefore right they don't bid as aggressively as they could right because with Citadel Al Biz James Street right there implicitly eating Jane Street's Alphas right like taking the other side of that so anytime you introduce a PVP Dynamic you introduce this adverse selection problem which inherently raises the cost of liquidity so one thing that I think is really interesting about amms is you basically take away the PVP game and one one reason I think amms actually can beat professional liquidity and can provide better prices is without the PVP games you can provide really really aggressive pricing than you can uh when you don't have these professional liquidity providers competing against each other and holding back because they don't want to eat each other's Alphas uh I would add to that in fact there was a paper uh doing exact this analysis so they take uh they take I think uh Central limit order book data from Canadian Stock Exchange or somewhere and they sort of uh compute the counterfactual uh liquidity assuming the the priority is is Paratha instead of uh price time priority and then you you do see that better risk sharing among LPS would marginally improve uh liquidity uh given some you know assumption on on risk preference the other question I would have for Eugene is um you know as far as I know that the reason that um we have this uh thesis that amm liquidity providers are kind of picked against is because you know long block times and latency compared to centralized exchanges um which you know it would be reduced somewhat if if block times are shorter but fundamentally you know like Steven Solana blocktimes are like 100 years compared to compared to binance right so does thus building Central limit order book on a blockchain really solve it for professional market makers if if that's a dynamic dynamic that's always going to play out yeah that's a that's a good question I think like the actual answer is we will just have to see in practice as the uh participants in the market become more and more sophisticated long block times definitely still a problem for Solana although you know not to the same degree as they are on ethereum I think like the main difference here between the active liquidity and the passive liquidity is the passive liquidity is effectively paying the arbitrager some amount of money to move the price to the quote unquote correct price which maybe we will just agree for now is is whatever the price is on binance and with uh you know the liquidity is following some curves so there's like some amount of uh some size trade that needs to happen and then there's some loss inherent in there with a active liquidity provider uh kind of the hope is they can move their prices before someone is going to toxically pick them off essentially like moving the prices for them and there's a bunch of nuance here as well for example like you're playing these top of block games um but there's I think a lot of room for Innovation here in the same way that there's a lot of room for experimentation with like the microstructure of the amm I think one of the most exciting things about working in the D5 space is we have this opportunity to really play around and experiment with different microstructures and have conversations like this one whereas you know if you're the nice e and you want to implement even like a new order type this is a process it's going to take like three years we can sort of just roll it out tomorrow and see what happens in a live market I'll just add actually we did we actually just completed some research on this block times and we're actually working with blocks route uh on this about kind of an instant inclusion uh type hook so let's see okay if you can actually guarantee sequencing when things arrive you know how much less is the toxic order low in and it's pretty substantial when you go from 12 seconds down to I think we found like diminishing returns are you pretty much hit diminishing returns at like 100 milliseconds 50 milliseconds so so I think that's like kind of The Sweet Spot um at least based on like the eqsdc pools in the order flow Udi has a question Yuri has a question so I want to ask actually Doug on what you just I was surprised that what you said about that amms could by not having toxic order flow could actually potentially give gradually better but does Mev as the guy who's against Mev auctions the existence of Meb auctions does that make it the PVP setup in which which puts it back to users to getting the worst price or not yeah I mean that's definitely definitely the case if you do have an auction right there's still going to be some competition you can play around with it though and you can say okay maybe instead of an auction every block you auction off the right for the next whatever 12 hours or something right that that's basically what cidel does that's why I read retail order flow you don't compete on every single order flow coming through right so it all comes up with a contract because they don't want to compete on every single order that comes in from Robin Hood with James Street or whatever right they they bid uh but they bid at like at a larger granularity where it's less of an issue um so like the cool thing again going back co-processors are really cool because now everything's on chain we can make assertions about okay are you you know you've held this position have you met you know certain criteria uh you're eligible to participate you're not eligible to participate again it's on chain so we can all agree like what what the results are um so I think we'll have to experiment in terms of how do we do those Mev auctions but but yeah I do believe kind of auctioning off larger granularities reduces the adverse selection problem and and follow up on that is that you all kind of say well you know really price Discovery happening on binance which is we all know what binance is doing right now or how it's doing um but from my perspective if defy keeps you know being tagged behind C5 it's always going to be like a side card it's not going to be the real thing it's just like where the Arbitrage has happened and beat other do you guys think price Discovery can happen on defy and is it important or not like I think it's important but you might disagree the big thing that's really missing right now to be honest is perps uh you just have so much more liquidity and volume on purpose on centralized exchanges and that's where price Discovery happens and unfortunately perps are kind of a hairy issue because of the regulatory stuff around it fingers crossed it won't be soon and you know maybe some of the amms or dexes in the room would like to support perps uh no promises but yeah I think I think right you need something that's kind of more Capital efficient uh forward price Discovery to happen I think kind of perps make more sense even even in equities right most price Discovery happens on the index Futures to be honest yeah can I so just on this point and then I wanted to say something about uh active and Pacific provision so I don't think it's particularly important where the price is determined at least for the point of view of an LP that is afraid of being exploited lvr and so on and so forth because you could have a very large location on chain where this is the where the price is determined and if you are some other amm you still have worried that you may get exploited and even if you have two equally large location on chain uh when one goes off sync some arbitration will come in and try to rebalance the two location but we do by doing that can create lvr in both of them so in some sense it might be important for other reasons but I don't think it's particularly important for the point of view of arbitrary so exploiting uh LPS now and also just one thought on the passive versus active liquidity provision this is very much in my view a debate that is the artifact of a certain design that don't protect Erp against arbitrageous coming into rebalance and so then it becomes very important that you will manage your liquidity so that you always maximize the amount of Revenue you get from noise traders to compensate from the FED that the design exposes you to at VR this also this comes okay Universal 3 you have the kind of uh where you want to place your liquidity and in general there is this research showing that more volatile token pairs people provide less liquidity because they are more Expo exploited by arbitration and by providing less liquidity to the amount of fees from noise traders that are generated are distributed on fewer so they earn more from those revenues but if you have a design that somewhat limits or eliminates at VR then I don't think the issue of passive versus active liquidity provision arises anymore uh sorry I just want to add one more point which is I think that we'll have to open the floor sure not even questions you mean those weren't questions all right uh no we're gonna wrap it up and then move on to the next panel yeah um but you know we have a lot to talk about order flow on the next panel as well so if you guys are still in the room you can still participate informally from the seats should I say it or okay okay one last Point uh which is maybe obvious fact that people often miss when we talk about like more high frequency stuff of things is um you know on the two 200 000 tokens that's being traded on unit swap you have like maybe 200 that's on all the exchange combined right so you do see 99.99 of the tokens have price discovery on this permissionless system which is why we're building it and you don't have to get you know listing Departments of any of these exchange to to approve so that's definitely one upside that we should pay attention to yeah all right I'll wrap this up here thank you so much for the panelists 