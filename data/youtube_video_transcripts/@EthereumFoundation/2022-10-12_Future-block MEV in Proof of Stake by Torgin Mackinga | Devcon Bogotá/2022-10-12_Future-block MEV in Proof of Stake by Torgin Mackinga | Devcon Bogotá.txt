foreign [Music] my name is torgen I also work at chain security and today I'm going to be talking about what I call Future block Mev in proof of stake so what the hell is future block Mev supposed to be um to understand that first we have to talk about block production and how it changed um with the merge that happened a couple weeks ago so in proof of work every Miner tries to mine every single block and what that means is at no point can you know who the next block producer is going to be but improve of stake that's a little bit different and there we actually decide ahead of time who the proposer for which block is going to be and in particular for ethereum we use the randow value together with the current validator set to do this and that means that you can always know all the block proposers for the current Epoch and for the next epoch and since two epochs and ethereum take about 12 minutes that means that if you are a validator on ethereum you will know up to 12 minutes ahead of time when you will actually be the one that is able to produce a block um so now what do you do with this information this is what I call Future block Mev um so if you are the block producer for a block you can control the transactions that are included and The Ordering of the transactions um so if you know that in some block n plus one you are going to be um controlling that block you can do some weird stuff in the blog before that in Block n which you wouldn't do usually so one example of that would be that if you want to do an oracle manipulation on uniswap um the way that you do that is you buy some asset like here we have some asset that is worth one and then you buy enough of that to let's say move it to six and then the uniswap Oracle will always record the price in between two blocks so it will record this price of six at the end and we'll take that into its uh average that it reports and now usually this would be very expensive to do because everyone would see that this price is incorrect so there's obviously a really big Arbitrage opportunity that somebody could take um to like sell this asset at a higher price than what it is actually at and that means that for the attacker this would be really expensive but because now we're assuming that the attacker is actually the block producer for Block n plus one they can just put their own transaction at the very beginning of the block n plus one and they can guarantee that they themselves are going to be the one that takes this Arbitrage instead of anybody else so essentially they are able to hide the Mev um from the other Searchers and here we're assuming that there is some mechanism in which they can make that first transaction in Block n without going through the public mempool so maybe they put it like through flashbots or something and that means that people will only see the transaction on chain at the point where it's already too late because the next block is going to be produced by the attacker and nobody is going to have any time to to react before that happens um and so one example of what you could do is if there was a lending protocol that used such a uniswap Oracle um you might be able to manipulate it enough to get some uh to get something into the liquidation level where it can get liquidated but it wasn't able to before um and then that liquidation will be available in Block n plus one and again because you control it no other Searcher is going to be able to compete with you for it because you can just put your transaction uh like in second position for example in that block so then you can trigger a liquidation without having to compete with all the other Searchers out there so what are the main takeaways first of all the block proposers improve a stake are known in advance and that is different than it was in proof of work and second of all this information is valuable so for example you can use it through um doing manipulations or creating Mev and hiding it like I said here but you could also imagine that you could maybe sell future blog space and guarantee that to people or you could even incentivize people to um create a lot of Mev in a block that you will control like you can imagine if there's some nft project they might not care exactly in which block they're going to be launching so you could just tell them to launch in the blog that you create and then all of the um gas that is going to be spent on minting those nfts early is going to be in your block instead of somebody else's so I wrote a paper on Oracle manipulation and a blog post on how that changes after the merge so if you guys are interested in learning more about the Oracle manipulation side of it I highly recommend checking it out 