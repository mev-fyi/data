foreign [Music] great uh hey everyone good afternoon uh I'm Alex Stokes a researcher at the ethereum foundation and yeah you know the title here says block building up for the merge there's like a subtitle which is Mev mov moving forward uh you'll see in a bit I have another kind of variant of this talk that looks at more I'd say like the technical side of things and I hope today to kind of communicate uh like a sense of the landscape around this topic and like Mev is like the obvious uh you know uh Buzz phrase here um but yeah so let's let's dig into what that means and hopefully by the end you'll have a sense of again yeah like the landscape and uh what some of the concerns might be moving forward so I've kind of always said that putting currency into crypto like cryptocurrency is like this double-edged sword because like yes you know there's like uh this like speculative aspect that draws a lot of attention a lot of talent a lot of capital to the space and that's great uh but in the same you know sort of in the same breath that also means that we're kind of directly programming with incentives here we have this sandbox for you know playing with these different crypto economic games and uh I guess hopefully you'll see as we move forward that uh you know this could perhaps backfire it could be the case that short-term incentives that are supported by protocols like ethereum are perhaps too great for us to uh sort of resist and in the context here uh this is an important point I say secure block space will be a premier commodity of this century so maybe that's like a bit of a forward-looking projection and maybe you don't quite buy it that seems to be to me the direction things are going I called secure here out in italics because some people say oh you know you could just make a new L1 there's like as much block space as you need but I will claim that you know there's different qualities of block space some is much more secure than others so we have this thing and if there's this thing called block space and it is actually so important it's going to be very valuable and because it's so valuable we should expect battles for control over block space so uh this is like if anything the takeaway points I'll just get it out of the way um and when I say this I want you to think about like you know influences both inside the community and outside the community there's going to be all sorts of people who are going to want to like try to attempt to co-opt ethereum um and you know that can happen in very overt ways it can also happen in a very sort of uh subtle ways so just keep this in mind I think when we think about any of this stuff around the protocol what it looks like how the protocol changes things around the protocol like Mev and like a whole separate talk in this event is like staking pools but when you think about this stuff just uh have an adversarial mindset and just yeah be be careful out there okay so I use this word block space maybe some of you have never heard of it so what I really mean is just the stuff that goes into the blockchain so today that's like transactions if you ever used ethereum or like metamask you've done this you like have this transaction and uh maybe you sign it maybe there's some error maybe there's not enough gas maybe you didn't pay enough for the gas like a lot of things that happen um but you're probably familiar with this notion of a transaction and so you know in the very sort of naive model we have a bunch of transactions that get packed into blocks and these blocks go on chain so to speak which means they're like accepted as canonical or you know part of the consensus and then somehow this like moves the state of things forward I uh have this like sort of elusive comment to say tomorrow you'll see in a bit that this notion of Builders I'm going to sort of present today unlocks a lot of sort of abstraction and flexibility around how we use the protocol and how we like access his resources and uh yeah so maybe in the future it looks a lot more General than just like the transaction you get the metamask but so concretely like transactions are you know like the takeaway here is that transactions are a way to interface with the protocol's resources and like what we really mean when you say that is like the state like the fact that ethereum is organized as a blockchain today is like kind of a detail it's like an engineering detail almost like the important thing that we all care about is the fact that there's this like shared Global state um for example the account balance is everyone in the protocol the state of smart contracts of uniswap of Ave maker and you know everything else there's there's a lot these days and the state is like the the thing that you know is sort of the actual valuable thing any block space to access the state and this is what everyone you know I claim will be uh will be battling for control over and it turns out that you know because block space at least on ethereum is so valuable you know it supports this ability to specialize so what I mean when I say specialize is that we're seeing the emergence of this this role within the protocol uh called a builder and um yeah it's just this entity that says okay like rather than just like run a very naive algorithm for like getting these transactions into the book which then goes on chain you can do like far more sophisticated things and if you're familiar with any of this Mev stuff this is like one example um and yeah it's like I really do think kind of this guy is the limit in terms of like the Ingenuity people are bringing to to doing this task and the takeaway here is that you know Builders specialize in refining block space so a hopeful analogy that I've come across is like thinking of you know we have like uh actually I think this yeah so Alpha and algae here is like and Alex lead to like mining some some resource like say copper ore you have copper ore you can like dig it out of the ground you just have this like thing you have to like get the Copper from The Rock and this whole process of extraction to get to say like refined copper this copper bar in the middle here and then that can be further refined and to uh you know say copper coins or pick your thing so this is just like a generic notion of like taking some raw asset some raw commodity and refining it through like a series of of phases and each phase it's sort of like is more valuable in the face before it's like for example if I just like walked up to you and gave you like a hunk of copper ore you'd be like okay cool but I don't really care whereas like if I walked up and you know hit a bunch of coins you might care a lot more so this is what I mean when I say that uh you know there's this sort of raw asset or this raw commodity is probably the right term uh block space and again what we're seeing is is this this notion of a builder in the protocol or at least you know around the protocol that takes block space and sort of provides these like value-added services or almost Goods you can think of them as to go from a less viable thing to like a more valuable thing and that's the job of the Builder so now the question is well okay yeah what are some examples of things they can do and there's actually a lot so uh here's like a list of things there's a long list of things again this is where I think all the Ingenuity and creativity will come in that I think is really exciting around this space and I'll just run through some of these examples here right so like one of them is like sponsored transactions this is something people have wanted for like a very very long time and the idea is that basically you have this Builder and they pay for the gas so kind of concretely what that looks like is you know I have my transaction rather than making like a direct ethereum transaction I make some intent some message something the Builder knows how to like interpret in their own way they still have the same effect on chain but then they can be responsible for paying the gas and like end protocol another thing they could do instant confirmations so this is again something if you've like you know going back to our metamask example you might have seen where you send a transaction and or you have to sit and wait and it's like is it on chain yeah like what's going on like sometimes especially when there's like volatility and like the gas market and things like it's it can be very unclear what's happening you can like end up waiting a very long time and that's not fun but uh there's this almost service or abstraction a builder can provide which is just to say okay um you want this Con this transaction to be in in this block and I can basically as a builder say I promise you this will happen trust me and there's a whole design space around you know changing what trust me means but basically I can I can give you those promises a builder to get into that block and in that sense then I can turn around immediately say yes you're in the block uh related thing cancellations retries so the notion here is just saying like um yeah let's say I make a transaction and I'm like oh wait like the market just moved against my unit swap trade I'd rather just take it back if you're just sort of sending raw ethereum transactions today that's really hard to do because you like gossip them through this Global event pool and you'd have to like Yeah It's Tricky one way people kind of game this today is they will send a duplicate transaction or one that will override the previous one that has different effects but again that's like inefficient and you can imagine there's like this layer around the protocol that handles this for you and like in the same bucket there's like retries so like let's say I want to like I don't know do a token transfer and for some reason it fails just because of like conditions on chain so then I want to keep doing this you know until it goes through and rather than me have to sit and do this like a builder could do it for me next one gas Futures so here the way to think about it is that a rather than someone you sort of like block space right now as a builder I could sell you block space in the future it's a pretty cool idea and one you know one reason you might want to do this is because you know as part of this like contract that we enter into you're also selling me at a certain price so even if like the the gas marker moves against me I still locked in a price that's nice to me and Builders could do this I mean there's other ways to do this on chain with like looking at the base fee and stuff but yeah so just to give you a flavor again of what Builders could do uh sell Futures around block space uh this was an idea I heard from hasu you could basically also sell block space in the past and uh I won't go into too much detail here because basically what this means is like selling reworks which is uh probably something we shouldn't dig into too much uh there's like some I'd say moral hazards around it but the Symmetry between selling block space and the future in the past is like I think too nice to pass up another one is just like this whole bucket of account abstraction you might have heard of vip4337 and basically again it's just this way to like add more flexibility around the core protocol so that uh people have more again flexibility and and how they used it how they use it um a simple thing would just be like a different signature scheme than ecdsa and then this last bucket Mev I'm sure you guys have heard about this a ton this week and you know if you think about extraction as like the service a builder could add or well there's a couple different things but if you think of extraction then there's like this whole bucket of you know we can kind of just shove Mev into this whole notion of like a builder uh providing the service to to users whether it's Searchers or someone else and so then I have a few examples within you know sort of that Subspace uh maybe extraction which is what you usually think of when like a search is joining some ARB it may be smoothing the notion here is basically you know media is very spiky and so instead what we could imagine is somehow capturing it within the protocol and smoothing it out over time then it's paid out uh to builders to proposers however that looks um that'd be pretty cool and you know you could imagine off-chain constructions that do this that Builders offer the last one is like maybe protection or rebates and the notion here is like um Builders kind of would have this direct pipeline to the protocol and they could say hey I promise to keep your transaction private so it can be for example front run so there's a lot they can do is is the point and again there's there's a bunch more uh there's okay and then like even looking at a little a little further forward I'll just touch on this so these are like you know this this list here I think is like pretty concrete things you could do today and I do think this is painting a picture of this Builder as this like generalization that we'll continue to see in the protocol um for example you could have rather than transaction level 1559 you could do the Block Level so today when you like send a transaction you basically have to like have some amount of heat that you burn but if you think about it the economics are the same if the builder of the buck burns the same amount of beef across all transactions at the end and the reason you want this is because again there's like better ux for users they don't necessarily need to have Youth and um yeah again this is the generalization of like the protocol providing resources and then the user consuming them and then a similar thing is Roll-Ups consuming Bobs and 4844 so you might not know about the CIP but basically the idea is we're going to add a bunch of like data space to the protocol for users like Roll-Ups and again it's like we don't want roll up stuff to necessarily like sit and like manage Bobs and figure out when they get on chain and things like this um and so you can imagine there's a builder some sort of abstraction like a builder that manages getting blobs from blow ups or from sequencers of these Roll-Ups onto the chain uh here's another talk I'll just quickly point out where uh the one I mentioned previously where I went into a lot more of these use cases in depth you could welcome to check it out so this sounds cool you know I am claiming there's this Builder thing and it gives you all this functionality and that's great uh but what's the catch I mean there's probably a catch and the catch is that the specialization actually implies validator centralization and this is bad because it kind of harms like the whole health of ethereum like the reason we care about ethereum is because of this decentralization of of the consensus right of the protocol and uh Builder specialization harms this directly so let's look at why and why is that you know this this process has economies of scale so right now the like Builder protocol or sorry the Builder role in the protocol is tied to the valiator role and because of that you could have builders that do their things you'll have entities that sort of have validators they partner with to do their thing as Builders and what happens then is like better Builders have better profits and this makes us flywheel where they have better profits they can get better building they can scale up their validation operation and you just get this like again flywheel that goes until suddenly like you have these like really huge actors in The protocol so again if you're like the best builder that's great for you uh but if this you know goes unchecked then it's actually really bad for the protocol in the long run because now you have this like very fragilizing thing of this like one huge actor that's like easier to say attack and all sorts of things so just like a note you know Mev kind of directly accelerates this problem uh which is probably why we've been hearing so much about it this week so okay what can we do um there's a couple things one of them proposer Builder separation uh Barnaby gave a talk about this yesterday I believe and I mean the idea that I think is pretty straightforward just from the name you I mentioned that this Builder role and sort of the proposer about air roll the thing that actually is like minting the block on chain this thing these are tied together so instead we can just separate them and uh this sounds great the question though is like how exactly you do it and once you start looking into this in some depth there's a bunch of like subtleties and like open questions that have a lot of nuance that like still need to be worked through so for example um I think like the leading designer now is from vitalik where basically we have two slots alternating proposer and Builder and the point here is that you want to have the proposal to do a thing in a different context have the Builder do their thing and it sort of firewalls you know these two these two entities from each other and that's great but then you have to make sure that it's in significant capacity incentive compatible like you don't want a proposer to like release their block too late after they've accepted a builder's bid and then because of that the Builder doesn't have time to like uh you know reveal their block and it quickly gets to a lot of uh tricky situations like that another one is like actually deciding the mechanism the mechanism of sort of selling the block space that a validator may wish to do uh the default thing we do is like just enshrine an auction um but then the question is like okay is that is that what we want do we want this thing where it's like I'm going to auction Off My Block space to the highest bidder there's like a bunch of different ways to think about this I will call out again Barnabas very recent post on each research on Boeing PBS and he talks about kind of uh maybe pulling the auction bit out and just having sort of this notion of like a commitment Market where the commitment then is like quite General another point then is like yeah just the Integrity of this thing because kind of like I alluded to there's there's many actors now and they all have different incentives and you need to like line them in the right way uh if you don't do this properly then well yeah if you don't do this properly then you can imagine like people just not using it so one way you could fix that is you have a testers go and also test the chain you know if there's this two slot process alternating you can have the testers to test what they see and in that way they strengthen again the mechanism but then it's like okay maybe they could be bribed like who knows so point being there's a lot of open research questions there oh no my emoji didn't show up anyway um it turns out that that's not the only problem so even if we had a great PBS solution I think like I think the way to think about it is like you firewall off all this Mev all this builder stuff from the batter set so they don't have these pressures to centralize that's great but then you kind of Kick the cane down the road and there's another problem where again you I mean yeah you really just get the kid down the road uh to the builders because now the builders themselves could centralize so we don't want to get to a world where you know there's like a few actors uh let's say like very sophisticated actors from tradfy who are here and uh you know sort of gatekeeping access to the protocol like again it'll be a way for them to uh again violate ethereum's values and that would be very bad so I think it's even less clear how to handle this just because like the scope of the problem is so big if you thought there's like incentive issues with the previous sort of like proposal or Builder citing there's now like it's I would say even like less constrained so that's fun and okay let's let's think about this for a second like how do we how do we fix this um one option is just to say okay we will have like very centralized Builders but we just want to make sure they can compete and the idea is that if there's like very healthy competition then there won't be one internship player and that avoids the situation where there's like there's very direct gatekeeping where I have to go through like one or two entities to get on chain so to do that we want to keep the barriers to entry of building very low um and yeah maybe that's enough we'll find out but still you know I think if you look around the world you see there's like power laws everywhere and so I think we'll still be you know even if we do have a healthy ecosystem it could be the case that there's like not a great distribution so we can ask well what next well pretty much most of us here we can call ourselves crypto economists so we'll design a mechanism and what does that mean well we'll just read off this quote that I made up what does it mean to design a mechanism here well we want a peer-to-peer network with proper incentive alignment to ensure safety aliveness of the protocol and now what does the protocol do well it facilitates the refinement of block space and this way I was describing um so that's great but there's some like huge caveats the huge caveats are we want to make sure that I think there's many but like two ones to call out right are that the people who are using this thing like let's say users who want to like make some trade on uniswap we want to make sure that you know when I make a transaction and for example it has some mov then like I've actually generated value that wasn't there before and it seems you know I think we'd all kind of agree it makes sense that the generator of that value should capture most of the value so that's like a pretty big constraint on how something like this block space refinement decentralized protocol would look like another big one censorship resistance if you've been following any of them at Boost stuff which I'll touch on in just a second uh you see that this is like a very critical question because again when you have just a few sort of I mean yeah centralized pipelines in the protocol uh it becomes much easier first internship to censorship resistance to Fall by the wayside so I'm just going to keep going down I kind of want to just like sketch this path for you hopefully to jog some of your maybe like capture some of your interests or uh you know jagu creative juices but essentially what would the centralized Building look like um I mentioned this FPC conference vitalik you have a talk uh on this a bit so I'd also recommend that one so um but yeah so for today the you know the ways I've kind of been thinking about lately are you have a builder and you want them to basically well yeah so there's different contexts the first context would be in a single domain and I'll kind of make that clear in a second but essentially you have a builder just imagine a builder on one chain and rather than this Builder being like one server somewhere you can imagine it being split across many servers sort of implementation wise um but anyway so that's actually not what we really care about like we care about higher level properties like um we want this builder then to be able to again be like multiple maybe competing entities and so what that could look like is you have agents who are doing the building and they're now competing for like order flow for example so if this is like an Mev context you have people who are making trades and I'm now like working or perhaps competing with other Searchers let's say to to build the best block but we're doing in a way that again we sort of enforce this competition there I think the more you think about this there's like a trade-off between privacy and execution because you know one thing we could say is as a user again of my Dex trade for example uh you know nothing and then it's just like uh grabbing random batches of transactions and like putting them into a box instead you could like kind of be in the setting today where you see everything and then you have sort of full uh full information to even leverage against me and when people are front running they're upset about that this is this is exactly the tension they're getting towards um if you're familiar with Cal swap so like one idea here is like the the Builder on a single domain context is you have you know imagine doing your dap your your D5 app but inside some APC circuit um Cal swap has this thing for basically settling trades off chain before they land on Chain by just doing uh just the diffs or just like the remainder so this could be a cool research Direction another one there's this uh dap I guess maybe application sorry maybe protocol but either way it's called Rook used to be called uh keeper die I think and either way uh at a very high level how that works is that they have like a trusted set of Searchers who have access to a private pool and because they're trusted you know we trust them to then uh search and extracted maybe but do it in a way that for the value extracted most of it flows back to the users of Rook so what this looks like is you have trades where you're paid to make the trade um you can do something like this and the question then is like how can we tune this like trust Spectrum uh so that we minimize trust while giving us all the nice properties we want another cool thing now is like you know there's not just ethereum there are other blockchains and so now we can think about me being like across domain context and this one quickly gets pretty hairy because like when you think about it you kind of now like if we're going to do this decentralized building thing across chains then you now need to like I mean yeah it's not even really clear how you do it like you could imagine like uh some crypto economic layer whatever that looks like maybe like a network of State channels uh maybe it could look like um yeah I don't know again this is where it's an open question but there there's a lot of things you could do um and yeah so I think we'll see a lot of exciting research come out of this area uh in the future so yeah I think I've just tried to like lay on a lot of problems and maybe this seems like pretty hectic that's not good um but yeah like I do think this this these questions around like the Builder and like how the protocol is used moving forward or like some of the biggest that we face as a community so I do want to call them out and um yeah just just be aware that uh there's a lot for any issues here so hopefully you uh are motivated to work on fixing them and yeah like I'd like to like and done a good note like we did the merge you might have heard of that one and you know there's really this is like an existence proof that like progress is possible like uh I'll steal a quote from uh Danny Ryan according to Albert knee who said that ethereum's like an intellectual gravity well and yeah I mean I think that's the case like ethereum is like a really outstanding community and I think that we're able to sort of uh adapt to whatever comes our way so I think I think uh good things are possible I'm running a little short on time so let me see I think I just had a few slides so yeah thank you okay my problem um right so just a few more slides and uh the first one is I just want to again call your attention to like yeah how can we actually start to to work on these issues um with this problem of validator centralization like yeah it's just supporting r d towards PBS I think there is some like nice PBS solution that we could get to and we may realize that there isn't one and that's also great but uh the work the work needs to be done and we'll see what happens in the meantime we have this thing called map boost so there's like an off chain implementation of PBS uh started by flashbots and uh many others now they've recently made a call for like open stewardship of the project so that's a great way to get involved I've called out the GitHub repo format boost there's also some stuff around how this interface between the core ethereum software and this Builder network works and those specs are under this Builder specs repo uh some things that you know that Community will be looking at very soon is like address addressing sensitive resistance I'm also working on this notion of a really monitor there's this like very trusted actor in red boost right now called a relay and they can kind of do some bad things and the idea of the really monitor is to add some like automated monitoring uh to figure out when they're doing things we don't like and that then we'll feed back into med boost to hopefully uh make the situation a bit better than it is today if you're interested to help there's a repo there that I have and please I would love contributions and then yeah I mean you probably get the sense that this this like Builder centralization problem is maybe even poorly defined like I think that's the first place to start there is just like defining exactly what we mean because I think it's like a big umbrella for many things you could start pulling a bunch out of it maybe if we can like Define the problem we can start cutting into smaller pieces that are you know easier to make progress on um you know for example if we do some sort of like NPC or like some crazy State Channel thing then how far can we push the cryptography to like actually get the properties we want uh how could we like now in this like very complex system address uh or analyze all the incentives to figure out like okay this this mechanism actually work and I think so far flashbots has done a lot of the thinking here so I just wanted to call out them uh they have a form at collective.net and if you're interested in thinking about this reading about this research and things like that uh check that out and that's it yeah thanks um there might be just a few minutes for questions and uh yeah if you want to get involved just uh here's my Twitter and I can I'll answer any more questions you have direct you to the next step all that awesome we can ask one or two questions if there's any questions just raise your hand quickly make sure it's a short one we'll pass that mic over there to you in a second uh just over there hey um my name is Marat I'm part of block native we build a lot of blocks um flashbots has a great Searcher reputation system I mean we can talk about how great it is and whatnot but I'm wondering if there's a reputation system that we can come up with within the protocol for Block builders in the future as well right so I would push back immediately and ask how much we want actually in the protocol because like once it's there it's like very fixed um but yeah I mean again like a lot of these I think more like research or like even you know even even less formed ideas around distributed building need to take things like that into account like you're going to have some actors who are like helping the Builder do their job or you can even think like the Searchers are the builders in this context and yeah like that's one way is like ideally we could have some cryptographic mechanism where like everyone does like perfect searching and valid like users get all the value that is allotted to them and that's great I don't think the cryptography is there uh and then perhaps it will be one day but not today so then yeah we'll then rely on like trust reputation things like this in the short term um so yeah I mean it's definitely a very interesting place to uh to look at amazing that's the time all the time you have for questions and uh we're ready for our next talk so please give Alex a big round of applause [Applause] 