all right hello everyone um welcome to our last workshop of the day for the first day workshop at nft hack 2022. um here we have julian from julian from unlock uh with his workshop deploy your first nft membership contract feel free to ask any questions in the zoom chat and julian will be more than welcome to answer them and with that being said i'll pass the mic off to julian thank you anna thank you very much and thanks everyone for staying up so late uh depending on what part of the world you're in i'm really excited to tell you about unlock today uh congrats on joining the hackathon i think you could have an amazing time uh we've sponsored a few ones and already and honestly these are they're very fun so i'm pretty excited to see what you all uh build um unlock is a protocol for memberships as you can see on the home page of our website on large deck unlocked protocol.com uh this is basically a protocol that allows any creator any brand any community to deploy a membership contract and we'll do that in a couple of seconds where creators set the price the number of members they want to have the duration of the membership and then we provide simple apis that allow them to use that into existing application or even better create some applications that are basically token gated so that only the members people that have the entity in their wallets are able to access uh some features so that's obviously a very high level quick intro you're more than welcome to join our website join our discord on the website so click on the community uh button here that will open discord check out our docs uh and some integration that already exists that might actually be fun to look at and useful but uh let's uh let's go ahead and and get started here so i'm going to click on the app uh button here and i end up on the unlock dashboard um the unlike dashboard is where uh you as a creator not so much as a developer but we'll see we'll see that later can uh deploy your membership contract and then do several things like update it obviously or even grant memberships to people that you feel are worthy of the membership so let's let's go ahead and do that um you will see that we support actually multiple networks uh from this year maintenance where i did not need to deploy anything today given the gas prices to obviously ring to be as a desk network through optimism binance chain xdi polygon and even localhost if you run unlock globally you don't need to run unlock locally most of the time but this is also possible if you wanted to do this i would definitely recommend using wikipedi and there's several faucets on the internet where you can find uh wikipedia uh to get started and deploy your locks um i already see your question so maybe um [Music] oh that's anna yes okay cool i'm gonna keep an eye on this you know what on the side here so i'm not distracted um so when you're connected uh basically the thing that you can do first is deploy a lock so i'm gonna click on that button uh the first step is to pick a name so i'm gonna put that nfc hack um not just an ftf actually that's good enough the duration is basically the uh lifespan of the nft um each membership is an uncountable token that people have in their work they have an untrained expiration date uh which means that after they expire they're not considered vetted anymore by the protocol and people will not be able to access the benefits that are just for members uh here let's pick a kind of short one one day on our ui obviously we show days but in practice you can set anything between uh one second uh to you know a couple centuries or even millennials millennia i think uh if you if you want to go that far the quantity is the amount of members that you want to have on that membership can be again from zero and maybe we'll explain why this is useful later to an unlimited number of members so if you say you're creating it um like we'll do a little app then you will say as many people can be members you pretty pick unlimited which i'm going to do here but if you want to do for example a membership for a conference or ticket uh to a concert um then you would obviously pick the amount of people that you can host at the venue you can then set the price uh of these memberships here i'm going to pick it's actually ranking east as the currency but in practice we support any erc20 on any of the chains that we support so you could price this and die in usdc you know bnb if you wanted to do that or uni or any uh any erc20 currency that you might be interested in setting up the dark section uh provide a little section on how to do this and i'm going to price it you know at 0.001 east uh i'll maintain it so once i'm ready i'm just going to click the submit button here and uh pretty remote flow that you're pretty familiar with or maybe familiar with already metamask which is a crypto wallet will pop up say hey you want to spend or actually send a transaction uh to create lock that's which we're going to do here and there's a little bit of gas involved in that flow um i'm just going to confirm this um and we'll wait for this to be deployed a couple seconds immediately you'll see that we update the uh layout of the page um and we show the extended version of what the lock shows here let's wait a couple more seconds to make sure that this gets uh deployed uh i'm sure you already found me out that ui yep that was deployed already so uh you have the address of the lock um and the last button actually is the explorer button so we'll actually click here to go see that you see this is the address of the smart contract that was deployed that contract is verified so you can obviously inspect the whole code which you're interested in you can definitely look at but also use the uh the ui on etherscan to kind of uh read stuff and trigger things so for example we can look at who's the beneficiary that's the person who's gonna get the money uh when people pay for the membership and and this is the address that they used to deploy and by default this is the first membership we can look at the duration so as i said i picked a day uh that is uh 86 400 seconds uh precisely um we can set up things like a free trial length uh for now there's none uh we can uh look at um transfer fees uh basically from others uh i mean it's actually custom per um per transfer uh obviously you could read that information again all of these things are uh documented i don't want you want to go through them all here uh but that's obviously uh all in the docs that you can find on our website here etc etc similarly you can update the contract and you can do that as the person who deployed it your what you call the lock manager and you can actually have all other lock managers uh that would be able to manage the lock along with you uh you can set that up uh you can also do a bunch of other things that are similarly documented in on docs um so let's go back to the dashboard uh and actually see uh what's in here so here you're on the integration pane uh which shows you uh a couple things so easily integrate this into applications like wordpress like discord like cloudflare webflow discourse or firebase we actually have a bunch of others uh each of these if you click on the buttons uh goes to docs or to relevant information about this and we also have a couple tutorials that you're more than welcome to look at on how to uh create a natural experience on the website so for example only members or members will not see ads in the website for example or how to get donation through your membership contract anything like this and we also have docs on how to do custom integrations as well let's do actually a quick demo here of how things work let me um actually before that i'm going to show you the buttons uh credit card so we support uh credit card payments on the locks and it's something that you would be able to uh try on your own application uh click that button and follow the instruction connect stripe first and then allow key printing again um the docs are pretty explicit about this we should definitely read them if you're interested in this we have a small demo uh which presents in the form of a newspaper site that has a payroll and basically saying hey you can't read that article unless you're a member i'm still going to get it basically and so if i click on join us you'll see that we load this little uh pop-up here it's a bit bigger than it is in reality because i'm making it big so that people can see uh remotely but i'm gonna quickly unlock that so i'm gonna click that button connect my crypto wallet uh stick um mms i'm already connected to minimalistic and pop-up and i'm gonna just play with my wallet here so if you click this button this time it must pops up saying hey do you want to pay zero points you want east plus a little bit of gas um and then i'm gonna just say confirm here go ahead and then boom you see that i can close this and more importantly the whole article now is available to do that so that's kind of a quick demo here that i've done on the member site and actually let's go inspect the member ui you will see that i can now list all of the members and i should be one of these now uh interesting it looks like oh you know we do this thing called optimistic unlocking so i'm not sure the transaction actually has gone through no it hasn't um if you look here on uh minimize if it loads hopefully it has loaded up if the purchase has gone through so now let's refresh this one yes 30 seconds ago and then if i come back here as well this time it's going to be visible as one of the members we use the the graph um in this also documented you can use the subgraphs as well if you want to load uh the list of people that have a membership so you can see here that i have one it's the nftac lock i have the token number one the first one um it is uh so somebody's asking crypto current uh it is obviously uh basically through the ui but based on the blockchain so if you don't have the nfc the ui will not render the content um so i don't know if that directs the answer that that's a regular website basically but it only shows the content if the current visitor has uh unlocked content um sorry we have a question in the chat um is the content access filtered in the ui or is it through the blockchain yeah i just i'm sorry i just went through that one uh basically this is it's not the ui i mean it's in the front-end application uh but it's actually we're gonna do a demo where we lock on the back-end so you'll see that it's possible but obviously the information about whether the content should be visible or hidden is coming from the chain so it's open dating uh technically speaking and you see that the expiration date for that membership that i have is roughly a day because i just bought it um so actually let's go uh let's go get ahead and and uh of course uh and uh and write a quick application so actually i did this earlier today i created a very basic application and uh oops i'm gonna start the application first uh so it's an express javascript application and let's go look at the code together here or is it i don't have it here okay let's actually open a new window here um and so we'll see that it's a pretty basic application what oh it's the uh modules that open so it's a pretty basic application uh using express actually using next and express combined together we have the server here that allows people to let's actually go back to the site to allow people to list the price of tokens and obviously i'm not using real numbers i'm using a fake api oh actually i should uh you know let me check this get started i'm going to check out to the branch that i should be on get checked out oh i just checked everything that was uh working before the demo and obviously obviously forgot to reset it so anyway um so let's go back here uh yarn run dev uh and so let's go back here this is a basic application let's go back to the page basic application that lets you again assume this is a kind of an appreciation that let's you see the price of tokens and i'm not using the read api so just uh the numbers are not right but uh basically the price of the usdc coin is 5.91 the price of the unlocked out again is 241 the price of the uh buyers coin is 940. uh and so you get that api right and so let's assume we have this application we have this api and we would want to token it you know say you know what this is actually not a a free api for anyone to use this is one where we want to uh allow people to uh pay uh to to get them to access some premium features and i see there's a question by xerox prof can you unlock with other programming language uh like c sharp yeah obviously uh unlock is not language specific we provide i mean it's a smart contract deployed on a blockchain uh ethereum chain obviously and so you can query it from any language using rpc goals so c sharp would actually work or you know go rust anything that you can use to query uh the um the state of the blockchain will work here so let's go back to the demo basically so i want to create uh now a thing where i want people to have basically only the people that have the membership to the lock that i deployed i'm going to go back to the lock that i deployed here can access the content so i'm going to copy that basically the way this is going to work so as you can see the application is pretty basic it has a server uh it has two apis one that lists all the token another one that actually uh yells the price for a given token and then the rest is basically a very simple next javascript next js application where we run the page loads we load all of the tokens and then when a token is selected we uh get the price of that token so again very basic so what we're going to do here is add first a couple libraries so we're first going to add the unlock uh sorry the unlock library for express that allows you to use unlock inside of any express applications i mean yarn ad that you might have seen in the past and i'm also going to use uh yarn add the cookie bars because we're going to use the cookie just to make sure that somebody once they're a member are identified as a member uh the next step is to change uh how our front-end application works so that whenever a token is selected we're going to try to create the api but the api is going to yell uh let's say not quite an error but at least an indication that the user is not logged in uh and in that scenario needs to be logged in so we'll basically uh just uh do this so we create the api and when we get a redirect we'll actually perform that redirect otherwise we'll uh we'll perform uh we'll set the the token value to be what we get from the api so again what if the user is logged in and has the membership then or call we'll just set the uh the api to be uh returning the right button we'll set the value based on what the api return otherwise we will redirect the user so that they can can log in another thing that we're going to have to do obviously is add the token gating to the api so for this i'm going to just go to the server here and do a couple things uh so first i'm going to load the uh the unlock um the unlock node.js module here and it actually calls the function configure unlock which will do i'm also going to load the cookie parser here which i think is going to be useful to parse the cookies obviously um the next uh thing is obviously to configure the server express application to use the cookie parser if anyone has used express in the best this is pretty very familiar and then now we're going to do we're going to enter kind of some of the unlock specific things so uh these uh that function above uh configure unlock basically yields uh a middleware which we're going to use later called members only and that's what we're going to use to limit access to our api and we're just going to call the configure unlock function here with a bunch of things the first one is a yield uh paywall config object uh which i know what i'm gonna copy paste it's gonna be easier so i'm not gonna spend too much time uh doing this and then i can comment on that so basically that function is what yields the configuration uh to be used for the lock uh here i'm going to obviously take uh the address of the smart contract that it deployed i'm going to put it here and this is on network number four which is ring to be here if i deployed on any other network it would need to update this so that's the one of the objects uh the two other um settings uh which are important right now are these two uh functions here uh get user ethereum address and that's basically a way to get the uh address of the ethereum user from uh from the request so here we're gonna read it from the cookies um and the other one is to update basically the ethereum address and in the scenario we're going to write it in liberty so when the user is logged in we're going to read from the cookie to get their address and when the user is not plugged in but it's trying to log in we're just just going to write their address um to the cookie so pretty simple obviously for an application you can also store that in a database uh somewhere etc and the last part of the unlock configuration is to pass sorry is to pass the uh the server object here so we're just gonna pass here the server object uh and we're actually uh getting close to uh being done here the the next step obviously is to uh token gate obviously our api so we say hey this one uh this is not gonna be uh public for for everyone we're going to call that members only middleware here and that means basically that now only the members can uh call that or can get the result from this there's one more little thing that we need to provide here is basically a behavior when the user is um is not logged in or is not authenticated and so we'll just use the normal kind of express js syntax here and then what we're going to do here so unlock the middleware uh passes an arrow that the user needs to be redacted to and that's uh that's kind of what we're going to use here uh for the sake of this so i'm just going to paste again right here [Music] as well um so basically that says if somebody is not a member we get this uh the the earl here and what we're gonna do is overwrite the redirect url um so that we can open it in our front application and that's pretty much it so the next step is to probably fix some typos yes i definitely have one type of length of t5 i have an extra to very quickly see what's going on here uh oh that's clear here i'm passing that jason but i need to close these things and i think that should be fine now uh cool so the server has started and now we can see if we go to the application here that when i refresh obviously by default um nothing is prompted but if i pick say this coin this time well the application will redirect me to say hey no you cannot really access that uh access this this content unless you have the membership so i'm gonna you know go ahead and purchase it so i actually did purchase the video so i'm just gonna collect my wallet and you'll see that the the application will recognize that already have it so you already have a membership for this lock i can just click here to go back and this time now uh i can keep the coins and obviously now it shows the prices again so i i don't i mean i i don't know if there is let me look at the question so is minimize package required or is it included in the unlocked package um we actually don't have a metamask package umass is included in the web browser here so we don't uh we don't consider this uh unlock works with any uh wallet so i did a demo here by using metamask but if you're using any other wallet like rainbow or any of these you can definitely use the wallet connect ui to connect to these things i can get all the prices so i hope this uh makes sense so you don't import no we don't import metamask in the application at all um and i don't think that is possible like metamask is uh think of metamask as a as a wallet as a third-party application that just allows the users to uh uh sign transactions uh you don't want to do that uh there's a question by slavik uh should we alright yeah yeah yeah very interesting very interesting project you know and i have a question we just like start discussing like how to use your service for our project uh on a hackathon and the question is can we limit access to the holders of our token oh it has to build your nft lock nft only yeah for now it's only the locks so you need to deploy your lock uh to do that but depending on what your token is uh one thing that is cool if it's in your c20 is that you press the memberships in your token so say you create the slavic token and you say a membership is five static tokens people will need to spend spy flat static tokens to uh to access the contacts and uh so maybe like our our project would be like kind of we will let people mint nft on our application so maybe we can like kind of mean access talking together with like our kind of art talking right so you can actually so that's something that i didn't show but obviously so actually let's go back to the dashboard here you can actually customize the art so here i can uh change how each entity is gonna that's the default image but i'm just gonna pick my face here i'm gonna just save that and now each of these nfts are gonna look uh like uh my face so basically if you go about buy this one now uh you will get it uh in your wallet and it's gonna be that regard so the entities are obviously completely custom the visual aspect of dnft is completely customizable to what you need no okay it's it's it makes things worse because it's like kind of too cross-connected now but i got it like for now it's like just basically like lock and ft that separate like almost like uh password for access to this yeah but those nfcs are i mean they're they're pretty much like any other nfts like you think about this they're on the sc 721 uh you fully control it it's the same as if you deployed your own contract basically the reason why we have yeah yeah there is no i mean i can here on the explorer but like this is an erc71 uh contract uh we actually use some libraries that are uh coming from open zipline so it's pretty much standard and and and it's really yours like i mean this one is mine because i deployed it but if you deploy one unknown cannot do anything with it it's really the same so basically i let's say i am like uh making crypto punks so i can make the crypto bonds and like people buying crypto punk that have access to the yeah my wordpress blog uh like my articles like you just saw it before right yes exactly okay okay oh it's fun oh that makes sense thank you thank you good stuff any uh any other question i see this question in the in the chat here uh someone's asking so you don't import my eyes no we don't uh how can we check if the user has minimized product if we don't import nms um so basically the way this works is actually somebody's insuring this yes so you can use a window.ethereum which is uh with no import exactly so it's actually injected i i don't know if i'm let me do the demo here again uh by moving it because we actually didn't build that ui uh for the test here so i'm just gonna appear the data here and then refresh obviously so now i'm not logged in anymore uh what we do here is in that regard that's actually what we do we check for the uh window. ethereum and obviously now something is going on uh i guess it's the demo effect full force uh but uh what's going on the uh clearly the the cookie itself is um though sorry we read from we know that if uh exactly what uh as uh zerex profits described it i'm gonna stop trying to do the demo something is going on here uh yes exactly we take the the heavy lifting of checking bullets etc uh we also provide a bunch of interesting things so as i said earlier uh the smart contracts here um have a lot of interesting characteristics that are specific to memberships so for example most nfts don't actually have a a way to have a free trial basically most of them actually don't even have a duration so once somebody has the nft they're a member forever one of the benefits of using unlock is the idea that you can create recurring revenues here um are there any protocols to prevent anyone from minting screenshot of an nft no and that's that's not really how uh nfts work uh i think there's definitely a uh questions uh around what are our initiatives that would need to be uh answered for this before but think of nft as just a record obviously uh nobody can prevent anyone from taking screenshots of pictures uh what what people own is uh the record basically so it's their name is on the list of people that have a specific entity and so that i hope that answers the question um there's a question by zerex prof go ahead prof hello hi i'm so like i plan on using unlock or not for javascript but um is um is there like a particular function from the smart contract i called like um get the token like can i know the name it's a bit confusing yeah so there's many many things you can call so for example you can uh you can call so if you know for example uh the token that you wanna check you can check token id number one and you will get uh the owner so i'm the owner of tokenity number one but token number two doesn't have any universe you would see that well well i'm sorry sorry sorry i'm like i'm not talking about like um like i mean to go to like get the nfc because um i don't plan on like using javascript i can't like import the um the unlock um packages so my plan is to get like my um front end to call the smart contract like call the function from like device yeah is there like can i get a function i'm not sure which function like the function i showed you is one that allows you to get the owner of an nft what what what are you looking for yeah um like um like is there like like a like a get like by nfg or like i don't know i see yes so it's called so we have a function called purchase uh which is uh which is uh oh it's actually obviously on the right contract side of things because it's it's changing the state uh purchase here and you have here uh olivia okay yeah that function yeah so the amount that the user is paying oh go ahead um sorry okay uh okay the amounts it's not hardcoded no it's not exactly because uh you could actually pay more so you can decide for example to pay a tip so maybe the membership is ten dollar but i want to pay 12 uh you would actually pass this you need to post at least the uh the price uh in the the purchase uh here um you can also purchase for somebody else so you would pass the recipient address so the person who's going to get the nft so for example if i want to purchase an actually for you then i'm going to be sending transactions but i will put your address here so that you get it not me most of the time i will purchase for myself uh riffer is an address that you want to pass for if you want people to get governance tokens uh as well and data is an adversary uh set of bytes that you can pass uh by default you pre-pass an mtr here uh to allow anyone to get um to um sorry to allow you to alter the behavior of the lock uh if you've used the hooks so um yeah that's that's pretty much it so i'm like unlike uh all of these like are they like composers like something can we like just like pass um a function like um an argument like in a function yes exactly exactly it's basically function so i would definitely point you to the docs here i'm gonna post them here on the on the on this on the on the chat you can see all the details here and so the purchase function is one that is detailed here you have a lot of information on how to book it um thank you and thanks of course is there a function to make it if someone is a member that returns a brilliant yes there is uh so there's actually uh it's called uh it is called uh there's possible but i would i would use the one that's called uh balance off which is this one where basically if you pass an address uh it will return zero if that address uh has a membership or sorry one if they have a membership and uh if i use another address let's see this one the block doesn't have a mission to itself so i will regen zero in that scenario is actually um very simple here so uh is there a function values if someone is a member that returns a brilliant so it's not quite a billion it's zero if they don't have a membership and one if they do have a valid membership um and so yes that you can call that from your own contract uh to verify that somebody is a member uh for what you're describing you actually do have if i remember correctly a tutorial which is uh which is using unlock in other contracts basically here uh we have an interface here and uh you can create um i mean that's the three using the balance of function that i was just pointing you to so basically you create a contract that has a paid only feature uh you can also create a modifier in solidity i don't know if you if you know of this uh but basically the logic is pretty simple is you create the contract that has that points to the lock address obviously where you would set things and then on that specific feature you would require that the sender has a membership because the balance source needs to be larger than zero so again pretty basic dock here but that should provide you the right information for you on the right track i hope this helped the materials awesome any last minute questions cool um so we are at time now um thank you so much julianne that was a really really awesome workshop um i think everyone really learned a lot and some of you had some really awesome questions there um so i just want to thank you julian for taking the time to present this workshop on behalf of unlock at nft hack 20-22 um and for the rest of you for tuning into this workshop um this is our last workshop of the evening um we'll have some more workshops tomorrow and also our kickoff event is tomorrow uh with a really awesome keynote speaker um so definitely tune in to ethglobal.tv and we will see you all tomorrow have a great rest of your day everyone 