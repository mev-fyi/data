okay we're good hello and welcome everybody to the rv intro workshop titled rve 101 for developers joining us today is david trung a developer at ave who will be taking us through the session one quick reminder to everybody to stake their spot for eat online if you're having any issues don't hesitate to reach out to me or anyone else on the youth global team um and yeah with that i'll pass it on over to david who can introduce himself and get the session started awesome thank you emily hi everyone as uh as emily mentioned i'm david i'm a software engineer or developer at rva so uh today we'll go over a basic intro about are they mainly for devs uh i like to generally keep things interactive um so if you want you can post your questions probably in the chat and i'll try and uh read through them as we go go along um i'll also have a um uh q a time towards the end anyway um but yeah all right so let's get started uh so av is essentially a for those that don't know it's a money market uh lending protocol so what that means is on one side uh you have depositors and depositors they they deposit some sort of asset crypto assets into the protocol and then immediately they earn interest and interest is earned based on various parameters like utilization rate the type of asset how much in demand it is and things like that and then on the other side we have borrowers and so the borrowers they can instantly borrow a certain amount of funds uh either at a stable variable interest rate and they receive those uh those loans or those borrowed funds immediately when they request them in and if they satisfy certain parameters as well like a collateralization ratio and things like that so that's the basics of a protocol both depositors and borrowers they interact with the smart contracts in the center and uh so what i've mentioned so far is is what we classified as the main rv uh market um and that's the one with quite a lot of funds uh locked into the protocol which i'll go through a bit later as well uh we also have other markets we call it the multi-market strategy so that's we have a uni swap market so the the uni swap market is similar to the main market but instead of just using or using standard crypto assets as collateral you can use your union lp tokens as collateral and we're also planning to have other markets later on for other types of tokenized positions uh which i'll mention a bit later on as well then of course we have flash loans and the flash lines uh i'll go through some uh detailed examples of that but that's a very special uh part of the protocol as well uh so as i mentioned the the main protocol features is you have earning depositing borrowing uh and then credit delegation is related to both of earning and borrowing and then also flash loans like i mentioned and i'd go through each part individually and as we go through them as i said pop your questions in the chat or wait until the end and besides that currently we have quite a lot of assets on in the protocol supported assets uh more than 20 assets and then of course we have the multi markets as well uh like uni swap so we have quite a few assets that you can both earn and borrow from so so if we go through the the earning dive deeper into the earning aspect of it so earning is essentially depositing right and if i was explaining it to a five-year-old and i'll go through uh different ways of explaining to different age groups so we get a good overview of uh what it exactly is uh it let we let you borrow um we'll let others borrow your money or when you're not using it so your your money or your deposits can be utilized uh much more and if i was explaining to a 15 year old i'd say that will allow you to deposit your money and you earn immediate interest on that amount and you can withdraw at any time so it's quite different from a traditional bank uh there's no sort of locked in time frame that you have to have it in by get interested cruise uh by the second uh and explain it in a more defy sense i'd say that we took we tokenized the deposit into what we call a tokens so they're one-to-one pegged to the underlying that you've deposited and the account holding those a tokens you accrue interest straight away per second based on various protocol parameters and in demand uh like things i mentioned previously so from a code perspective uh this this is uh what you do uh the a lot of the the code that you see for the next few features the let's say the basically all the top lines uh exactly the same and it's mainly just the last two lines that are different um yeah so i know i've posted a question about the slides so so um i'm screen sharing right now i'm pretty sure um so you should be able to see the screenshot right emily yep you can see yeah so and i've maybe it's something to do with your configuration uh but anyway so the the code that you should see on your screen on the screen share is uh the main important line at the bot is at the bottom uh so from a dev perspective it's quite easy to deposit funds you just call lending pool and you say and you say deposit your blank screen you should be seeing a earn deposit or yeah i see 20 tokens to receive hate tokens is that what you see uh we're seeing a clear dot bank developer initiate a payment um chaps validation interesting all right this one yeah earn deposit equal erc 20 tokens okay my bad ah damn okay um so sorry about that guys uh so that was the wrong screen um i'll just quickly go back to these so when i was explaining to the money market hopefully you understood it uh so on one side depositors outside where borrowers uh then we had uh the multi-market uh like having the main market and also uni swap uh and then also these protocol features which i'll go through and i explained the how you'd earn it uh how to explain earning to different age groups and then so here's the the code that i was trying to refer to is that the either the last line uh it says lendingpool.deposit that's the main line that that you should really care about yep so i'll go through the the tokens again soon but so let's say you have any type of erc20 token that's supported in the rv protocol you can deposit that and you deposit it using uh that function call at the bottom so let me pull.deposit you say uh you give it the address of that erc20 token that's supported on are they you say the amount and then you include a referral code as well and if if you guys end up uh pushing out some mainnet and turning your hack into like an actual project or company uh you reach out to us and give you a referral code as well and you can make some money off you know the borrowers and deposits that come through your your interface and once once you deposit those funds basically those funds get sent to our lending pool uh then our lending pool mints these tokens uh to you and those tokens are eight tokens so if you deposit 100 die you'll receive 100 a day in return and that represents the the deposit that you've made and those those tokens it's tokenized deposit and they're transferable as well uh so so that's that's a tokens and uh the interest accrues per second so as soon as you deposit it you get those a tokens you'll see that the balance of of those a tokens will increase immediately and then to explain that the referral code we have some dots on the referral code but basically let's say you create a website where people go to your website and using your website they end up depositing into are they so that's where you'd use a referral code so then at least you can get some sort of you know kickback essentially um from from sending users our way and we also have a referral code for the the borrowing calls as well which i'll go through in a second um now i mentioned that uh the the interest is earned per second as soon as you get those a tokens uh that accrues to the holder the current holder of the a token so that that could be yourself or you send those eight tokens to someone else and that someone else starts accruing that interest there's also a function where you can redirect that into stream so maybe you for whatever reason you don't want to earn an interest on your account you can redirect that interest to someone else uh so we've had some interesting hacks around that whether it's redirecting to a charity or an inheritance contract for your children or something like that um so that can create some better increase in the design in space uh quite a bit so the next uh feature as i mentioned is borrowing so if i was explaining that to a five-year-old so that you can borrow money uh whenever you need it uh like standard borrowing uh for a fifteen-year-old it's uh you're borrowing monday money and depending on how much you've deposited already in the system uh you can borrow up to a certain amount so it's a an over collateralized borrower that you're making and you can pay pay it back any time so unlike a bank uh you're you're you're able to there's no set time that you know you can't you can pay 100 you know after a day if you want to uh and then in the d5 context you're using your a tokens as collateral to borrow supported assets um either a stable or variable interest rate and and that's that's quite a powerful thing especially in these these days of yield farming uh because people like to yield farm and having a stable interest rate actually uh really helps i know a lot of these these d gen traders they use that quite a bit these days um so from a program uh dev perspective uh similar to the depositing uh most of the code is is pretty similar you essentially just get the the latest uh lending pool address uh then you you say what asset you want to borrow and then you say okay whether you want a variable rate or a stable rate so and then you call lendingpool.borrow you pass the address of the token that you want to borrow the amount the the interest rate method that you want variable rate or stable rate and then of course the referral code once again and then once you've done that the lending pool contract will uh essentially just give you the send you or do some sanity checks making sure that you know you're fully you're collateralized enough health factor things like that is is valid and then we'll send you those funds and you can do whatever you want with those funds and the interest will start the interest payable will start increasing uh so switching between uh variable interest rate and stable uh interest rate uh it's very easy as well from a dev perspective you just once again you get the lending pool and you call swap borrow rate mode for a certain asset uh so it's it's pretty simple and that that can be advantageous depending on what your use cases uh sometimes the the variable interest rate is generally uh pretty low and the stable interest rate is always a little bit higher um but then in times of great utilization like what happened with recently with all the yield farming sometimes the variable interest rate would go up to 50 60 70 percent uh which is just quite a very which was a lot right but it'll go there for maybe a few days um but if you had a stable rate your stable rate might have been locked in at three percent or four percent so in certain use cases that can be very very useful and then so i've talked about the depositing and then also the borrowing so that the positive borrowing that that can happen from the same person or the same account or contract where they deposit and then therefore they can borrow with credit delegation it's a new feature we announced recently as well where we separate those two aspects so if i was explaining it to a five-year-old i'd say that you let other people borrow money and to a 15-year-old i'd say that you can deposit uh your your assets to earn so you earn interest on the rv and you can also earn extra interest uh by managing your own loans to other people so you you delegate a credit line to other people and in a d5 sense you give others access to your credit line by depositing an rfa then we create a another smart contract which is a delegation vault and you let other like you you set how much another person can draw from that credit delegation vault and then how you enforce repayment is really up to you right the the from the perspective of the the rv protocol it's still a standard you know over collateralized um right so liquidators can liquidate it and things like that there's still interest rate being charged however uh since uh you're essentially allowing someone else to draw that draw that credit line um it's up to you to decide okay they need to repay on these terms or they need to i'm going to charge an extra interest of chain because i'm giving this facility uh so in a way it allows for uh undercurrent like under collateralized or no collateral loans for other people if you're willing to manage that so as an example of that uh diversify which is a decentralized exchange one of the first to make use of credit delegation and essentially what they did they did an on-chain legal agreement using open law and once that legal agreement you can see here once the legal agreement was signed then the credit delivery delegation vault was automatically deployed and then a a credit limit was set on that vault uh for diversify to automatically um uh draw a certain amount uh so in that in that sense diversify never needed to uh deposit say usd or any sort of collateral into ave um but at any time they were able to just borrow like withdraw um btc and that's quite useful because let's say they're they're a decentralized exchange sometimes they they want to provide their their users with more funds uh but not necessarily keep it in their wallets or keep on their exchange um so that opens some interesting possibilities for let's say margin trading or things like that and also it's another way for people who deposit a lot of funds on are they uh to make extra interest uh off of their deposited funds so the next big feature as i mentioned is flashlights and so for those that haven't uh heard it before or don't quite understand it it may take a while but try and bear with me i'll go through a few examples um so if i was explaining to it to a five-year-old i'd say it's free money you can have to pay back but you have to pay it back nearly immediately for a 15 year old it's anyone can borrow as much as they want as long as they pay it back within a certain time frame and we get a lot of um questions from you know wall street banker types uh in in the language of wall street it's an unsecured fixed term loan for about 15 seconds because that's the block time of ethereum uh with a very uh very low fixed interest rate so it's a standard 0.09 percent of the amount that is flash load uh that the bank in this case the rv protocol or ethereum the evm it can always collect that expiry um so so there's essentially no like near no risk um to the protocol in that sense uh and if i was explaining uh to a d5 person it's an it's an uncollateralized loan uh supplied by a lending pool uh where the amount that you borrow plus a small fee needs to be repaid by the end of the transaction and why you'd want to do that is because you can execute any arbitrary action once you have those funds and if the loan is not repaid by the end of the transaction and then everything just reverts like the loan was never given to you um so that's quite powerful because essentially you get free money you do whatever you want with it and as long as you pay it back by the end of the transaction everything's good if you don't pay it back it's still okay no one loses out maybe you lose gas fees or something um but you know there's it's it's a pretty cool interesting concept once you start to understand it here's an example sort of flow of what a flashlight could look like if we start in the top left essentially we have a borrower which may be most likely a smart contract that's programmed to call the flashlight function from the rv protocol let's say it says flash loan on a 10 million die so that a protocol will give 10 million a day to that smart contract and within within one transaction uh the borrower or the smart contract can do whatever it wants with those funds and it can uh just in this case it's just it decides to use that money to close down and make a cdp volt if you if you know what that is and then it liquidates that collateral under that cdp it uses that uh liquidated uh yeast to repurchase die off a decentralized exchange and then now now it can repay back the flash loan uh so basically what what it did is that it did three or four separate actions in one transaction uh without having without needing those those uh funds through pay back the debt um so so that's quite powerful and quite a new thing um so so derek asks ideol reverts so it all reverts back correct so it all reverts back uh if the loan is not repaid by the end of the transaction um yeah exactly so you can do whatever you want in that transaction the only thing i'll make these slides available uh i'll share with emily and i'm sure we'll post on the discord and whatever else um so you get them this is also recorded as well by the east global team so i'm sure they'll make that available too so who good questions finally um so so go back to derek's question it's interesting because you can technically buy nfts that uh do all this stuff um but but the the fact is that by the end of the transaction uh it will all get reverted if you can't repay it um so yeah you know you buy an ft and if you can sell it for a higher price that's an arbitrage then yeah you've made free money essentially and i'll go through an example of an arbitrage and that's one of the use cases of flashlights as well but the important part of this diagram uh that i want you guys to walk away with is that everything above the purple line is what's definitely seen on chain uh so that's where you'll spend your that's where it costs you gas and everything below the purple line can be reverted uh if you don't repay back the flashlight so yeah if if that last if this last bit here the flashlight debt isn't repaid and then everything below the purple line it's like nothing ever happened so from a from a dev perspective uh doing flashlights is a bit more involved because specifically you need to deploy your own contract with solidity or whatever else and your contract would have uh something like this a function which you call and your function would use our lending pool and and call the flashlight function and then say okay flash loan uh to this contract it doesn't have to be this contract you could flashlight into another contract if you want but generally it's easier just to flash loan it to the current contract flashlight a certain asset so it might be die flashlight a certain amount so that might be 10 million a day and then you can pass through data as well so the data part is more for uh advanced users uh oh actually you probably if you playing with flashlights you'd probably pass through data um it's it's encoded data that you need to pass different parameters throughout your contract um because once you call the flashlight function on lending pool uh our lending pool will do some sanity checks like that's there's enough liquidity uh the amount you requested is there to be used we support that asset etc etc uh once that's done and then our lending pool will call back to your contract and it will call execute operation so your your smart contract has to have this exact function with this function signature uh it will that's when our lending pool essentially passes back control to your contract so once you're at this stage once your contract's at this stage you can assume that it's received the the money that you've requested to flashlight so that could be 10 million day or whatever and then where it says the comments here your logic goes here that's when you can do whatever you want with it so whether it's doing an arbitrage transaction or closing down uh making down cdp votes that's where you do it and then at the end that's when you need to return the flash loan funds [Music] and so so for derek's question uh that that's really depends on on the use case right so the evm it's like state transitions are created uh and then when the reversion happens basically that that state just gets reverted like the entire thing that happens so if you don't repay that flash loan and you did some nft stuff buying selling et cetera and then the flashlight reverts that means it just undoes everything so it's like you never bought that nft to begin with um so that's that uh uh question from youtube thanks emily uh what's the point of an over collateralized borrow if i can fully collateralize it then i can just use that money now uh yeah that's that's that's a good question um so the point of an over this is a bit of this is related to what we're talking about before about borrowing it's just different different styles let's say if you already have that money uh maybe you don't want to spend it right and then uh you can leverage uh that so so sometimes you might have east but you believe price will go up so you don't necessarily want to spend it but maybe you need spending money so you might borrow die or usdc and then you can use that as spending or you just want to use that as collateral so then you can do other things right and as a developer generally there's a lot of different things you could do it's like really open to your imagination whatever you do um so that's one of the reasons why you do it um question two from youtube if i've just deposited and not using it as collateral will you make profit and withdrawing time uh yeah so exactly so when you've deposited you don't have to borrow anything once you deposit you start earning interest immediately there's no obligation to to borrow anything and that's what actually a lot of our users do so i think only about 20 of the funds are uh used as borrowers anytime and that's why we created a credit delegation to sort of increase that borrowing rate uh just because it's quite inefficient you just have a lot of money just sitting there not doing much uh when a lot of people could do something just a lot of interesting things with that money uh and question three from youtube how does other enforce that the loan is repaid by the end of transaction so that's really like this is the flashlights are really for developers um it's not really anything that i think or of course the the learning pool code enforces it uh and then you have to understand how solidity works and how the evm works to really understand how how it's enforced but the reverse mechanism it's not as complex as maybe it sounds you just have to imagine that there's some rules and those rules just can't be broken and that's why flashlights work so this is an example of what uh the flashlight uh what i mentioned uh before in that diagram of you know closing paying back a make a dial cdp vault you know selling taking that collateral selling on a decentralized exchange and doing some other stuff with it this is an example of what it looks like so you can see you're doing like many uh multiple transactions in in one go and that's uh partly the power of flashlights you can save quite a lot on gas costs um but then also it's just a lot easier from you to experience perspective and then another example of music flashlights this is an arbitrage it's a very small arbitrage they only flashlight in about 33 a day but you can see that they made three cents yeah but there's other examples of people flashlighting i think it was uh 15 million uh dollars to do some arbitrage on curve finance or one of those um dexas and then they they made fifteen thousand dollars uh so so that's that's the the arbitrage world highly competitive um but yeah there's probably something outside of sort of these these hackathon type projects but just so you know that the design space for flashlights is quite large for you to experiment with so the the next part uh i'll talk about is what we call the avenger fan uh so this is more to give you some inspiration of the types of projects that have been built already uh or that we we like to see in that west west that we support as well uh just so you know that there's many different ways you could use rv in in your project so d5 saver is one of the big ones they're really cool uh in that one of their features is that you can swap your lending positions between these different lending protocols like compound dydx or make a dial which is the dsr and this is powerful because from a user perspective sometimes the interest rate is better on rv sometimes it's not better than on rv um but when those times comes we want users to you know get the best position possible so defy saver do that very easily by using flash lines underneath where essentially one click and you can transfer your whole lending position to a different protocol um and and we love that because it's a great user experience and it's something that's that's needed and it keeps the the industry competitive another thing another other fan is for a combo so i mentioned that flashlights are quite difficult to use um and they're only for developers so full combo is one of the first um sort of gui interfaces where essentially it's like lego bricks where you can just connect these bricks together and you can say i want a flashlight in this amount and then once i have that swap it on uni swap and then take out a position here and da da da and you do that without any code um so that's that's really cool uh and and we've had a few like hackathon projects that that tried to build um gooeys like like photocombo um but this is like really cool consumer tooling as well and people have actually made uh profitable arbitrages uh using photocombo as well as a sign another one uh is your own finance uh ceo and finance for those that don't know is a yield aggregator and and uh what they do is they they aggregate uh sort of yield farming from many different lending protocols whether it's rv or compound or curve finance or whatever else and it's really cool because uh ave is only a small part of their ecosystem uh and you know when when their users deposit funds uh in certain u.n finance faults some of those funds actually ends up on are they earning interest right and they pass on that interest to their users and i think that's that's really cool in that it just helps users earn more interest and get better better user experiences better products out of the ecosystem and that's really powerful to do with like composability and bridging across many different protocols and then finally uh avigachi which is something uh sort of quite new and and quite different in that they're creating provably rare intersparring nfcs so if you think of tamagotchi or cryptokitties it's like you have an nft like that um but underlying that nft is a bunch of a tokens so the longer you have your avigachi and you're playing and going on quests and experience earning experience points and things like that you're also accruing interest in this advocacy so that nft has some inherent value which i think is really cool and really fascinating concept of just combining the d5 space with gaming and nft space um so your project doesn't have to necessarily be about financial tooling it can be something really cool and fun like average that's just you know general consumer gaming uh and then uh i've got a few more slides and then we can open it up to general questions um so coming soon uh just so you guys know um where we're planning to like as i mentioned have more markets so let's have a set market and have other markets uh similar to the uni slot market where essentially uh any any position that that can be that can be tokenized could potentially be used as collateral as long as there's a reliable price feed uh we announced that in v2 we'll have a private market for realty which is um tokenized real estate so that's something coming up as well which is quite exciting uh uh avenomics we announced a while ago and that's our path towards decentralization actually our first vote is probably passing later tonight i think and that's our vote governance vote to convert len to ave and also activate the staking and safety modules and and you can find out more information at the link um it's it's off thanks for voting by the way uh it was a great vote for everyone um so so that's interesting for for specifically this because uh that means that by the time you start hacking let's say after on on this weekend you should have access to the the rv token and other tokens brand new right because that's we're just starting to migrate uh so there's like there's migration contacts that you can play with hopefully everyone migrates rather quickly um but i mentioned on discord as well one special feature of the rv token is we have a permit uh function uh and that i'd love to see some applications around the permit function um that allows essentially people to make gas less transactions or to delegate or also like make a sign a transaction off chain and then give to someone else and someone else sends that transaction on train uh so that's that's quite fascinating uh die also has permit and a lot of new erc20 tokens have this permit function so maybe you could combine it to create something really cool um you have to have a look into that and then uh so so we do have docs on the token uh if you go to uh docs.rt.com developers uh i think in the top bar there's like an rv token section just click on there there's some information about the migration script but also the information and examples uh or actual code of the rv token that you can look at right now so for for v2 that should also be coming pretty soon i'm not sure if we'll be during this hackathon time but maybe if you're lucky um you might have some new cool cool things to play with uh but there's a there's a bunch of features uh the main goal around v2 is creating seamless finance um so there'll be a lot of interesting like you know debt tokenization um repaying with collateral native talent and native credit delegation you know some l2 integrations with a tokens margin trading a lot of extra trading uh features uh and also liquidity farming and and decentralized governance will play a much larger role um so there's some really cool stuff there but yeah you'll definitely hear about it uh once it's it's ready to be played around with um and that those stocks should be should be uh probably the next few weeks i'd imagine uh and then here's some resources uh so once again i'll share this this presentation on the discord um so you can have a look the the important one maybe the the one i'd recommend to go to is is dots.com um then some ideas and sort of our what we what we'd like to see we've been involved with quite a few hackathons um so yeah go there and have a look and there's links to everything else as well so that is oh um and we can open up some more questions emily if there are any more yeah great um if anybody um feels like i'm muting themselves and asking any questions they may have for david you're more than welcome to or if you have any comments on the presentation as a whole [Music] um yeah yeah how can front running affect users flash loans um so so front load running is is i guess uh not just an evm or general issue in the industry um how could it affect it let's say if you have an arbitrage opportunity that you're trying to take with flash loans the worst that would happen is that your arbitrage ends up not being profitable uh so therefore you can't pay back the flash loan so therefore it will just revert so you just lose out on gas fees now that happens quite a lot uh because it's quite competitive with arbitrage things so you see quite a lot of failed transactions sometimes and that's basically arbitrages arbitrage just fighting to get that transaction in uh there's another question around are the l1 and l2s um uh we haven't announced anything um the only thing we announced so far is that we're actively like looking researching in the research stages of other whether it's l1 or l2s but nothing necessarily to announce right now at this moment any other questions or even if you want to if you have some ideas that you want to reveal to the world or get some feedback on feel free nfts are the hottest thing now huh i think maybe just read the question out um for the people viewing on youtube yeah sure uh that's a good idea so carol asks are there any nfts for education uh eg concepts like avogadro you need to have attention paid to them to live long term uh not that i'm aware of that sounds like a pretty cool idea the only education related uh hack or project i've come across is um uh these guys that uh have like sort of a university uh style platform where you pay your fees but those fees essentially go into the lending pool and then the interest earned goes out to people that complete the course or achieve certain milestones in the course and that's but that's not nfc related that's just around interest uh earning interest related uh another question from damien santiago uh is it possible to create an app let's pull together and integrate with rv i mean deposit the pool asset one month and return the money to the users yeah so so that's definitely possible um so that's in the bucket of you know lossless things so losses lottery or lossless games and things like that um so yeah we've seen quite a few uh hack projects around that so you can create you know your own pull together type thing i would love to see other innovative ideas besides just copying exactly pull together the model pull together this model i think there's a lot of different models you could adopt or improve on but that's that's definitely possible to do that anna asks what do you think about nfts and d5 like using any nft saying art pieces collateral uh i i don't i don't know i'm not really into the nfc space i don't know much about it and not haven't been following it that that much the the only thing that i the only thing about a question about nfts is around pricing uh for something like ave and lending borrowing in the price feeds are quite important uh because you know if the price tanks for whatever reason you know then the system might be in danger so those positions need to be liquidated so you need to have reliable price fees the thing with nfts you know inherently they're they're non-functional uh so you know someone buys it for you know one dollar then next person buys it with ten thousand dollars like what's the actual price right yeah like this doesn't mean it's actually ten thousand dollars like because maybe you don't have anyone that's going to buy it for that amount um so so that becomes a bit hard in the nft space but hopefully maybe maybe someone from from this hackathon will solve that problem somehow yeah yeah i think that's a that's a so that's a that's a interesting problem a big problem for nfts just around pricing good questions keep them coming if you have any more and feel free feel feel free to unmute yourself um with your questions as well yeah i mean otherwise if there's no other questions at the moment you're more than welcome to reach out to david on the rv sponsor channel as well um i'm sure you can share these slides in that channel i'm david yeah i'll do that cool thanks so much david um that was great and thanks everybody for joining um yeah pop into the ave discord channel with your questions and looking forward to kicking east online off on friday awesome thanks everyone all right see you in the hack yes 