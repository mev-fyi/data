[Music] okay all right uh sounds good everyone uh thank you so much all for coming um we are now live uh and uh kind of going live at east global um you know hello uh i'm i'm uh i'm peep uh sean on one of these global team members and i'm honored to be joined here by crypto rachel who's gonna give us a rundown of um of single-sided liquidity pools from polls from uni swap um and uh i asked everyone kind of you know save your questions till the end and if you have any questions do feel free to kind of reach out in the zoom chat and uh yeah everyone please also keep your mic off while the presentation is going on and without further ado i'm gonna pass back to rachel for this wonderful presentation hi everyone so just make sure everyone can see my screen people you coming in and is my mouse there so i know if they can see where i'm pointing yup okay just sorry all right everyone so my name is critchel rape joel i've been helping out in the unescort uniswap discord for about a year now a while ago we had a lot of users with ample that got stuck in b3 and i wanted to help them get it out so i delved pretty heavily into the v3 contracts and i came up with this um i'm just going to go over a quick few things with the interfaces just to describe the setup so you know what's in the contract as i'm speaking about it i've got the interface for standard ierc20 for the balance and transfer the nft received interface an ierc 721 interface the router interface for the v3 router and of course some safe mass skipping to the bottom just some stuff i added in for safety able to kill the contract if it didn't work returning an nft if somebody made any mistakes or tokens if somebody made a mistake and a withdrawal for east collected for the reward and that brings us back to the main function it's pretty simple starting here is the main one i call gotta approve the nft for transfer although technically i could have left out the transfer from but i didn't realize this until recently after it was made it only would have saved some gas really then i call on the position id for the available liquidity from there i a b and i encode the amount of the liquidity that's in the person's pool the nftid and the amount out minimum and amount one minimum for the tokens i actually set to max if you can see here i set it to a max you went 128 or 250 128. this allows me to close out the whole position whether it's a good token a bad token or and the ease that it's paired with or any other token it's paired with from there i wrapped that with the actual bytes for call function for collect or decreasing liquidity this is the actual call data for whatever reason it only wanted to accept it packed sorry water so i ended up trying all the others but only pact would work once i got the pack to work i call and close the position with the v3 contract the nft positions contract and that's the function code make sure that it actually happens and then i re call the next function i had to separate due to stack too deep these returns are for the returning of the nft which i put this if in there so i could collect the second half with only this single function after the position was already closed once the position is closed you can call the collect because it takes all of the liquidity and moves it to your amount owed amount token node for this you need the nfi nft id the address where the liquidity is going which i'm pulling here to collect the reward and the amount out max and amount out one max was set to zero because you don't need to worry about anything because it's already in the collected position sorry one second and once again i did have to pack that data to just a straight call which this function signature is the collect and once i do the packing i actually call it and decode the returned amounts of tokens here i just make sure that one of the two came back so as to save gas if any errors in polling once i do that i'm checking to see which one came back with actual token this allows me to do one at a time but still have the option to do them both at a later point in time if it's not so much a problem with the token but most of the time the token gets locked the ample because it's the rebase the balance in the actual pool contract will go up and down this allows me to pull their ample at a future point if it rebases in the contract's favor then i do the fee amount which is 10 i do have it set internally up here once i do that i said the users address as payable so i can send them the wiis or ease or token if it is east that comes back through i have a switch on the website for bull if they want to receive east instead of we so if they want to receive ease it'll come down to here make sure the token is in wheeze withdraw it make sure that nothing happened and then transfer the amount minus the fee to the user else it'll save transfer the token just a safety probably doesn't need to be there but and the other else is to transfer any other token and once again return the nf type nftid once done and that is right here an internal safe transfer file so basically i'll go over it now in a rougher version this allows any user to close their position despite whether a token pair is locked up can't be isn't enough in the pool contract like ample or if a theon transfer breaks the pool in some way it will work for a broken pool too but it closes the position and moves all the tokens into the amount tokens owed of the position id of the owner of the nft and this allows you to collect only one of them at a time for instances where you can't transfer a token or there's not enough in the contract to actually pay the owed i'm thinking that's about it maybe we can jump into some questions sure thing anyone got any questions oh i just found the chat sorry yeah everyone's sending you quite a lot of good compliments so oh thank you people yeah this is great um good good job uh yes dave that's the function yep all right sounds good um i i want to do just another call for questions and if not i guess we can oh did you ever figure out honestly i didn't go back and re hash over why it wouldn't let me the only thing i was thinking had something to do with the multi calls but i did try it unpacked i tried calling it with just decreased litter liquidity through an interface rather than raw like i had to um so unfortunately i don't know why i had to pack it i just know it worked of course i should look into that i what i did to figure it out is i took an actual transaction that did a full liquidity poll and i used the actual data to rebuild exactly what i needed so it became a little rough contract and i do want to relaunch because i could save probably half a little less than half just by removing the safe transfer from for the nftid because once they actually approve the contract the contract can do the liquidity poll without transferring into the contract sounds good um anyone else benson wants a high level explanation on what this is about so i started with the ample wheeze pool ample is a rebase token so every day the balance of the contract or the holder changes therefore if you try to pull liquidity from the unit swap website it doesn't allow because it doesn't see the ample tokens in the contract so the safe transfer fails due to not having tokens of ample noise this allows a bypass of the need to interact with the token because in this instance the apple can't be transferred but the wheeze or ease can and once you change a position from open to close you have the ability to only take out one of those tokens if you can give me something more specific i'll go into details about that [Music] benson did you have another oh there let me share the contracts address it's all there it's public contract [Music] there it goes and i'm around a lot to help with questions perhaps any other questions benson got nine minutes left i could always do a quick synopsis of my scam contracts to recover scam token money okay that's perfect question so these three will not work right with fian transfer tokens rebase token and reflection tokens it happens because the token balances change so if there's not enough of one token in the contract you're unable to pull either liquidy and this also works for tokens that break for whatever reason get locked unable to transfer due to a bad code this will allow to get the weak slash ease or other half of the pair tether any major coin out of the pool yes yes so you can recover the wease if the token's locked still with v3 benson correct this is about the imbalance mostly at least that's what it started with basically it'll work on any pool and this allows you to pull the main half with value like a couple people broke their tokens and couldn't even transfer by sell anything with the pool this was able to recover their weak so they could start over thanks for the question benson uh i guess just thank you thank you just to kind of wrap everything up here um i want to kind of just tell everyone hey you know um do feel free to reach out to crypto rachel um you know we really appreciate this presentation and uh you know i'm sure that she would be completely you should be very happy to kind of uh you know give you all some more pointers if you have any questions be sure to kind of consult her on this uh you know uh pull strategy and then we can uh we can we can take it from there thanks so much thanks everyone you have a good day 