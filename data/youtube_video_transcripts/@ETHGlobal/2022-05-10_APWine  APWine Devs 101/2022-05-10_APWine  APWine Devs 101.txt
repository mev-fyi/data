us while we get the live stream set up as you can see we have euless here from the ap wine team and he's going to give you a session on your first future yield strategy so i'll let you take the stage cool thank you very much um all right nice to be here with you all today i'm very happy to be presenting uap one and how you know we're going to build together our own yield strategy using future yale tokenization so first let me give you an intro on what is ap wine what it can do and then we're going to go through the workshop and you're going to be able to follow along very simply you know through your computer or even just looking at the video if you're on your mobile phone um cool so ap wine we're building derivatives on yield now hang on with me this is not as difficult as it seems um we're building a suit of derivatives of tools on yield that allow you to build complex strategies on yield farming the first tool that we have available and that we released back in december 2021 is yield tokenization so essentially allowing you to tokenize future yield and be able to trade it sell it in advance or even buy it if you think that the api is going to go up now why did we do that um you know if you've been in the device summer of 2020 you've noticed that [Music] you know defy is full of extremely volatile yield full of risks and we just noticed that there was no tool that was designed to hedge your risk on this volatility or on the other hand take advantage of it by speculating on the apy um so there is a very high potential for strategies and d5 composibility so this is where we saw the opportunity and we were we built it for um you know actually one and a half years now and we came up with this concept of future yield tokenization back in august 2020. so this is new york's organization it's a new primitive in d5 um it allows you to buy sell and hedge your risk and trade the future yield that one of your assets can generate so when you when you say yield bearing assets uh it can be something as simple as depositing dye on ave and that gives you a dye and a dye is what we call an interest bearing token because it generates yield compared to die die if you just hold it in your wallet you're not getting yield but if you get a die you're actually increasing in in value and this is what makes it an interest-bearing token now how does this work um let's take the example of a die again because it's very simple to understand let's say you have your ada in your wallet and you want to tokenize the future yield of your a die over you know a few months you're going to deposit this on ap1 and ap1 are going to be to give you two different types of tokens it's basically going to split your adi into principal tokens so this is the value of your deposit at the time where you deposit so if you deposit the hundred dollars worth of a die so 100 a die you're going to get a pt principle token that is always equal to 100 and then on the other hand this is the interesting part uh this is the future yield token the other part that you're going to get and this part is going to be worth zero at the beginning but as long as yield is being generated it's going to go into this future yield token so the principal your initial deposit is going to generate yield and the yield is going to be split and gen and you know going into the other token so the future your token and this is where it gets very interesting because once you have this future yield token you can do whatever you want with it since it represents the future yield you can sell it to get it ahead of time and this is where the magic happens so you can mint pt and fyot i'm just going to use ptn fit throughout the workshop because it's simpler to say you know principal token future your token so you can mint with your ibt adi for example and then you can burn in the same way pt and fit to get your ibt back at any time so you're not locked in ap1 it's really a deposit and withdraw now another big part of our you know project is we have the protocol on the one hand that does this yield splitting slash yield tokenization and then we have the ap1amm so this is something that we've been working on um you know for six months and we iterated over multiple functionalities and over the design we came up with a design for the automated market maker that you know allows you to trade between pt fyt but also underlying which means that you can sell your fyt for underlying now let me just clear up a few things um underlying here we mean the underlying asset of your ibt so if you're depositing a die you're to get you know underlying is die it's the underlying it's the base asset also another point that i want to clarify is that why do we need an amm for api um when we started our beta in february 2021 we did this with an order book exchange now uh there are many reasons why an order book exchange on a layer one such as ethereum is not a good idea so we quickly you know pivoted to making our own emm just just like uni swap sushi swap balancer uh you know all of these are amms and we built our amm so that it accounts for the specific mechanisms of the fyt because you can't just go on sushi swap and make a pool with ptf40 for example because the fyt actually has a special mechanism it's worth zero at the beginning and at the end of the period it's worth all the yield that was generated so you would have a big impermanent loss what we call impermanent loss is the loss of value for liquidity providers if you just put this on a regular amm so this is what we did with our special emm uh you can check out the docs on docs.ap1.fi there's you know very detailed docs on how this works all the mechanics behind it so if you want to get more in detail into how this works please feel free to do so right now a few examples of what we can do with apyn the first thing is we can buy apt so principal token at a discount why because there is the time factor to be included inside basically pt is going to have a discount so it's going to be undervalued compared to what it's really worth you need to remember that at the end of each period one pt is always going to mint new fyts for the new period right now with ap one we work with 90 days periods so three months for each period which means that if you buy pt at 0.5 for example and then it's you know it it needs to go to one at the end of the period you're essentially buying pt at the discount and making a profit off of that so this is one of the strategies that you can do this is called a fixed trades because you can essentially guarantee you know accept smart contract hacks but it is guaranteed by the smart contracts of 81 that if you buy pt at a price that is less than one so one underlying for example if i buy uh die a die pt for you know 0.5 die i know for sure that i'm going to get 100 return on that i'm going to double my investment because my 0.5 pt is going to be worth one die at the end so that's one of the strategies the other one is yield ception um future yield tokenization allows you to get your yield ahead of time and if you get your yield ahead of time you can reinvest it into you know yield farming and this is where it gets pretty crazy you can do kind of a loop an inception and this is why we call the yield section so essentially uh get your yield ahead of time reinvest it and then leverage this position to get it you know as long as it's profitable let's not um you know spend too much time on this we have the workshop to do so today's workshop is going to be fixed rates by selling future yield i've described the pt strategy buying pt at a discount it is very good and we're going to see how it works but in this workshop we're going to do a little bit something a little bit different that can achieve the same result but with much higher capital efficiency and with much higher volumes so we're going to leverage both the protocol and the amn parts to do this strategy and i'm going to show you how right so if you're following this on a computer you are very welcome to you know follow along um you will need to have node.js and yarn for this workshop so the first step that we want to do is just clone the ap1 workshop repository here so let me do this right now this is the github repository so you just want to copy this go to your terminal i'm going to go to my desktop all right and then git clone [Music] this and workshop now that this is done let's go inside the folder and the first thing you want to do of course is install the dependencies so we're just going to put yarn and yarn is going to install everything so the ap one sdk we're going to use the sdk for this strategy and when this is done this is what you will want to do um first thing is this workshop is going to be targeting ethereal mainnet but we're not going to you know test in prod we're going to [Music] before king mainnet so that we can try you know on a fork of maintenance so for free basically it's a simulation of maintenance so it's easier to understand but at the same time it's free um so i set up a very simple script you can just yarn start node and boom you're done there's a few accounts it's this is using hard hat and then you want to open a new terminal and just you know go again to the workshop um and for each step there's gonna be five steps in this workshop um you just wanna do yarn step one yarn step two uh so for example if i wanna run the first step i'm gonna do yarn step one and this is going to load the step uh um all right yeah i missed one step actually if you want to follow this you're going to want to copy first the environment file into the into you know your own file so copy environment example into environment uh so this is so that you know the rpcs are correctly configured so this is what you want to do and once this is done you should have it in your folder so here [Music] right now we're ready we can just start our node again and navigate to the workshop and then yarn step one all right let's go to the workshop first is going to be the sdk creation um so creating the sdk is very simple we've made it very easy so if you're using um typescript it's you know all the typings are here you can just you know start a project and install the sdk package and just start building with ap1 so the first thing you want to do is initialize the sdk you're going to need to provide a provider a signer and a network so let me go here and if i go to this i hope you can see my screen i'm going to zoom a little bit and so here all the scripts are going to be in the source script and then step one step two step three step four step five step one is going to be initializing the sdk so this is how we initialize it we take a provider a signer we actually put a private key here and then a network this is going to be magnet of course for the purpose of this workshop and if we run the step we can see that the ap1 sdk was correctly initialized now we can go on the next step second step is going to be retrieving all the futures by the way i think i can see the chat um through zoom so if you have any questions at any time i'm super happy to answer and you know this is of course a workshop but it should be also a kind of a synchronous communication channel so i'm happy to stop at any time and answer all of your questions um so okay let's go back to our step first thing is we're going to get all the information of all the futures so a future is basically you know what i explained before a future is an asset a duration um and a platform so for example we have i'm just going to show you on the ap1 uh website how it looks like if you go to app.ap1.phi this is on mainnet and we have yep absolutely um okay let me share um maybe somebody from the youth global team can share this on youtube or zoom i'm going to share the link of the of the repo and on the repo you actually have the presentation slides here so you can follow along um and then this also is going to be very nice if you want to you know check how ap1 looks like in real life this is what you get so here we can see that for example we have the lido finance wrapped eth future and so like i said before every future is 90 days you can see here you know when it starts and when it ends um and this future wrapped eath is what we're gonna use for this workshop so essentially this means that you can tokenize your yield on eath and you will see why it's a very very um you know interesting to do it we support a lot of assets we actually go through a governance process to enable you know listing new assets through the community so we have uh 20 different assets on mainnet and we have nine assets on polygons so we're also cross chain all right cool so let's uh get all the addresses of all the futures and then we're going to get all the detailed information you can do do this through sdk dot fetch all future aggregates this is going to give you the period index the expiry time the token addresses and so on so if we try on our step so this time we're gonna do yarn step two and if we run this it's going to load a little bit you can do you can see here that hard hat is doing a lot of stuff on the background and this is going to fetch all the features by the way this block we are forking maynet at a blog that was a few months ago so there were only 10 features at the time so this is totally normal all right we can see here that we have a lot of assets that we can use uh and one of them is staked eth and this is what the one that we're going to use now that we have all the futures uh we can get the basic apr and the basic apr is going to be the pt trading so buying pt at a discount and then waiting till the period expiry to make a guaranteed quote quote profit um so let's get the spot price on the amm this time um so that we can see you know how much uh what is the price of a pt we can do sdk dot fetch spot price it's that simple then you put in the vault so this is going to be a stake east vault and then the from token and the two token so the from token uh let's go here uh so this was step two um it's just uh you know getting the fetch future aggregate from address and it's going to get all the info and then the step three that we are actually right now is going to be we first find uh you know from all the futures that we loaded before we find the one that has staked if once we found it we want to get uh the spot price between pet and underlying so in this case underlying is going to be what it's going to be the eth of course so once we do this we can actually compute the apr so to compute the apr you basically need to need to extrapolate the the the profit that you can make over 20 days for example if the period expires in 20 days and then you multiply by the time left over an entire year so you extrapolate and this is you know what this formula is doing uh i invite you to you know join the repo and check by yourself uh but it's just very simple math um so if we run this uh let's check you know how much can we get on our eth right now on ap1 i mean a few months ago let's do it oh we can get 35.72 percent on our eath that is pretty insane that means that if you buy pt at a discount with your eath you're going to get an amount of pt that is you know higher than what you put if you wait till the period expiry you can redeem heath at a 1 1 ratio from your bt so if you buy you know 1.5 pt from one eath at the end of the period you're going to get to 1.5 eth this is guaranteed by the contracts right that's pretty good the only issue with this is that we are leveraging only a part of the liquidity available in ap1 remember that the spot price is not the final price there is always slippage in ams so how can we improve our efficiency realistically if you want to put like 100 eth through this strategy it's not going to work because there's not enough liquidity and this is where it gets very interesting because we're going to leverage the ptfyt liquidity on ap1 so that we can also you know do much bigger trades so with lower resources we want to achieve the same or a better result the the fourth step is going to be using ap1 to deposit our state eth and then selling fyt for pt so what this is going to do basically is we're going to tokenize our future yield and then get our yield in advance and then reinvest it into pt it gets it's pretty crazy when you think about it but it's going to be very simple through the sdk so first step is going to deposit on lido and then on ap1 to get pt and fit let's do that [Music] step four tokenize so here i put a helper it's a utility function that is very simple it just does it basically sends a transaction to the state leave address and the state's address has a mechanism that if you send the eth to it it's going to give you state effect so this is just a wrapping mechanism deposited once we have our state ease we can just use the amm um now sorry we can just use the ap1 protocol and we're going to use the am later to deposit our state div so this is what this is going to do sdk dot deposit and then we we put the staked future for stakeheath and then we just put the amount that we want to tokenize in our case this is going to be 10 10 if so 10 state heath and then there is a little you know nice neat little utility which is auto approved so you don't need to approve manually this is going to automatically approve your tokens for you now if you run this step so yarn step four if you want to follow along we're going to deposit 10 eth on light the finance and then deposit our 10 state heath on ap1 and if we do that we see that we get 9.93 pt and fyt why do we get less that's simply because the period has already started so it's already generated some yield but if you withdraw exactly this amount of pt and fyt you're going to get exactly your yield i mean your initial deposit back this is because some yield has already been generated so your fyt has already some value nice so now we got this now the mechanism that we're going to use is we're going to sell our fyt for pt and at the end we're going to be seeing how much pt we have and this is going to be our profit so this is going to be step five the last step we're almost there we're going to use a simple swap in so we want to swap all of our fyt into pt so sdk dot swap in we pass the amm and then from fyt to pt you can just put the string like this it's very easy and then the amount this is going to give a similar result as we're going to see right now but it's going to yield much better results with a higher capital so essentially you can do 10 times bigger trades through this specific strategy nice okay so let's do this what happened here we just did the step one step two all the way to step five and then we swap our fit for pt uh this is going to yield us 10.36 bt so essentially through the strategy we just secured point 0.36 if if we just wait till the expiry of the period this is equivalent to a 34 apr which is very good as you can see it's almost the same as our first strategy with the pt except this one again can support much bigger trades and this is where it gets interesting right so this is how we use the amm and the protocol deposit and then you can swap form anything to anything the composability you know has been also a challenge for us and this is why we came up with this amm that has a design where you can swap between any of the three assets pt fyt and underlying so that essentially you are never stuck in your position on api we we really value composibility and this is where it gets interesting d5 is all about compressibility right now is your turn uh of course if you have any questions uh please feel free to uh but now it's your turn to get rewarded through creative strategies uh whether it be through arbitrage trading bots you know leveraged yield also with gearbox we actually have you know many prizes for this hackathon for hack money but there is one special prize that i want to mention it's that um we partnered with superfluid who are doing um you know money payment streaming to get a co-sponsored price of two thousand dollars both on the superfluid and apuw site um so essentially if you find an integration that can be interesting for both projects so one of the few ideas i had around this you know concept was you could get your money streams ahead of time so essentially if you are being paid you know buy superfluid through your company you could tokenize this stream and then get it ahead of time the other thing would be maybe streaming yield through streaming fyts because fyts represent yield so the all of these can be very interesting to explore and this is why i'm excited you know to be partnering with east global for this hackathon get crazy with ideas and you will 100 be rewarded for that also very happy to brainstorm with you um if you're if you're listening to this please reach out on the discord channels we are always here to answer your questions and we're very happy to discuss and yeah that's basically it for this demonstration for this workshop uh that was you know awesome to be with you all i hope that was clear happy to answer any questions on on the chat right now if you have any questions please feel free to ask um we're also hiring if if that's something um you know you want to explore we'd be happy to discuss about it but first let's get back to hacking and i wish you guys an amazing you know an amazing hackathon i'm sure it will be great um let's go with the questions if you have any thank you very much thanks um let's take a few seconds to see if there's any questions if not we can follow up over this work for sure happy to have do so [Music] if you have any you know issues with following the workshop i think this will be recorded so you can you know follow along also later on uh but if there's anything that you need any clarification on uh you know feel free to reach out on discord uh we're here to help so don't get stuck on anything just you know as as as soon as you encounter any issue uh we're here to to to help you you know work on your project great thanks i think you covered everything and i've also shared your slides in the discord channel so yeah hopefully you guys can connect there and thanks again for the workshop amazing thank you very much thank you to all who listen i hope you have a great 