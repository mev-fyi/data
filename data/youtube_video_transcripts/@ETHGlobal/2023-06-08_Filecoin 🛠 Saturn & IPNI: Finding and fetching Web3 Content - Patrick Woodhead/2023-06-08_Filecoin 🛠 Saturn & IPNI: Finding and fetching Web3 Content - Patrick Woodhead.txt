hello everyone and welcome to the hack FS filecoin Workshop Saturn ipni finding and fetching web 3 content joining us today is Patrick Woodhead who will be taking us through the session and without pass it over to Patrick to get the session started hi there thanks very much um I hope everyone can see my screen my name is Patrick Woodhead and I'm a technical program manager at protocol Labs at the program which I manage is retrieval markets so that is how do we retrieve content out of filecoin and out of ipfs then how do we uh recruit how do we accelerate that around the world to clients wherever they might be and I've just seen something up in the chat yeah please please post any questions um and if they're really relevant I can I can address them immediately and if not yeah we can have a few questions at the end um great so the challenge statement for this bounty is as follows retrieval via distributed CDN build the most impactful application leveraging the Saturn Network and or ipni for data Discovery and verified retrieval and we're going to go into a bit more detail about the satin Network and about ipni and then what we really mean by the way Discovery there and also what it means to have a verified retrieval um obviously we're working in a trustless environment and so when you when you retrieve content you do have to verify that you've got the content that you have that you've asked for so it is important that you're able to verify on the client side uh so as I said it's Saturn and ipni these are two projects which have been worked on at protocol Labs we're going to begin with Saturn and we'll go into ipni after that and then we'll also see how the two are connected a bit of motivation for Saturn Network uh here is a statistic and I can give people the the figures behind this if they'd like to and I can share links to the end but by 2025 the global CDN Market is expected to be twice as large as the cloud object storage market so that's really saying that retrieving files and accelerating files to clients wherever they might be it's actually a bigger Market than storing those files in the first place and actually when you think about this it doesn't make a lot of sense it's probably more straightforward just to Simply store a file somewhere in the cloud um or let's say a bit webpage coming here on filecoin um but it's probably more complex task to actually make sure that those files can be retrieved by anyone around the world in a performant amount of time um and economically and also reliably and people do want their their app said the apps to work very well and to be seamless and snappy so with that in mind uh we then look at what full coin and ipfs offer and uh where there's some problems uh with achieving that goal of having a really Snappy experience on the retrieval side so ipfs retrievals through the public ipfs gateways there are a few of these um there's one run by protocol Labs which is ipfs.io and also dweb.link um firstly these are centralized um the ones from my protocol labs and everyone's run by by other companies as well um and they are the fastest um they sometimes do take a bit of time for you to retrieve your files and also as they centralize you're you're relying or you're trusting um that gateway to provide you with the file you don't have to do any verification on the client side you're it's they're your trust anchor um and you're just assuming that they're going to return you the right files um so and that's really speaking about ipfs and then the filecoin side there isn't a cash layer to accelerate retrievals from Five Point Storage providers uh there's been a huge amount of work recently uh on how you can retrieve files from file coin storage providers um it was originally only available over graph sync which we'll talk about a bit more later and there's been a lot of progress recently in HTTP retrievals which uh which is obviously great because HTTP tooling is everywhere um but it'll be great if we can then start to see the emergence of these cdns these cache layers in front of filecoin so that you're not having to go back to the origin server of the data each time the third thing I can mention here is that historically ipfs and Falcon different networks they haven't really interoperated much um and going forward we'd like to have the whole content addressed Universe be able to be content addressed and not have sort of lock into particular networks and we'd like to see if that's Network and filecoin interoperate so that's the uh that's sort of sort of the the background um that brings us on to what is Statin Saturn is a decentralized CDN accelerating retrievals from the ipfs and farcoin networks as the network launched in November 2022 and anyone can join to be a point of presence uh there are now over 2 000 points of presence around the world um a large network capacity of 11 over 11 tbps and a whole bunch of daily requests 158 million plus um so there's a lot of traffic and a lot of points of presence around the world serving that traffic uh oops go on to the roadmap um as I said like November we had the launch and by December we wanted anyone to be able to run up an L1 node and so anyone can now go to the GitHub repo of the Saturn L1 node and get themselves set up uh by March we wanted to actually have some performance guarantees in this network and we started to see a really nice time to First Bite for ipfs Content flowing through the Saturn Network um in April we started to open kind of a beta testing for Saturday customers and in a programming process of that at the moment um and then just recently in May June we have essentially the the node operators these points of presence they they receive payouts on a monthly basis um and since the launch of the fvm which is the Smart contract layout on the farcoin network since the launch of that we've been able to move a lot of the payout logic onto the smart contract and so satin node operators have recently getting paid by an fem smart contract um and then going forward we're looking to link up the satin L1 nodes to falcoin and ipfs and have that interoperability that I've already spoken about so now I've got an architecture diagram um this is Saturn and also I'm bringing in ipni now we'll talk about that a bit more in a second but we'll focus a bit more on just a satin request flows and before we can motivate ip9 in a sec uh so on the left hand side if you can see my mouse we've got a client who is looking to get hold of a file they've got a CID and they want to get hold of a file so they can make a request to the Saturn Network um if they're a browser client this can be done over DNS to the data network if they are on the server they can actually use this sort of SDK thing called Caboose which allows them to connect to a nearby Saturn node um and they make the request and the SAT one of the Saturn nodes picks up this request if it's in the Saturn node cache it's able to serve it back very very quickly oops excuse me um if not then the Saturn nodes need to fall further back into cache Miss and get that data from another layer and that's where ipni comes in how does assassin know find where that content is um as you can see here and we'll come back to this diagram after I've introduced ipni um there are two ways that statino can get hold of it they can make requests to the ipfs network or they can maybe request to the fargway network and with different protocols bitter graph sync and more recently with HTTP now as well they're able to get hold of blocks and then return a car file to the client as I alluded to that there are different sorts of retrievals you can make against the networks there's browser retrievals uh server retrievals and Gateway retrievals um the browser retrievals they may request straight to a Saturn L1 but as you're getting back a file which is you have to be able to verify it because it's from a satin L1 node that you don't particularly trust uh Saturn also has developed a service worker which incrementally verifies the files as they come back into your device and then streams it into the browser the browser page server retrievals as I mentioned they they do not use the DNS layer and they do not have the service worker because it's not a browser but they do have a similar logic of incrementally verifying as fast as they come back they also have server tools give you a little bit more flexibility about parallelizing uh retrievals from a bunch of different Saturn nodes and also have a kind of fallback if certain Saturn one nodes are going down so just a little bit more available Machinery if you're making retrievals from the server and this can allow people to build their their businesses uh around fat and they can they can fetch stuff and faster and then pass it on to their clients in turn um and then Gateway retrievals Saturn will soon have a Saturn Gateway where you if you do want to do any of this uh client-side verification you can just trust a gateways that's something that we're working with the ipfs.io team to to sort of turn the current ipfs gateways into um a more of a global gateway for any content on farcoin and ipfs okay gonna just do a quick little demo here of a browser retrieval um we've got a few steps here uh so the first thing is that we're going to add a script tag into a very simple HTML page um which allows us to get hold of this Saturn widget and we also fetching the Saturn service worker and putting that into our repo um you then add that service workers to your domain which is just the repo I'm about to show you and then we can stream um NHS video so I will escape from here go across to here foreign so this repo is on GitHub if anyone wants to um start from here or just play around with it make this a bit bigger as well okay so as I said we're just adding this this script tag here um adding the the file that we want to fetch and we have already downloaded the Saturn service worker and it's in the root domain of of this website and then very simply I'm just going to run MPX serve and other demo Gods on my side they're taking a little bit longer than usual okay so yeah the video is coming through we can uh have a look at some developer tools um when you start to see different chunks of each level as far coming in from uh from starting to Main and bringing in different chunks as far and this includes the ability to to skip through to different parts of the video as well [Music] boom we'll stop there all right uh that's just one example of stuff you can do with Saturn um so I'm going to go towards the end just go through some more ideas like of all the different use cases that we've been talking about and give everyone a little bit of a taste of things they could uh they could hack on something links if you want to go to the homepage static head to saturn.tech uh docs.saturn.tech tell you how to set yourself up as a Saturn L1 node uh or give more information about how you can fetch from Saturn explorer.tech will be up hopefully within the next few days and it gives a world map of all of the different Saturn nodes around the world and it just kind of summary statistics about how much bandwidth each of those nodes are sharing you can head to the GitHub which is Falcon Saturn and that Saturn demo just seen literally very simple just a few files um you can get it from here and you can recreate what I just what I just showed you head to falconflac and then there are YouTube videos from ipfest thing which go into a bit more depth on this as well okay now I'm gonna I didn't mention ipni much when I went through this diagram the last time but just to come back to motivate that open eye when a Saturn OneNote doesn't have a file in its cache uh with if people know the ipf network well you sort of get like an element of content Discovery from bit swap um bit swap is it asks the networks sorry the the kind of Neighbors in in the ipfest networks that you have whether they have a particular block which which corresponds to a CID and if not then you can speak to What's called the DHT and you can find out um which which nodes do have that CID but with with graph sync it's different graphs and you have to know who you want to speak to before you start so you sort of need to know which file coin storage provider has a file before you can actually fetch it and that's what ipni comes in IPI which stands for interplanetary network indexer is a way for you to discover which filecoin story providers and even ipfs nodes uh have the file that you're looking for so yeah as a math I suppose I've sort of already mentioned quite a lot of this a bit from DHD do provide that content Discovery um one of the issues here is DHT is unable to keep up with the sheer number of Records or what we call advertisements um that people want to put up to show where their data is um and it can be a bit slow there's a few hops involved in going through the DHT to discover content um and graph sync and HTTP for that matter you need to know who you want to speak to before you before you start speaking to them so it doesn't have sort of content Discovery built into those protocols um so ipni um is a routing system designed for providing cids by the billion with millisecond lookup latency um so IP and I in a similar that ipfs is a protocol ipni is a protocol and it's about the whole flow of you having a CID wanting to know uh where you should get hold of the file which you want so to look up and then actually uh providing the CID the content behind it so that's the whole the whole flow so you have it you have a CID and you make a request to um a network indexer which is part of the ipni protocol and the network indexer will return to you um which provider which storage provider or even which I profess node has that content and over which protocols it's available so a bit swap graph sync HTTP and more and more the stuff on on filecoin is available over HTTP so start to see the advertisements coming from the the network index there including HTTP as well as graph sync so how does the network indexer then know where stuff is stored over here we have our professional nodes or Lotus nodes or boost and when a storage deal is made um on filecoin or when something is stored on my test node they are able to advertise uh the which cids they're storing and they can either gossip that um or they can even just send HTTP requests to um Network indexer and that then stores a huge number of records of just a mapping of CID to provider um then once it's got that in a system it's pretty simple retrieval clients are able to make requests for a particular CID um or particularly multi-hash this is uh this is a multi-hash is sort of baked into the CID so it's kind of a layer below um and find out who's got hold of them and then this next step is once you know who's got it you just you just make that request and able to retrieve it from from the source I was very careful to say ipis approachable and um not sort of instances of anything um so if you come across different terms while you're looking into this I think this diagram can help apnize the overall protocol and these other things are sort of members of of the API protocol network indexer is this specific um a specific service that actually ingests the records and offers a lookup store the index is an implementation which was made by critical Labs of a network indexer and then cid.contact which is also the domain name so head to CL dot contact to find out more this is actually an instance of this store the index implementation of the network indexer spec um and an index provider is just a really yeah client of of the network indexer who's able to provide um the advertisements ipni links um github.com specs or go lib ipni there's a Blog series on the filecoin.io blog um and if these slides are shared you're able to get this link here cid.contact uh docs.co.contacts head to the ipni channel on Falcon slack and again on YouTube if you go to ipfest thing and search for ipni um you will be able to find some amazing Talks by the engineers who worked on this Okay so we've now gone through Saturn we've gone through ipni the next step is uh what could we actually what sort of applications or use cases could we look into and actually I'm going to go to this next slide first um because I think this could help everyone figure out what they might want to work on um the Saturn team is still working very hard on linking up all of these different networks ipfs ipni farcoin and that nft dot storage um and it's right at The Cutting Edge bleeding edge of what protocol apps is working on and so some there are some things which we have got to work like some of that HSS video streamings you've seen But there are other things which we haven't got to work so much so there's one one way of looking at this would be to just use the the apis of that and IPI ipni and build something on top of them and I think a sort of a more interesting approach would be to get under the hood and see if there's any way of adding functionality or features or having a go at interfacing some of these networks and finding optimizations or interesting ways in which we can get them to talk and interoperate uh more efficiently uh when it comes to all these different verticals um we saw an example of video uh but there are so many different things which we would like to to use a CDN for um so firstly is can we get the ipfs gateways not to be centralized and decentralize those then there's huge amounts of nft um media files which are content addressed or on on filecoin uh what's that what's the best way that we can serve those um how do we index those in that in their Millions um in ipni how how can we optimize the flows around around these sort of files public data sets uh if we if someone's interested looking in like storage as well as retrieval can we get any public data sets on and then try and make them retrievable and just get that end-to-end flow going and the same goes with DSI a really interesting one is around blockchain transaction databases and also blockchain State can we make snapshots and store them on filecoin and then make them available through uh Saturn and ipni for fast retrieval and can we even address that the data available availability problem uh by by using this can we help people to get hold of indexes around blockchain State um so that they could their daps can and get hold of all the relevant stuff to to work seamlessly and and sort of have the metadata available and information available to make future transactions and know that you're up to date with the latest transcoding um this this feeds into into video and music um but what ways can we can we compute over data as it's moving to these retrieval networks uh add a little functions um like for example live peer has got a whole bunch of of tools in the toolbox which could be integrated with Saturn um to create a node that's able to do some some really powerful stuff and that leads into decentralized compute uh could we sort of combine retrieval and compute networks so we've got sort of edge Computing or like almost like Edge lambdas um they're able to do little jobs around the place um and return the results to the client search and Discovery um we've looked at indexing but we haven't looked so much at sort of content searching so uh what are these files actually contain uh can I discover um music can I discover videos can I discover the blockchain state that includes certain things uh a more General kind of developer tooling around how we can feed stuff back into into Saturn or sorry back into a d app from satin or from ipni and then yeah mobile music video um databases and also uh gaming which just different verticals will have different challenges and different opportunities cool thank you very much I guess there's sort of five minutes left um if anyone's got any questions yeah if anybody has any questions please feel free to type them in the chat or take yourself off mute and ask here and if maybe if people are thinking um what would you Patrick what would you think uh I guess um maybe some project ideas you would like to see folks do or any sort of thoughts you have around maybe getting some creative juices so and if people are still struggling on what to what to what to work on yeah I think if people are struggling what to work on I would focus on um this like some of the blockchain stuff so can we get other web 3 data sets and um get them into filecoin or into ipfs and then find a way to to retrieve certain indexes over that that blockchain state um and make that flow end-to-end work um we're speaking to a bunch of uh people who are interested in in kind of backups or snapshots of blockchain state so the validated nodes can get themselves up themselves set up very quickly but I think what's interesting as another like a a yeah a smaller project would be can we just get small amounts of blockchain state where you can you can create little kind of yes little indexes over overstate and and try and get that into the client as quickly as possible I think that would be a very interesting project if for a first run yeah embarrassing questions now's the time before we ended ended ah we have a question I want to create some data streams where should I start um that is a good question um I think the best place to start is just hitting up the um yeah starting GitHub or getting in touch with the team on Far Queen slack um there's we have got some um streaming capabilities particularly with the video stuff but yeah I think it would be just to get you in touch with our engineers and um and see where we can go from that so so I don't know anything other about uh actually file Cohen ipfs or any of the rest so this is all very very new to me but one of the things I'm thinking about is um where would I be looking if um so I understand the idea that you pay for file storage and you want to held stuff but if people are consuming you know gonna want you want to publish files that people use um is there which of these Technologies if you wanted to get paid for the use of the data not just the hosting and distribution so are you saying if you if you wanted to publish data and also be paid for who's gonna who's gonna consume that data right um well so if you want to you you can run a assassin uh point of presence you can get paid for serving the content um you can run a falcon storage provider and you can be paid for storing uh the content if you're a Content publisher it kind of depends on the business model there's because kind of in the traditional web 2 space there's actually content publisher who pays to have their their content accelerated they want to provide a good experience to their users and most the use cases we're looking at is sort of following that business model whereby the content publisher is the one who's going to be footing the bill in the end um and then it will be sort of an out well that would be an interesting to look at is there a way that you could have a trustworth protocol which would allow your clients to then pay to access that content rather than it being sort of out of band your clients paying you through another mechanism so that yeah that would be a very interesting project to look into okay but there's there isn't part of this file coin and ipfs and Saturn apni stack of things where it's really addressed it tries to address that yet there there is we have got some work streams um where we're looking at paying directly for files so that's where the client actually transfers um makes micro payments for bytes of a file and the team called magmo um who are looking into like a state Channel approach to that um which is super interesting there's a whole different set of use cases which would be unlocked by that um Saturn goes to the approach that the content publisher was the one paying which means that it's actually not the client so paying actually when you across the board at the moment clients don't really like paying um it would take like a paradigm shift in how we use the internet if we sort of have everyone making migrate payments so it's kind of two different work streams the micropayment and the response payment Bridge yeah you mean web three thank you thank you hey are there oh yeah another question is there any way to manage access to token gated content using ipfs and leverage Saturn L1 to speed up the Authentication um great question there is there's there is some research going into how we could have sort of Access Control onto ipfs um nothing I believe has been actually shipped with any of the major ipfs nodes um the Saturn L1 to speed up Authentication that again is not a feature that would be a really interesting to look into like access control and authentication um on yeah through this network one of the problems you face though is that the 2001s can be run by anyone so uh if your or the authentication layer is across a bunch of 2000 nodes which you can't trust then it's I suppose a bit of a challenge like how are you set up your authentication layer we've got some ideas around using um kind of dids and ucans to manage kind of how a client can uh can have an account with a particular content provider and get access to their content as well as their metering how much usage each each client has got to the network um so yeah there is some research in that space nothing too concrete but we're looking at ucams as a way to um to measure and and have sort of identity around people accessing assassin Network awesome well cheers well thank you Patrick uh we're currently at the top of the hour thanks for the great presentation and thank you everybody for joining oh sorry I guess maybe one last question 