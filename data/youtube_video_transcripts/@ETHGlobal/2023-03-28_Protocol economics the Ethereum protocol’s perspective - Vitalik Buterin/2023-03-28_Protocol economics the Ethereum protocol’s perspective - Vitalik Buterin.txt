foreign [Applause] [Music] protocols perspective okay thank you guys are you uh are you guys hearing me well yep we can hear you okay perfect um so what I wanted to give to uh today is a yeah brief overview of uh like what protocol economics looks like in general and focusing on ethereum and uh some of the changes that have happened to both the ethereum protocol um and the ethereum application ecosystem over time and touch on you know some of the issues of uh how that interacts with uh some of the things that might happen with both ethereum protocol and the ethereum application ecosystem in the future um so some of the political economics questions that matter this is pretty basic uh so one is uh what are the incentives facing users uh two is what are the incentives that are facing consentus actors so meaning minors and validators um what is the behavior of the chain of both average case behavior and extreme case behavior and how does the yeah and behavior of the chain affect incentives at the application layer so for example if an application depends on the Chain working in a particular way for its incentives then if the chain ends up but suddenly working some different way because of an attack then that might cause the application to have some problems and how do applications affect any of the incentives inside there's basic users inside the space consensus actors incentives to do things that might break the chain and all of this stuff and so there's some pretty complex interactions between all of these right so users sends transactions to the chain users read data from the chain uh the the state of applications who lives on the chain and so you could say the state effects yeah or the chain affects the state of applications applications give incentives to users and applications are the reason why incentive uh your users sends transactions that have particular strengths of data instead of other particular strings of data um consentus actors maintain the stability of the chain and the chain provides some intentional in protocol incentives to stick inside the sectors so this includes mining rewards validating rewards various fancy and protocol defined rewards it also includes penalties and applications uh also provide more incentives right so there's in protocol incentives and then there's also extra protocol incentives and ultimately this whole Mev situation is a situation about extra protocol incentives that arise mostly accidentally and how they end up affecting some of the incentives to run the chain so some of the risks to watch out for are I mean one I think and the one that we've focused on for the longest is just the incentive for validators to act correctly instead of acting incorrectly and in particular the incentive to keep advancing the chain instead of trying to 51 attack or for example trying to censor the chain right and uh the kind of in uh battle between the users incentive which is just is the transaction fee and now just the priority fee to get included in the Chain versus potential bribes to sensor and you know light bribes the sensor happen accidentally or bribes the sensor or something it might happen intentionally I'm like trying to set economics so that the accuser incentive has the upper hand and so that's side incentives uh don't have the upper hands right like that a lot of that was a big part of the discussion and things like PBS censorship resistance um but aside from that there is also economies of scale in inside this and one example is that if user incentives are complex uh then that might lead to wallet centralization right so for example pre-eit1559 uh you the incentives facing users in terms of how the user sets the gas brace were pretty complicated and a user got a pretty complicated trade-off curve between getting their transaction included quickly and waiting a very variable and unknown amount of time for their transaction to get included and this both caused a huge amount of dead weight loss because a lot of users waited for for their transactions to get included for no good reason and it also I think made it harder to create wallets and probably yeah ended up contributing somewhat to dissuading new wallets from from getting created post the ap1559 and said this for users were generally a lot simpler you just set a reasonably High match space fee and then you set the priority feed to some probably a constant number or if there is an active an active situation going on you could set it to something higher using a much number algorithm and you get penalized much less right but generally the situation is important for users we also see economies of scale for consensus actors right and that leads to consensus centralization and so if the strategy is that consensus actors see are something that's constantly complex and shifting and especially requires access to proprietary information and all of these things then that's gonna be really bad for solar staking it's going to be really bad for decentralized pooling even it's either going to be really bad for small centralized pools and so it's just going to lead to big pool domination right and I think we even saw in near the end of the proof of work era ethereum centralized full domination was something that started to get pretty bad all right we got to the point where like two mining pools were enough to get over 50 percent and Bitcoin is like a little better than ethereum proof of work but it wasn't that much better than ethereum proof of work and like I think we want to really make sure that proof of stake goes in a healthy direction as well and then finally incentives to have low latency are also a different kind of centralization incentive because they are a geographic concentration incentive they're also a cloud computing instead of and both of those things actually yeah contribute to jurisdiction risk which is uh and other really importance and big risk to the credible neutrality of a blockchain as I think we've seen over the past year um so a lot of this started basically with the rise of defy right so uh burst Mev meaning uh a kind of these opportunities to grab up a large amount of money by being the final actor that constructs a block a lot of those um actually existed even all the way back in 2017 so there were these pretty famous icos that happened in 2017 they just picture on the left is that a graph uh graphing the gas price and it got to an extremely high number and there was just like a huge amount of deadweight loss um I think this was specifically during the basic attention token Ico and had there been um collection infrastructure at the time that could have just been collected by um you know whatever mining pool was uh sophisticated enough to have that infrastructure right but realistically at the time there were just not enough of these incidents to probably justify yeah paying the fixed costs of trying of uh you know building the infrastructure to try to capture all this meth but then in 2019 2020 we had deeply summer and um at that time we had uh in the basically an end of the start of essentially permanent uh combination of uh kind of ongoing mevs yeah that would happen pretty much every block and even bigger and even crazier spikes than we saw in uh 2017 right and that created economy is a scale for consensus actors which uh ended up creating the necessity for things like PPS to try to kind of split up the economies of scale heavy role so that the remaining role would not be so economies of scale heavy and the chart on the right is uh daily extracted MPV gross profit which shows how Mev basically you know is a constant but at the same time it is a very spiky uh efd1559 right so that greatly reduced waiting times for users and it also greatly reduced the incentive to use complex gas price strategies as I mentioned which reduces barrier Century for wallets the merge actually yeah reduced waiting times for users even further and I think there's going to be some research on that coming out fairly soon um and uh you know that's something that's going to improve uh further over time um the merge actually does a lot of strange things at the same time right so the merge first of all it completely changes the class of participants maintaining consensus right which means that the side incentives of people maintaining consensus change a lot before it was liners now it's youth stakers miners tended to be a group that was kind of off in their own corner and uh often not even very loyal to ethereum because they would jump between ethereum and other protocols now there were some miners that were definitely very loyal to ethereum but there were also other stuff that were not and and that it's uh people that had access to Hardware whose main expertise was in things like Hardware meanwhile each stakers on the other hand are a subset of etholders and if holders said to have less sophistication and Hardware but they um you know also tends to be more integrated into the ethereum ecosystem in other ways and you know there is complicated effects I think from the change of uh like what kinds of people are doing the mining to what kinds of people are doing beef staking on average right um so I know a lot of miners um actually ended up becoming Youth stakers and so a lot of actors carried over from one side to the other but I mean on average the composition did change a lot the merge also made a reorgan tax vastly harder so there's this uh piece from myself and George's from uh almost two years ago that talks about how reorgs after the merge are going to get much harder and then just also a very different incentive landscape in terms of things like centralization and joining a staking pool and what kind of pools are even possible and all of these issues right so the mortgage changed a lot and uh you know I think the mortgage is one of those things where even 10 years from now uh you know if someone asks so you know what kinds of effects did the merge have uh so you know as the apocryphal quote about the French Revolution goes um you know the correct response is going to be it's your way to tell um so that's uh existing changes now upcoming changes withdrawals are going to get enabled in the next hard Fork then stuff going beyond that single secret leader elections different types of in protocol PPS and finally yes singles a lot finality so which draws basically two consequences right people Tien will straw and so people will will withdraw and that reduces the total amount of effect but then also a people came with strong so people become more confident that if they stake they'll get their money back which leads to more geese getting staked which one of these dominates um you know we have no idea could go either way though ultimately I think the main practical consequence of this is going to be a change to the total amounts of staking and possibly also a change to the composition of stakers um and uh I mean my hope is that for solar stickers things are going to become more friendly and withdrawals are going to kind of reduce the premium that pools have because currently pools have this premium that they're the only way to get liquidity and with what you're Allison are you going to be able to withdraw and get your money back in a couple of days uh so it'll be interesting to see what kinds of consequences that has um but single secret leader elections these are interesting right so only the proposer will know that they are the proposer before the block is produced and though the proposal could voluntarily reveal that info and even prove that they're going to be the proposer so the intended effect of all this is to reduce the Dos risk against proposals right if no one knows who you are until the block is created then there's nothing that can be dust and that once you reveal Who You Are by creating the block while the Block's already out there and so even if everyone does as you well you know the block is already out there and it is going to join the chain but there is this interesting research question of like are there under unintended effects and in particular especially in the combination of PBS like would there be incentives for proposers to pre-reveal their identity to anyone um I'll skip over what PBS for now because I feel like everyone is going to be talking about PBS and it's probably the kind of primary yes subject over the next few years in some sense uh but but it's uh you know a house anything rabbit hole and then a single so what finality right so single so what finality basically means instead of uh blocks finalizing after through epochs every slot is just going to immediately finalize a vlog with the exception of uh these special cases where you have it in activity League Sega sword Fidelity means even more reorg security it might make ethereum more Bridge friendly um but I always will get into with layer 2 pre-confirmations signal Squad finality will not be de facto singles a lot for a lot of users and I think that's going to be an interesting nuance so finally yeah let's switch to layer 2 and protocol economics right there so how does the rise of lawyer tours affect the incentives facing uh specifically actors in The protocol at layer one um there a lot of it depends on like how how the whole leader 2 thing plays out right so one is sequencing style so uh on each research uh Justin Drake made this post about what he calls base Roll-Ups uh basically Roll-Ups that just that do uh what layer one directly do the sequencing for them versus some kind of way or two controlled sequencing where you have all your two Define sequence or option um and um all of these things what percent of layer 1D Phi will move to layer two's if the answer is zero layer twos have no impact if the answer is a hundred percent then everything depends on how the lawyer tears work and then the answer could be somewhere between zero and a hundred percent fraud proof windows and censorship that's a pretty yeah simple one uh pre-confirmations that we'll talk about and then this kind of final question which is will the switch where a lot of activity moves to all your twos make earlier one economics more boring possibly by yeah insulating the layer one from the side effects of some activity or will it make it less boring by creating more complicated interaction events so based Roll-Ups right so uh when I made my posts on Roll-Ups about two years ago one of the things that I assumed it on is basically this question of uh in a roll-up you have these batches that'd be kind of uh take a lot of transactions and commit them into lawyer one and the question is like who has the right to submit a batch option one is total Anarchy anyone can submit a batch at any time and here I said this is the simplest approach but it has important drawbacks particularly there's a risk that multiple participants will generate and attempt to submit batches in parallel only one of them will get included the suite store wasted effort in generating proofs and wasted Gauss and Publishing batches to Chin with PBS a lot of these costs really get reduced especially the gas costs get reduced right because uh you don't you can make the gas payments of a batch conditional on that batch get included and getting correctly processed and so this is something that you will have to work through the Builder ecosystem in order to do but if the Builder exists then you can do it and so suddenly the total what I call the total Anarchy approach or what Justin calls the based roll-up approach suddenly becomes viable but then there's these also other approaches right centralized sequencers you could use sequencer options you could do a dpos voting you could do random selection from a set you can combine sequence or options with dpos voting to remove the sequencer if they're abusive in some way that layer 1 doesn't detect but still really matters to users right and so there's a lot of options that are not based and there's an interesting a question of like two real Ops want to be based or not critically or two is absorb complex lawyer one even nvd if Roll-Ups are based then they can't right because layer 2ab just becomes a layer one Mev because the layer 1 uh PBS I'm a system just does and like sequencing for the layers if a large part of layer 1 defy stays on layer 1 then also no if there are other complicated interaction effects so like for example if rapidly or one transaction inclusion helps lawyer to Arbitrage and whoever the first transaction is to get included ends up just like becoming the first one that successfully can do a particular way or too Arbitrage or like if there's other interaction effects then maybe no and otherwise um you know maybe right and this is one of those interesting research questions frauded censorship pretty easy if you could censor a chain for a week and said chain doesn't social reward you then you can steal from optimistic Roll-Ups but I would argue this is not too interesting because there's like much shorter term censorship attacks that are more realistic that can seriously hurt D5 right if you get early sensor for an hour then you can do a huge amounts of nav extraction on all kinds of D5 projects like Roll-Ups or other or like unit swap like systems uh potentially yet even liquidations you might even be able to force the liquidate people and prevent them from filling up their uh sort of CDP I said you could do all kind um all kinds of stuff right and like that's also something that's worth thinking about but that's like not only or to a specific problem right it exists some layer one or a layer two pre-confirmations so users generally want faster confirmations than even 12 seconds and a lot of Roll-Ups are not even doing 12 seconds because they want to save on fees and also but it ends up increasing this a lot of time maybe from 12 seconds to 32 seconds um and so what a lot of Roll-Ups are thinking about is uh doing these uh pre-conformations right so you have an off-chain pre-confirmation protocol that pre-confirms the way your two blocks and then eventually you have a badge that kind of submits the roll-up blocks and then possibly some like proof a compact proof of the pre-confirmation into a layer one Vlog all of that gets verified and then that actually solidifies the blockout layer one right and so with this even if you have single select finality at layer one out like the user's experience is that step one they accept a yeah their transaction gets accepted it's only your two block step two with the leader two big block gets pre-confirms and then finally step three against confirms on uh layer one um so arguably this is a point in favor of ssf because uh if lawyer to everyone's using related to Arizona to South recall informations then it's okay for layer one to have vloggers a lot of times and the loggers a lot of times generally make ssf easier but still you have two tiers of Confirmation and I think the two tiers of confirmation thing might be fundamental because layer one is not willing to centralize as much as Layer Two And so where your two confirmations are always going to be faster like there's just always going to be some kind of uh curve where the user's knowledge of how confirmed their transaction is doesn't just jump from zero to 100 immediately it kind of goes up over time and so you have some notion of free confirmation that's uh inevitable now notice that when you're too pre-conformations are incompatible with based Roll-Ups right a roll-up cannot be based because if it has pre-confirmations because well the submission protocol has to force the system to respect the pre-confirmation mechanism and a set of two blocks that does not respect pre-converbations it has to just reject right and then ultimately like it would be the layer two in the pre-confirmation system that collects most of the nav instead of layer one right so uh based Roll-Ups can operate confirm which is uh I think an important thing unless you do some kind of layer one universal Cricket Ferber which could be interesting will layer 1 be more boring or less boring I mean Mike hope what I would love to see is for layer 1 to be more boring but this is not guaranteed right Warrior 2 could absorb functionality and risk lower layer 2 could create complicated interaction effects between layer 1 and Layer Two And I think ultimately um you know we need more analysis of a fully post way or two world and I think you know like Mev economics with way or two is in mind or just a yeah a really fascinating research topic though I'd say I mean we did it we'll probably continue to need a lot a lot more people thinking about for years so thank you awesome thank you for Tyler for the great talk and that actually perfectly segues into our next talk by hasu um who is going to be talking about decentralizing sequencers um and PBS in the context of roll-ups 