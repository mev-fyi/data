bankless Nation we have a bonus episode for you today because I think this uh requires almost a mid-week look at what is going on in crypto specifically what is going on with defy David so much going on with the Curve protocol I know you are fresh back from climbing mountains but um I need your help duty calls yes I need your help to understand what happened uh can you give this to the tldr of what we're going to cover in today's episode yeah so there has been a series of events which have all one has led to another there is a coding language called Viper which is a an alternative to solidity so it is a an ethereum coding language that had an exploit in the actual coding language that affected a certain number of D5 protocols across ethereum especially and most importantly curve curve which is a systemic I would call a systemically important D5 protocol because had some very important pools curved pools drained and that has LED and put pressure on the CRV token specifically because the founder of curve Michael has put up a bunch of CRV tokens as collateral across defy so just just to recap a coding language had an exploit in it which led to curve liquidations and because the founder of curve had so much CRV tokens as collateral across lending protocols we are potentially on the cusp of a liquidation a cascading liquidations of the CRV token across defy which might put holes into the balance sheets of many of these deep High lending protocols did you catch that I did and I'm so glad we we called David down from the mountains in order to uh to help us with this episode David I'm so glad you're back I think what we're trying to do in today's episode is just unpack this story and let let folks know as well that it's still developing so so we'll have more things to talk about but but really in bankless fashion we want to talk about like what just happened in the events in order to like learn from this in order to level up on crypto so we're going to discuss what happened what's currently at risk right now you might be wondering are my assets safe is this a systemic issue for all of defy how scared should I be and then finally what we can learn I think that's the that's the flow of this episode David you want to say anything else before we get ready to get in here yeah just a few more bits about curve and why it's so important I would say curve is kind of a yin to a Yang of uniswap perhaps but it's specifically meant for trading like kind assets so stable coins trade with stable coins ether trades with other versions of synthetic ether and so like staked ether trades with rocketpool ether or alchemics ether which is one of the pool strains is traded with uh you know ether so like kind assets is what curve is really really meant for and it's kind of just a huge huge amount of D5 built on top of it tvl in curve total value locked in curve was 3.2 trillion up to the point of wait billion billion billion excuse me billion trillions different number one cycle 3.2 billion down to 1.7 billion so it takes like a 30 haircut in the tvl part of that is because the hacker uh stole money but really most of it is that people kind of flee from from this and so we'll probably watch some of that tvl return uh but the the total sum of uh all of the assets uh stolen by this exploiter by this exploit is about 70 million dollars but 20-ish million dollars of the stolen money was taken back by a white hat Mev Bots which is another very interesting part of this story uh so the hacker has gotten his uh stolen assets stolen and from them and some white hat Mev Bots have returned some Capital to some pools so we have to unpack that as well and so this is going to be there's a number of different rabbit holes to go down around this this particular topic and we're going to try and take our time to point towards each individual one yeah there's there's so much to talk about and yes what you need to know at the outset of this is curve is a very important protocol in all of D5 I would say systemically important and it certainly got a bullet wound uh here so we're going to explore all of that guys we'll be right back with the episode to walk you through everything that happened what this means moving forward and to answer the question is defy safe are we going to make it uh but before we do we want to thank the sponsors that made this episode possible including Kraken which is the absolute best way to onboard into crypto go create an account are you a metamask user well you're listening to bankless so of course you are the wallet you know and love just got a whole lot better metamask portfolio is the ultimate One-Stop shop for all of your crypto needs it gives you a holistic view of your crypto portfolio across multiple chains and multiple addresses all at once you can easily View and manage all your coins tokens and nfts in one convenient place just by connecting your wallet and a mask portfolio goes beyond just viewing your portfolio though inside the portfolio you can do all the incredible money verbs that make D5 so powerful you can buy swap bridge and stake your crypto assets with ease it's like having a powerful battle station for all your D5 moves right at your fingertips so if you're looking to do more in web 3 your way metamask portfolio is the answer I already know that you have metamask wallet so go check out your metamask portfolio learn more at metamask.io portfolio mantle formerly known as bit Dao is the first dao-led web3 ecosystem all built on top of Mantle's first core product the mantle Network a brand new high performance ethereum layer 2 built using the op stack but uses eigenlayer's data availability solution instead of the expensive ethereum layer 1. not only does this reduce mantle networks gas fees by 80 but it also reduces gas fee volatility providing a more stable foundation for mantels applications the mantle treasury is one of the biggest dow-owned treasuries which is seating an ecosystem of projects from all around the web free space for mantle mantle already has sub communities from around web free onboarded like game 7 for web free gaming and buy bit for TPL and liquidity and on-ramp so if you want to build on the mantle Network mantle is offering a grants program that provides milestone-based funding to promising projects that help expand secure and decentralize mantle if you want to get started working with the first dowled layer 2 ecosystem check out mantle at mantle.xyz and follow them on Twitter at Xerox mantle arbitrum is accelerating the web 3 landscape with a suite of secure ethereum scaling Solutions hundreds of projects have already deployed onto arbitrum 1. with a flourishing defy and nft ecosys arbitrum Nova is quickly becoming a web 3 gaming Hub in Social adapts like Reddit are also calling arbitrum homes and now arbitrum orbit allows you to use Arbor from secure scaling technology to build your own layer 3 giving you access to interoperable customizable permissions with dedicated throughput all of these Technologies leverage the security and decentralization of ethereum and provide a builder experience that's intuitive familiar and fully evm compatible faster transaction speeds and significantly lower gas fees arbitrim empowers you to explore and build without compromise visit arboretum.io where you can join the community dive into the developer docs Bridge your assets and start building your first app on arbitrum and we're back pain class Nation when you hear the words evm compiler reveals a zero day vulnerability it's not a good day no that's not scary that's scary that's a very deep part of the tech stack uh and so um there's there's something that actually we need to we need to Define before we move on here there's a specific kind of vulnerability here and this is called a re-entrancy attack this is actually re-entrancy attack is actually how the Dow hack got hacked and so a re-entrancy it's a very specific type of exploit it's when a contract is um checking to see the account balance of something of someone of some asset but the attacker is able to actually execute something before the contracts are able to finish checking the state of something and so it's like you are able to remove cash from the vending machine and then without before you finish the transaction you actually just keep on pressing hey what's wrong all my money hey withdraw my money hey withdraw my money and so you you re-enter I'm doing my best as a non-dev this is really good honestly you re-enter the same like hey you owe me fifteen dollars hey you owe me 15 hey you owe me 15 and before you finish processing the transaction you just say hey withdraw my 15 you know 5 000 times and then you finish the transaction and it's 15 turns into you know 70 million that vending machine analogy is working for me like just like the the mental imagery so you know you press D5 or whatever and you got your Snickers bar but now you can keep hammering on that on that before the vending machine delivers you the stickers bar you keep on saying give me a Snickers bar and then you do as unlimited times yeah unlimited times yeah so that's a very simple like re-entrancy attack that's how the Dow hack got got hacked and sadly because in the Viper language the coding language that this uh vulnerability was expressed forgot did not have the appropriate checks re-entrancy checks so that's a very deep level of like why this is all happening to begin with just really quick on viper though okay so it's an alternative to solidity it's much less used compared to solidity I'm not a developer so someone come correct me but uh my understanding is solidity is a bit more like javascript-ish like and we're almost hardened yeah Viper is python right so it's kind of like python arrived and so it's a different language um it was supposed to be more simple a bit more functional but it hasn't had a lot of adoption but it does in in some uh in some Pockets including you know in curve what we're about to talk about yeah so we're looking at a tweet thread here from bankless HQ our our analyst Jack who just did a bang-up job really just covering all of this and so if you want to read the the Tweet thread or also the newsletter these are also fantastic sources you can also read the uh the Viper treat broadcasting the re-entracy vulnerability in the next tweet Ryan um uh the next next tab that you got or that one as well yeah and so Viper language Twitter account says Viper versions 0.2 15 16 and 3 are vulnerable to malfunctioning re-entrancy locks the investigation is ongoing but any project relying on these versions it should immediately reach out to us the project of course in question is curve as we said in the beginning and so I think we've done a pretty good job explaining what curve is but it is the to put it into a metaphor the marketplace for like kind assets it is a place where tether gets turned into die where a die gets turned into usdc where usdc gets turned into uh uh you know any other stable coin and so not all curve pools were coded in Viper only a certain number of them and the not the curve pools that were coded in Viper have all been exploited by this one exploit so a handful of contracts all for uh eth pairs um and and so there are uh one two three four pools that got exploited p e with eth pair uh Ms eth with eth from Alco mix and so this is pindle Faith uh I can't remember what Ms is it'll a metronome alchemix and then also the curve eth pair itself which is the curved Dao and so Pendle eth that is got drained for 6 000 ether that's 11 million dollars uh alchemix eth got drained for 1.6 million of ether and then 1.8 million of uh uh metronome East excuse me not in alchemics metronome alchemics got drained for 7200 oof ether which is 13.6 million and then 4.8 000 ether of alchemics ether which is 9 million and then the curve eth pool which is the source of all of this further contagion got drained for 7200 uh CR 7000 7 million 200 000 CRV tokens which is 5.1 million dollars at the time of exploit you can imagine that these curve token has gone down in price since as well as 7 700 wrapped ether out of the curve Dao as and and then also 2800 more ether uh so if you sum it all together it's about 70 million dollars um that 70 million dollars came like from I said four different protocols one of them being curve but it's really the source of this contagion and why this is getting into a bigger and bigger story is that 7.2 million curved tokens that got taken out of the curve ether pool and is now in the hands of the attacker and so that is the the recap of the assets that has been stolen out of curve okay so we'll talk about sort of why this why this matters and where we are right now because this does have some wider implications that's kind of spreading to other protocols here we'll talk about that but a quick side quest on how this actually works in practice so my understanding David is that um some Mev Bots captured some of the exploited funds here in the process right and maybe you can kind of explain how block building works and and how this um actually works I was talking to some people who are mistaking in in rocket pool uh for instance some very large um we call execution layer fees right some Mev fees were were not not donated that's the wrong word were awarded to the rocket pool uh Community essentially there's a rocket pool protocol process the block that had a significant number of Mev Bots bidding for some of the exploited funds exactly rocketpool just happened to process the block therefore a lot of these stolen funds turned into Mev and then got you know turned into rewards for Rocket pool and a few others but rocketpool has like that's where kind of the conversation is because well what does rocketpool would do with the funds like well and what doesn't answer it basically spreads all of that those Mev proceeds across all of the individuals yeah so a lot of stolen funds just got sprinkled out to individual rocket pulse takers which is interesting and I think a quick side quest here um well here's another one so one Mev by wasn't just rocket pool this is an Mev bot called um coffeebabe.eth actually returned some of the money from the exploit so I've returned to 5.4 million dollars so if you're an individual Staker right and this is kind of like a lottery system so it's bit of random chance as to whether you'll get this reward um in kind of the execution layer reward in Mev or not but if you just suddenly receive 5.4 million dollars worth of eth in ill-gotten gains the question is what do you do with it is it Finders Keepers losers weepers did you just find like oh I found 20 on the floor I mean you can't be like hey does any does anyone own this if if you find that out in public but in this case you actually kind of know who owns right the money you could trace it so what do you do do you refund it so I think it depends on the context right when we talk about rocket pool and we're taking a very early uh Rabbit Hole down this one topic before getting into the rest of the contagion event but this so this is definitely a side quest but it's this is just what happened so early in these Cascade of events coffeebabe.eth uh actually I think I need to check this if this is true Ryan but coffee the coffee babe front ran created an Mev bot after the first CRV ether Liquidation in the time that and another uh re-entrancy attack was going to happen again but the second time that the hacker tried to steal funds I don't know why they're they're what they didn't just do it all from the first from the first um uh exploit like why didn't they steal 100 of it some funds might have come in from Bots there's a bunch of extra questions here there's a lot of dust to be settled but in the time that the exploiter decided to attack the CRV East pool again coffeebabe.eath code it up Mev bot and front ran that second and then also third exploits and so in that second exploit coffee babe front ran the exploiter and got 2879 ether that was drained from the curve ether pool again and then that is now being returned to the curved deployer address which is um going to be able to actually determine where the the right uh destination of that youth goes uh but that's just because this one person figured out a way to code up this Mev bot take responsibility and control over stolen assets and stole money from a thief to return it like back to the rightful owners but like when it goes back to like okay what about a decentralized system like rocket pool like these are all interesting questions as to how to actually contend with some of these uh things yeah so I guess in this case the coffee babe case it's a bit more white hacky in that like they just exploited something the exploiter was exploiting and then so they they refunded the funds and that that to me is uh much more I guess morally clear yeah um what's less clear is the case where you have this big Mev reward and it's distributed uh across the pool of say stakers right like what what do you do do you actually and so what's interesting with Mev burn this would not have been able to happen that's the thing that's kind of the punch line I think that that is important here because what I'm worried about David is I don't know if you've seen some some Mika legislation that came down the um bike uh last week but there was some Mika legislation that basically would make it illegal to benefit from Mev of this kind like the unethical style of Mev and uh I I get worried about that when that sort of thing is settled in Meet space because then we go down this path of well do all validators have to be like checked by this day AML kyc like how does the nation-state actually enforce that because the protocol level's not anyway it's an interesting side quest but I agree with you that the best solution here is probably Mev Byrne because then at least it's credibly neutral and we sort of socialize these proceeds All Over All holders I guess you know we're socializing the guilt there I mean I would still put a white hat hacker ahead of that because just because we're burning it doesn't mean we are okay with people having their money stolen agreed um well so let's get back to the to the main event so what tweet are we looking at here okay so this is this is hey uh Taylor Monahan who we actually just did a Twitter space with talking about some of the white hat hackers and and uh you know just giving praise to Coffee babe you know truly a babe but but we need to get into the contagion event that is around CRV because as soon as CRV is sold first there's not that much liquidity right now I don't know if you notice prices Ryan but you know as bullish as we are we're still in the bear market so liquidity is already thin and then when the CRV ether pool of where CRV gets its liquidity gets exploited you would imagine that liquidity goes a a for that reason and then B Because anyone else also supplying liquidity to curve token around defy gets scared of getting dumped on so they they withdraw their liquidity so now we're at the point of the story where the the contagion is kind of um around surrounding curve the token right CRV the token yes exactly and so CRV the token liquidity starts to drain we accidentally see a flash crash of curve down to about 10 cents from 70 cents and so inside of a very small period of time curve went from 70 to 10 cents and then back up to 60 cents pretty quickly pretty quickly without liquidating curve collateral across various defy lending protocols but you can see how I mean I remember Terra Luna I I remember how how and then the curve is not terrible I would forget but you we all remember how like liquidity just drained very quickly of surrounding uh surrounding these assets when it needed it the most and so people fled for the hills and all of a sudden curve the token is in a very precarious position where it doesn't take that much cell pressure to push that price down now that wouldn't be bad like tokens are allowed to go down in price that's a normal thing to happen when this is what we do in D5 things go up in price things go down in price but that's just not it's just not where the story ends sadly uh and so the curve exploit exploiter as a result of the curve uh pool The Ether curve pool currently holds eight percent of the circulating supply of CRV uh and so that is about seven that's seven million curve tokens that we can see in the exploiter's wallet that's a lot of curve eight percent of the total circulating supplies a lot of curve especially when the hacker is capable of pressing a button and Market dumping that thing and also simultaneously liquidity providers stop providing liquidity because they don't want to be dumped on and so all of a sudden liquidity dries up and so this is setting up the dominoes the dominoes are currently set up for a bad event in curve tokens and we haven't even gotten to all of the collateralized CRV positions across D5 but you know you can guess where we go next well let's uh let's just park that for 1 second so this was the exploiter's wallet the Hacker's wallet as of the 31st so July 31st and by the way all this happened I believe um earlier in the week it was you know a bloody Sunday or bloody Monday depending on your time zone the you know August 30th or August 31st and so the state of the hackers wallet at this point in time was all of the curve tokens that you were talking about eight percent of the circulating Supply and also a whole lot of ether as well so about 14 million dollars worth of ether what's crazy about this and I know I don't have to emphasize this for you know long time crypto Natives and bankless listeners but we are witnessing uh yet again a bank heist play out in real time on the internet and we get to like we get to see it unfold step by step and I just want to pause and reflect on how crazy is that that all of this is public and the on-chain sleuths can track every single transaction here and we actually see the uh the the address of the exploiter and like we can see every single move that this person is is making in real time that to me is just we'll never will never not be crazy but uh yeah that's what's happening here yeah this is this is what the blockchain provides right like Global eyes are all watching the same addresses and the same contracts there is currently a game going on right now around CRV people that own CRV before uh you know Traders defy who D5 people who play the defy game a lot of people are watching the current state of CRV because if it's been two days the uh curve exploiter has not made a transaction in two days but that I mean curve is one button press away from basically being nuked to zero so liquidity is currently kind of like resettling itself around people are there's a new equilibrium being established but this exploiter has you know and they have seven eight percent of all curved Supply token of the curve Supply uh so it's a precarious position to be in and like I said we haven't even gotten to all the D5 lending protocols that are out there so let's talk about that next and this is where sort of the the founder of curve kind of enters as a as a main character here um the founder Michael his last name uh starts with an E I won't pronounce uh pronounce it correctly yeah that yes uh and so so Michael owns 48 of the circulating supply of curve so this is very heavy Michael has very heavy curve he hasn't sold yeah it hasn't sold but I guess maybe bullish or maybe a four seller but he has been doing something with all of those curve tokens and the thing that he has been doing with again almost 50 percent of the supply of this not very liquid token right there's a lot of it yeah uh he's been lending that out or sorry excuse me he's been borrowing against that with lending and borrowing protocols and here's a list of them here in Ave there's about 34 percent of that I'm not sure how much amount of curve um I think that's about so around the round numbers think of about curve is about 50 cents a token right now so 100 150 million dollars in Ave V2 about 25 million dollars in Abracadabra 20 million dollars in inverse Finance 12 and a half million dollars in inverse Finance excuse me 20 million dollars in fraxland uh and then you know 1.6 million dollars in staked out and 1.2 million dollars in Silo like everywhere that curve is accepted as collateral this guy called Michael Michael Michael what are you doing bro well let's so let's talk about that 48 of these circulating Supply is not just in the hands of Michael the founder of curve it is also deposited as collateral in lending protocols everywhere this guy's lover to the tits dude well we don't know well actually I think we know pretty conclusively because okay let's recap what what um a collateralized loan actually is I don't know David if you've ever been de-gen enough to actually take out a collateralized loan with a Heavenly familiar with this oh you are so you've been in the situation where you're looking at a um your liquidation number for the price of something let's call it ether right and you have a lot of your ether locked in um collateral right so that's what the The Lending protocol essentially does is you can deposit some asset in this case it's curved but you could deposit ether and then what do you get in return you get you know some stable coins let's say so maybe it's die or maybe it's you know something else in the Ave protocol and what do you do with those stable coins right oh you just put that somewhere else and interesting no I mean you don't do the responsible thing generally with these stable coins which might be like Park them in t-bills and earn an interest or I don't even know if that makes sense it would depend on kind of the the amount that you're paying for it you're probably buying something in real life you're probably betting on other tokens maybe you're so bullish on eth that you take your loan against your eth in order to buy more eth I don't know if if I'm talking to anyone in the bankless audience I don't know I don't know a single person who does this Behavior I don't know a single one dude there's only any of my friends David this almost wrecked me like with Jimmy Lee you have the reputation of being like gas and I'm like more bricks okay old Ryan uh-uh man I always gas this felt this felt very like brakesy to me but like I had a um a number oh do you remember when ether was above a thousand back in 2019 or sorry back in back in 2017 2018 yes right yeah yeah yeah I had a number I was like there's no way ether could drop below office right ether just hit fourteen hundred dollars how could it ever touch a hundred dollars let's do that so so you could take out a responsible Loan in a um like lending critical that was maybe double digits and that was responsible let me tell you uh ether went down into the 80s your boy was almost liquidated hard that day all right and so like did you do it did you have it like a compartmentalized trading account or was it like your main stack you know I'm not gonna get into the details yeah on today's episode but um yeah we've got a take that talks about this from Van Spencer later on the show let's talk about that later so so anyway so uh you've got to imagine Michael here the founder is absolutely like sweating because the value of his curve is going down he's got a liquidation number right here and then also the interest rates are going up that's that's kind of the context here as we we talk through the rest of these details yeah no that's right uh and so on Ave is the big one so on Ave Michael has 305 million curve tokens back in a 63.2 million dollar usdt loan that's tether and so the in the Ave protocol there there are liquidation parameters for any single collateral like ether is favorable liquidation parameters because there's no like there's no smart contract risk it's very liquid uh curve doesn't have nearly as favorable parameters around uh the the liquidation thresholds inside of Ave and so he gets a 50 five percent loan to value like margin uh and so 305 million dollars of curve backing a 63 million dollar loan uh and so you know that's pretty healthy but you only you know only you only get 55 of that uh and so that you know turns into if a curve price drops about 33 percent uh he would be liquidated and then he's also paying four percent apy and that is before curve got exploited uh and so went uh once all of a sudden people realized that curve the token is at risk of going to zero because there is not enough liquidity in the market to absorb a market sell from the exploiter people realize that lending um that lending stable coins to any of the marketplaces that has curve as collateral is risky because all of these lending protocols might have bad debt if curve goes to zero and all the curve tokens get liquidated but that's not enough to cover the hole then all of a sudden stable coins suppliers are left holding the bag if the protocol cannot cover the difference and so what what happened what does the rational economic actor do in this scenario well they stop taking the risk they're saying like hey they're not they're not going to take the four to ten percent apy in the result and when they might lose 50 percent uh in the next like day or so so they start withdrawing and so what happens when a D5 lending protocol has stable coins withdrawn from it the utilization ratio goes up as in more and more of a percentage of these stable coins that are lent to these Protocols are actually already being borrowed and so this is just a natural way for these you know Ave money markets systems to naturally balance themselves when there's not many stable coins there's insufficient supply of stable coins lent to the protocol and more people are borrowing them than supplying them it just tracks up the interest rates and so here's Delphi digital's tweet at 100 utilization which is for tether uh which it currently is at all tether all tether tokens all usdt Supply to Ave is being Borrowed by Michael and and others because all the uset lenders are like uh no I'm getting out so at 100 utilization the interest rate doubles every 12 hours the current payment that you pay for borrowing tether from Ave is 81 percent and that can increase to a maximum of 10 000 apy after just 3.5 days so basically like Michael's got a date with Destiny he's going to get liquidated uh at this current rate because the the interest rates are just accruing up to as well unless and too fast unless there's a hope David unless he can continue paying unless you can pan out of interest and stay ahead of it right keep just staying ahead of it you need to pay down his he needs to sell curve and for tether and pay back his loans that's what he needs to do so hard when the price is dropping right yes especially when the price is dropping yes so but this is what he did actually so he was able to sell um some of his loans uh this fee doesn't have it specifically uh we'll get there's another tweet we have later in this agenda but um he had otcs a bunch of curve and he paid he gets about um 16 million dollars yes here we go so Sandra is an account that apparently covers OTC trades uh and so here are some curve movements from Michael to other people at 17.5 million curve to an a known address 5 million curves sold to Justin Sun so Justin sun coming into bid 4.25 million curve to DCF God 2.5 million curve sold 2.5 million uh curve sold so buyers are stepping in and buying curve we do not know the price that they were uh sold for uh ignis D5 research who I think does a pretty good job uh hypothesized about four cents a token and with the current curve price of about I think 55 cents if you want to pull up coin gecko for for curve that's a pretty hefty discount 58 cents so you can go to curve or you unit swap or wherever CRV is sold right now on the market and buy a curve token for 58 cents not Financial advice not Financial advice I'm saying this is just what the market is offering is just what Market is offering you uh there's speculation that the OTC trades for a very large amount of curve tokens uh he was getting about 40 cents per token and that's just because you know if he had sold these tokens on the open market he would have gotten probably a worse rate than that so again you're Michael you don't want to get liquidated right at a very low price so what are you trying to do just trying to stay a step ahead and you're trying to like ideally pay down those loans in order for your money so what are you doing you're getting funds from other sources off chain basically right So Justin's son coming in with like a three million dollar check and buying some curve tokens OTC that just means over the counter it's just like private telegram group or something yeah Michael's like hey Justin you want to buy some curve and he's like what will you give me and then Justin's like I'll give you or you know Michael's like I'll give you this rate and you know Justin I'm sure has some Provisions that's what's happening in order for for Michael to kind of raise These funds yeah that's exactly right and so uh raising about 16 million dollars uh and so remember remember he's got him enough he's got an outstanding debt of 110 million dollars pledged against uh 290 million dollars of curve tokens uh that's before Kirk went down in price so he owes 110 million dollars and he just raised 16 million dollars it's not that's not a lot that's not a lot man he needs a little bit more margin than that you know ironically okay so this is a van Spencer take that I was talking about earlier Defending Your liquidation price on chain is a religious experience call God oh God that hits man that's that hits I have been there I have done that before so this is Michael ironically I don't mean to kick a guy when he's down but this is just too good July 22nd how many days ago was that 10 days ago still haven't still shocked that I haven't yet been affected by defy hacks oh that's unfortunate man uh yeah I mean but I guess there's an element of uh you know it is it is kind of shocking but you know now it's happening wow you can never count your chickens here yeah uh okay so this individual lives in Australia uh my hands there's a there's a few Australian D5 protocol Founders who are also I don't know if they directly are but they imply that it's kind of funny it's a funny meme on crypto Twitter that they just have these like Mansion comparison fight fight like Mansion offs if you will Michael yes Michael has not one but two mega mansions in Melbourne Australia not too far away from our good friend Anthony susano I'm Anthony Sonata does not have a mansion um that I know of not the one I've been invited to uh he bought this is actually this picture these two pictures that we're seeing at this is actually the same mansion from different angles I don't know where the other one is um this one he bought for 40 million dollars this is for the bankless listeners who are not watching the YouTube an insane house an insane property we're looking three three it's kind of nice yeah we're looking at three stories it's got to be like it could be like a 10 bedroom kind of thing there's a pool there's like a guard it's it's that is a mansion and a half let me just say we don't know the particular circumstances for Michael he could have been like made his investment money elsewhere he could have like um bought Bitcoin you know back in 2010 the proceeds but one has to wonder if some of the stable coins that he withdrew borrowed borrowed against his curve went to fund in real life things well Ryan he bought this house two months ago and he currently borrowed 110 million dollars to buy a 40 million dollar mansion I don't know if it was directly I put up money inside of Ave I withdraw stable coins send it to my bank account and buy a house with that money I don't know if it's that clear but when you buy a 40 million dollar house with 150 million dollars of stable coins borrowed that factors into your decision making at some point in time I think so as well at least I can say that factored into my decision making and again like not knowing um you know Michael's particular situation it's impossible to to to fully weigh in on it but um why why would someone do this right like one reason to do this is you don't have to sell your curve tokens there might not be liquidity if he owns 50 of the curved market right and he were to just like sell even five percent of that it's going to tank price for a while right so why sell your curve token if you're bullish on the project you're kind of the founder when you can uh lend it essentially in a protocol and you have a liquidation price you know kind of the you know the minimum amount you'll make from it that's one reason you might want to do that rather than just kind of market sell in order to buy your in real life stuff or like you know get get some money out of the system the other reason you might do it is to avoid capital gains taxes is what um wealthy people like have been doing for all the time rather than sell your actual asset you just get a loan against that asset borrow against that asset you don't have the capital gains tax event and then you can go do whatever you want with um the proceeds that might be another reason impossible to speculate but one thing I will say at this point in time is the lesson is you guys ready for it don't use leverage all right like this is a very bad position to be in I don't you know like it seems very clear that Michael does not have the liquid cash in order to pay down his loans or else he would I'm sure he's sweating this could happen to you bankless listener if you kind of play these games with volatile assets so um that is one lesson certainly we can take away from this but there are definitely other lessons well the on the whole leverage piece like yeah Leverage is a tool it requires like you really need to be thoughtful and intentful when you use it and why you're using it the mistake like to not like Leverage is a tool so like can you use leverage of course you can when you use leverage with your entire stack you don't give yourself any margin for error because you have no more bullets left uh and so when you use all your money and then you leverage all your money you got nothing you got you have no tolerance and so the thing that Michael did not account for when he was making his economic decisions like granted like he didn't he didn't account for curve getting exploited he didn't account for a re-entrancy hack and Viper and that's why we're here today but I mean he didn't have any margin for error for any sort of event like this whatsoever because he leveraged up his entire stuff I mean I will say some have made the point that this could have been intentional and that there's like a um uh there's like a perverse incentive going on here too because what you can do in a way is is if you are a um you have a large uh you know amount of some particular token you get a loan against it you sort of set your sell price as kind of a liquidation price basically um and you know if you kind of go under there's an element of you can socialize your losses to that that protocol so like some have pointed out that this is actually a um incentive mismatch at play where like hey you know um should someone be able to kind of do this in this type of scenario there's like a Founder could just rather than sell their tokens take out a loan against it and then who's the bag holder at the end of the day well we'll get to that later but maybe some of these protocols maybe Ave Gets a Haircut and so it's Ave uh token holders or you know rather than Michael in this case I see a little bit of that but I'm at the at the same time that is what the protocol is supposed to do that's what if you're lending and borrowing protocol you're supposed to manage risk appropriate in these types of scenarios so okay so moving on in the story one of the things that's going on right now is that all of these lending Protocols are realizing that they are in a precarious position for exactly what you said right the curve gets Market sold then all these lending protocols has have bad debt and so what the what are these lending protocols doing well fracks of a they're all naturally increasing the interest rates at which they are charging Michael uh and so interest rates are going up another interesting thing about this story Ryan is that Ave not too long ago had a governance proposal submitted from Gauntlet and Gauntlet does exactly this kind of thing it does economic modeling on chain so it tells you about like potential Black Swan risk events due to the parameters of liquidity for particular assets just in June 18th of this year not too long ago Gauntlet said they hey gave needs to free CRV and uh and jack up the risk parameter meters around CRV because the on-chain liquidity does not bode well for any sort of it's a precarious position and Gauntlet has identified this too risky it's too risky exactly yeah and this was actually struck down uh 100 to zero uh by Ave governance wow and so Gauntlet said hey like just you know not even 12 days ago 12 20 14 days ago two weeks ago Gauntlet was like Hey like the this curve these curve parameters are all whack they need to be fixed we need to shut down this market and Ave was like Ave governance was like nah and it was because there's a single they say this the motivation uh looking at the risk profile of this address I assume this is Michael's address yes one account has borrowed roughly 63 million dollars oh yeah that's 190 million of CRV we recommend uh yeah to one freeze CRV collateral and um they basically wreck oh they're recommending to free CRV collateral and set the curve LTV to zero is what they recommended back then that's interesting okay so actually so I'm just learning this right now in this post Gauntlet says as of June 13th uh this account Michael six has borrowed 63 tether uh a million dollars of tether against 190. so I didn't realize how recent this was but again of course recently just a few months ago uh he bought the house uh and so and then the Viper exploit happens wow right wow well this is what the um this is why it's kind of hard to govern lending and borrowing protocols isn't it this is kind of the squishy role where you have to like assess the risk of a particular asset before you let it into the lending and borrowing protocol and set kind of your threshold for how much can be borrowed against and how much you're willing to lend right and that's what's happening on these these governance forms because if you get it wrong what's the cost well your protocol your token has to essentially absorb that somehow right um you know if you have kind of a you know Insurance type of a side pocket so you're the one getting a haircut from that so it's interesting that this was um updated so close to uh to the event um I'm sure people wish they could like change their vote but can't happen a little bit late now all right so there's a few more topics that we have coming up in the rest of the show we have this protocol game of chicken that we need to talk about Martin and I are going to unpack what's really at risk here like what happens like in theory what would happen if there is a cascading liquidation event what happens if Michael does get liquidated uh what happens to that is there a systemic risk in defy and then we got some takes in what we are going to be able to pull out as learning lessons from this event so all that is coming up right after we talk to some of these fantastic sponsors that make this show possible especially metamask and metamask brand new feature metamask portfolio which can give you the lay of the land for all of your collateralized positions that maybe you should keep a better eye on as we go into this bull market let's go here from metamask right now are you a metamask user well you're listening to bank lists so of course you are the wallet you know and love just got a whole lot better metamask portfolio is the ultimate One-Stop shop for all of your crypto needs it gives you a holistic view of your crypto portfolio across multiple chains and multiple addresses all at once you can easily View and manage all your coins tokens and nfts in one convenient place just by connecting your wallet metamask portfolio goes beyond just viewing your portfolio though inside the portfolio you can do all the incredible money verbs that make D5 so powerful you can buy swap bridge and stake your crypto assets with ease it's like having a powerful battle station for all your D5 moves right at your fingertips so if you're looking to do more in web 3 your way metamask portfolio is the answer I already know that you have metamask wallet so go check out your metamask portfolio learn more at metamask.io portfolio mantle formerly known as bit Dao is the first dao-led web3 ecosystem all built on top of Mantle's first core product the mantle Network a brand new high performance ethereum layer 2 built using the op stack but uses eigenlayer's data availability solution instead of the expensive ethereum layer 1. not only does this reduce mantle networks gas fees by 80 but it also reduces gas fee volatility providing a more stable foundation for Mantle's applications the mantle treasury is one of the biggest dow-owned treasuries which is seating an ecosystem of projects from all around the web free space for mantle mantle already has sub communities from around web3 onboarded like game 7 for web free gaming and buy bit for tvl and liquidity and on-ramp so if you want to build on the mantle Network mantle is offering a grants program that provides milestone-based funding to promising projects that help expand secure and decentralize mantle if you want to get started working with the first dowled layer 2 ecosystem check out mantle at mantle.xyz and follow them on Twitter at Xerox mantle arbitrum is accelerating the web 3 landscape with a suite of secure ethereum scaling Solutions hundreds of projects have already deployed onto arbitrum 1. with a flourishing defy and nft ecosis arbitrim Nova is quickly becoming a web 3 gaming Hub in Social dapps like Reddit are also calling arbitrum homes and now arbitrum orbit allows you to use Arbor from secure scaling technology to build your own layer 3 giving you access to interoperable customizable permissions with dedicated throughput all of these Technologies leverage the security and decentralization of ethereum and provide a builder experience that's intuitive familiar and fully evm compatible faster transaction speeds and significantly lower gas fees arbitrim empowers you to explore and build without compromise visit arbitrum.io where you can join the community dive into the developer docs Bridge your assets and start building your first app on arbitrum one of the big parallels Ryan that I think I remember after covering the three arrows Capital liquidation was that a very low number of people can actually be the reason of systemic contagion in crypto remember when three hours capital is getting created they were doing whatever they can pulling out all the stops to borrow as much money from different corners of the crypto ecosystem as possible and that's how like Voyager block fi uh you know any lender that would lend money to Fierce Capital all got effed because three-hour Capital was the contagion and so I actually see a similar pattern that's one of the big learning lessons between that and this is Michael put curve in every single place in defy that would allow him to collateralize curve and so now all this this is how the contagion happened one single actor actually spread out all of the contagion and because of the weakness in the curve all of a sudden this is how contagion Works uh Ave for example where the biggest loan position is actually does have an insurance fund and so they have the safety module which grows and grows and grows from fees collected by the Ave uh Dao so there's 327 million dollars in the Ave safety module which is actually more than enough to pay for any sort of hole that Michael may leave in Ave there's one problem here which is that that safety module 327 million dollars is actually denominated in Ave so there's a little bit of reflexivity there and so if Ave I think if the worst case scenario they would have to cover like 80 million dollars or 60 million dollars uh of of curve in Ave and so like if they you they were gonna have to sell Ave into the market and to cover that loss which means that the actual size of that safety module is also precarious because it's denominated in its own token yeah but that's one of these another one that's the token holder haircut they were talking that's the token holder haircut yeah that sale is going to affect the price of uh Ave yeah same exact mechanism is when mkr has to get sold to cover for die bad die debt which actually only happened once uh which was black Thursday right during covid uh when you were getting I remember that how much was that that was a just a few million it wasn't that much it was yeah 12 million I think it was but 12 million back then was actually a decent number of amount of money because we were all super broke uh in all of crypto was broke but yeah that's the kind of the precarious nature of like using your protocol's own token as the defense as the line of defense I think that's very precarious like that's systemically um yeah that's a great Point here but yeah at least they have at least they've got it yes um I alluded to this early but I'll double down on it now uh because Michael had a curve all over lending protocols different lending Protocols are all realizing that they need to get paid back first or else they might not get paid back at all uh and so uh Michael rushed to repay the loan on fraxland first because that's where the borrowing rates were highest uh and so now naturally all the other protocols with curve collateral also want to increase the borrowing rates because they're like I mean this is this has happened I don't want to be they don't want to play today yeah so they're like okay we need to jack up the rate so Michael pays us back first and so there's this like protocol game of chicken going around because no protocol wants to be holding the back uh and so who are these protocols we talked about them earlier but magic internet money MIM uh inverse Finance Silo Dow and Ave are all these different protocols that are all figuring out how to deal with this problem Silo Dao has for some reason is Chill um says ignis from D5 research uh D5 research is just what he does uh because the risk is isolated that's a must be a specific design for an a for a money market um but each one of these protocol dowels are like figuring out like hey we we don't want to hold the bag let's jack up the interest rates well that's a real like trap because like we would all be better off like everyone just put the interest rates like honestly at this point like we're rooting for Michael like all of D5 wants him not to get liquidated or it causes bad things at this point in time so rooting for his positions anyway way yeah and um you know but what happens is when you have this kind of prisoner slim of the scheme of chicken then you're incented to kind of defect first yep and the you know the faster they defect and the more they raise interest rates the more likely it is that Michael gets liquidated and so that's kind of it's kind of a bad race condition uh that's happening right now yeah so that's what's currently going on with it with the amms um what else is there to talk about uh it's systemic risk to defy is there systemic risk to defy I don't think so I don't think these holes are that big where like I have I currently have an Ave position uh it's not curve denominated uh and I'm not lending Stables into Abe uh I'm not necessarily too worried I don't really think I don't feel like I'm at risk um I do hold Ave tokens but I mean I've hold them down to lower numbers than what they might go to so I'm not particularly worried about that either uh I don't think there's that much Contagion but but there's a big fog of War here I agree I mean the thing affected right now the contagion seems to be primarily focused on the CRV token itself and then everything is corrected and so there's a question of like um well you know the contagions kind of spread to these lending and borrowing protocols uh essentially and it's not going to be existential probably for any of them but it but it is a haircut right it's like some pain and you know the question is well um will they look at these governance protocol like these governance proposals um a bit more carefully when they're from Gauntlet or something and there's like one single you know holder with a very large uh portion of the of the of the lent amount I think the answer is yes and that that is how we all level up together but I don't I agree with you David I don't think that at this point in time this um spreads systemically across all of D5 um so that is good because reality is this could have been a lot worse right yes zero day Viper evm bug right again you said at the very beginning those are those are words you do not want to hear and so we are like we are hashtag blessed that this wasn't uh like far worse event at this point in time well not knock on wood because it's not over I just sent you a a tweet in the zoom chat if you want to pull that up from Delphi digital uh so this is the current as of about 24 hours ago yeah 24 hours ago this is the current uh positions that um Michael has so Ave fraxon Abracadabra a 54 million dollars owed eight million dollars owed 14 million dollars owed uh with all the different collaterals and different liquidation prices he's currently paying he might have already paid off the frax he's currently paying 124 apy on eight million dollars borrowed from frax he's currently paying 50 apy on 54 million dollars borrowed from ABE and then 18 on 14 million dollars borrowed from Abracadabra liquidation price the highest one is at Ave which is also the biggest position at 37 cents so that is the line that curve must stay above in order to prevent any sort of cascading liquidation unless Michael can somehow raise more to raise more Capital yeah chain and pay down um those loans but 37 cents is the number to say above what's what's the current price of curve you want to open up that coin Gekko current price of curve 58 cents so he has room he's paying a lot he's paying a lot chart doesn't look great but 58 cents to 38 cents that's there's a chance for sure you can make it this is like a if he makes it you can make it wow but like this is like watching a slow motion train wreck that that actually might not happen yeah like it's just like it looks like it's about to happen but it might not happen it might not might be able to bail this out uh Rin Christensen how to take your curve getting exploited risk of bad debt and liquidations in the ecosystem this might seem like it's an over moment but perhaps it's just Cycles uh this Cycles black Thursday that's the one you were referring to um would know a thing or two [Laughter] because this may be the last crash before the bull market with everything coming back 100 x stronger uh yeah well there's an element of that maybe I think that's right I think that could be I like to pass or match history I love I love that I like gold markets yeah and this is this guy would know a thing or two about because roon he's a Founder maker Dao he was definitely paying attention when uh maker Dao had its black Thursday now we're having black Sunday Monday well so let's talk about this let's end the episode here David with uh what do you think we we learned from all of this um what's what's your take on the lessons here the biggest thing that's rattling around in my brain is man curve had a lot of Lindy that protocol was deemed safe what do you mean Lindy Lindy um Lindy is how would you explain Lindy very simply always if you like to use the example what do you think is going to be around what would you make a bet on in being around in a longer amount of time the pyramids of Egypt or the White House it's clearly Egypt right yeah because the White House is like a couple it's like 100 years old in fact the first White House burned down and so it's Lindy got reset very quickly uh and fun fact this we're on the second White House already pyramids of Egypt have been around for thousands of years so like what are you gonna bet on to be around for another thousands of years the thing that's already been around for a thousand years curve had a lot of lending it had a lot of tvl for a very long amount of time and then it got hacked I think this might set the record as like the longest Lindy resetting event in d5's history I think that's probably correct and that hurts but you know what's also interesting here is like it also wasn't curve's fault at all yeah I think there's I think there's a lesson here and that lesson is almost like scary so this wasn't like a smart contract risk where uh Michael and the curve team the developers over there could have been more careful wish they had audited more that sort of thing right this was deeper in the stack yeah that's as deep as it goes this is a problem at the kind of evm compiler level with a Viper specifically a couple of versions of Viper right it was like introduced at one point in time and then and then it kind of like it you know is no longer the case in the newest versions of a viper it was like accidentally introduced that in itself is kind of scary so we might say that um solidity has a stronger Lindy than Viper because it's an older language and it also has more um assets that are dependent on it's more vetted right and so I think there's a lesson here of um well again what do we always say at the end of every bankless podcast crypto is risky you could lose what you put in like the lesson is you never know but then there's also a question of what other zero day bugs lurk in the code base out here and I do think that you know solidity evm is becoming a bit more like Egypt you know pyramids and I wonder and worry about some of the newer languages and other ecosystems at some point in time something like Solana is going to have its Viper compiler moment yeah yeah Viper itself which is interesting what's the future of Viper who's going to use it moving forward right yeah so there's there's that kind of learning here the last thing I'll say is um is this an example do you think of like okay so Viper is a public good right um I I guess I feel like all of the all many of the actors uh who have some responsibility for this you know are kind of like feeling feeling the brunt of this so in that way D5 is kind of Performing as expected it's not like socializing the losses to you know the public right so if you if you're in Ave and you chose to lend more money to curve kind of knowing the risks here well you get a haircut that's as it should be right um if you are Michael and you're like lending all of this CRV inside of a protocol and taking excessive leverage well you you get hit too and so you're kind of you know I guess punished for this and of course curve is uh as with all D5 protocols appropriately risky so from my perspective it kind of Defy is performing um as expected except that there's this one thing this public good that we call Viper an evm language how well-funded is that right right it's like the public infrastructure that we're really not paying attention to and so I there's probably other places like this inside of crypto that are woefully underfunded but should be funded far better and should be audited and should be vetted far better because like that's atlas's shoulders that the entire thing is is kind of hanging on so that's another takeaway to me yeah and this is something that you can audit you can vet you can audit again you can audit again you'll never know you'll never actually know you're muted is there anything comforting here as we entered um I mean we made it right that's good we made it did we we did we made it I mean imagine if this had been a solidity like evm issue yeah right happens then yeah what doesn't kill defy does make it stronger yeah I guess that's the takeaway yeah and and all of the protocols performed as expected according to the rules we didn't socialize losses there were no bailouts I don't know there's a silver lining there David I think I'm gonna take a few moments to try and think of some more silver linings but we'll do it on the weekly roll-up tomorrow guys that's it we gotta end with this I think quite appropriately risks and disclaimers crypto is risky so it's D5 you could lose what you put in but we are headed west this is definitely the frontier it's not for everyone but we're glad you're with us on the bankless journey thanks a lot 