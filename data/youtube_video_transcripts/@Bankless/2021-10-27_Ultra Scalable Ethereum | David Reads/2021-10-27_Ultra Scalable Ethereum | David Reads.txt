hello everyone today we are releasing ultra scalable ethereum on the bankless newsletter and if you want additional content to that there is a paired state of the nation where me and ryan unpack this uh same content in a different format um but this was the piece of content that ryan and i based that episode on so here it is ultra scalable ethereum ethereum development is reaching a new level of maturation the gap between where ethereum currently stands and its defined roadmap is rapidly shrinking now that we're at this phase it's become clear that ethereum is developing a modular design architecture the properties that make a blockchain a blockchain are being differentiated and compartmentalized in order to allow each one to become individually maximized in this article we'll explore how proof-of-stake sharding and roll-ups enable a modular blockchain design that actualizes the long-term vision of ethereum and sets the standards for blockchains going forward the blockchain trilemma the infamous blockchain trilemma dictates that you can only optimize for two of the three properties of a blockchain one must be sacrificed due to technical limitations those three properties of a blockchain are scalability how much data throughput is does the system have how many transactions per second decentralization how many nodes are there what are the centers of power security how difficult is it to attack so why is it the case why can't blockchains achieve sufficient decentralization security and scalability in one go because blockchains are monolithic they try to achieve all three goals on the main chain but when you modularize the components however the limitations of the blockchain trilemma disappear as an analogy think of the division of labor this economic principle partitions a complex task into smaller components that individual individuals can specialize in allowing the entire system to produce far more output than the same number of workers each working alone so what does a modular blockchain look like and how does it work before we get there we need to understand the three components of a blockchain that make up the three properties described above components of a blockchain decentralization scalability and security are all properties of a blockchain they are traits a blockchain can embody but there are underlying components that enable these properties modular blockchains divide these components into separate parts and maximize them so what are they consensus consensus provides security and defines the canonical truth about data stored in the blockchain what block number are we on what are the contents on block number n execution execution is the computation required to update the blockchain from block n to block n plus one taking the old state adding a bunch of transactions and getting the transitions to a new state data availability data in the l1 guarantees is a data availability is data that the l1 guarantees is available to be referenced all the data that makes up block n before diving deeper let's get familiar and use these terms with an analogy it's a wednesday morning and you're heading to your local wells fargo branch office to deposit your check for 100 the state of your account is your bank balance which is sitting at a healthy 69 420 all the previous account transactions from from inception up until now are contained in the data availability data availability layer of wells fargo a centralized database hosted and secured by the company when a bank teller processes your check wells fargo executes a state transition against the data availability layer to update your balance to 69 520. the n plus one state 69520 is now reflected on your wells fargo mobile app web app and other branch locations there is consensus because all updates take place on a centralized database that only people with the right credentials can access now in blockchain terms consensus consensus defines the canonical truth about data stored on the blockchain in these categories we find proof of work and proof of stake these are the systems that define how blocks are added to the chain and how participants can agree that the boxer blocks are correct with this blockchains can progress forward in time without fracturing into a million different chains each with their own version of what is true execution the execution property of a blockchain is where the state of a blockchain is carried forward into the next block block n has some specific state represented by how data has changed from block n minus one account balances contract code etc validators then grab a bunch of transactions from the mempool and create state updates to block n by producing block n plus one which has taken the state of block n and changed it according to the transactions that have been pulled from the mempool the mempool is like a number of people waiting in line to go see the bank teller transactions are executed when a validator computes the new state of the next block using the selected manpool transactions as inputs along with the consensus mechanisms data availability data availability refers to the data hosted on each blockchain node if there's data on the nodes it's available to anyone and everyone using the blockchain there are no dependencies on this data it's available full stop this also makes data very precious and expensive an extremely limited amount of this data available we call it block space when you add a bit of data to the blockchain you're adding that data to all computers running the node now and forever the purposes of a blockchain are to be immutable which means that the data held inside of these systems are quite literally the most valuable kind of data data ever created by humanity everyone wants their data their transactions to be immutable so people bid very high prices to access these properties which is why we see very high gas prices on the ethereum l1 monolithic blockchains monolithic blockchains are blockchains that try to do all three things consensus execution and data availability all in the same spot on the layer one basically every blockchain so far including ethereum as it currently stands is a monolithic blockchain the problem with monolithic blockchains is they are subject to the blockchain trilemma because the same layer is responsible for all three components of what makes a blockchain a blockchain optimizing for one property of a blockchain is constraining for the others want more block space available by making faster block times and bigger blocks then you have to decrease the number of nodes that can keep up with the chain's rate of progress that way the slow computers of the world won't hold back the speed of the chain want fast transactions reduce the number of nodes so fewer total computers actually need to do the computation that way that way we don't have a bunch of redundant computers all doing the same computation we'll just trust that the few ones that do the hard work of the computation aren't lying to the network want to optimize for security and decentralization decrease the supply of block space and reduce your node hardware requirements so that everyone can be a participant in the network but expect your transactions to take much longer to clear monolithic blockchains have gotten us this far but now they are hitting the limits to scale the era of monolithic blockchains is coming to an end the era of modular blockchains is upon us one sec modular blockchains modular blockchains take the three components that monolithic blockchains currently house on the l1 and com par compartmentalize them just like with the division of labor unbundling each component allows us to optimize each and produce a far better product in which the whole is greater than the sum of the parts here's a nice little diagram modular execution with rollups rollups can process transactions orders of magnitude faster than the main chain rollups are unburdened from the responsibility of consensus and data availability by creating a transaction execution environment separate from ethereum and processing the transactions before making an update to the state of the l1 roll-ups do not have to concern themselves with consensus or data availability in the same way that highly decentralized l1s do they are free to make any and all sacrifices on these properties because roll-ups are cryptographically tied to ethereum in other words roll-ups are generated by making a transaction on ethereum to a set of rules that the roll-up commits to following the moment a roll-up is initialized it makes a cryptographic promise to ethereum that it will follow the rules for the harry potter fans out there it's like the unbreakable vow you can't break it if you break it you die you literally can't do it that's what the power of cryptography does this initial vowel of rollups sets its own limitations on how transactions are managed i.e the roll-up commits to showing mathematical proofs of all transactions are legitimate and it's how ethereum's l1 security is bridged to a roll-up without also porting over its baggage of slow consensus and limited data availability contained inside this roll-up initializing transaction is the ability for any user to exit all of their money from the roll-up this is called the escape hatch and it means that when a roll-up breaks or turns malicious you can just hop out of the escape hatch via a transaction on the layer one a broken roll-up is like a broken escalator it just turns into stairs the bridge between a roll-up and ethereum exists regardless of whether a roll-up is online and functioning and allows the settlement assurances of ethereum to extend to the roll-up on top of it this bridge connects the security and decentralization of ethereum to the transaction execution environment of the roll-up with this bridge each module of ethereum complements each other the security module proof-of-stake is added to the scalability module rollups the properties of one module imbue themselves into the properties of the other and it's how we uh and it's how we achieve both scale and decentralization without compromising each other roll-ups cost nearly nothing to maintain sorry one moment roll-ups cost nearly nothing to maintain and very few nodes are required to be live at any given time and they are also not burned by expensive consensus consensus mechanisms that are needed for security ethereum's l1 pays for security it maintains decentralization so the roll-ups don't have to certain flavors of rollups can even be as formal performance as a centralized server hello coinbase fortnite and facebook but now with decentralization further innovations to rollups can actually make them even more performant than centralized databases modular security with proof-of-stake validators proof-of-stake consensus mechanism creates an intangible object that is responsible for providing security to the system that object is the virtual currency that is being staked to the proof of stake network the act of using the native currency to validate the chain decouples the association between physical hardware and network security no longer are specific computers responsible for network security now all computers can become responsible for network security because eth can be staked on any internet connected computer this formally instantiates the value of providing security to ethereum into the asset itself the capital requirement to maintain a physical proof of work network can instead be funneled into buying the virtual asic the proof of stake token and increasing the capital efficiency of the asset unlike physical hardware proof of stake assets don't deteriorate over time so little to none needs to be sold as operating expenses reducing the economic cost of running a validated node down to the cost of capital 32 ether and a computer the one you're on increases the viable number of possible validators on a blockchain while 32 ether is expensive roughly 128 thousand dollars it is an order of magnitude lower than the smallest viable proof of work mining operation which is likely over tens of millions of dollars additionally decentralized taking protocols like lido or rocket pool allow eth to become pooled making the 32 eth limit an arbitrary number the yield you get from owning 3.2 ether 320 eath is mostly the same and will approach parity over time a proof of sake network strips away the hardware requirements for validating the chain making the average consumer device powerful enough to validate the chain this optimizes the connection between network and hardware by minimizing the role of hardware you maximize the accessibility of the chain and open up the possibility of validating the chain to the maximum number of people proof of stake minimizes the hardware requirements by down to the absolute minimum capital excuse me proof of stake minimizes the requirements of network validation down to the absolute minimum capital as a result of proof of sake ethereum now has two homogeneous pools that when combined together become one modular pool of network security this is called the validator pool and is where ethereum sources its security from ethereum developers have stated a desire to see 10 million ether stick to the ethereum network in order for ethereum to become considered secure 10 million ether divided by 32 eth per validator generates 300 and 1200 000 validators the granularization of ethereum security into individual validating instances allows these instances to be directed to the beacon chain wherever these resources need to go excuse me allowed to be directed by the beacon chain to wherever these resources need to go giving ethereum maximum choice as to how to allocate its security resources having a modular pool of security allows enables ethereum to modulize this data storage capacity via sharding so here we go sharding maximize data availability via sharding shards maximize the block space available on the l1 all blockchains have a certain supply of a security available to it the security to bitcoin is the supply of sha-256 hashes that the world can produce the security of proof-of-stake ethereum is the supply of ethereum validators that exists in the validator pool ethereum has a validator pool of all ethereum validators that are set up for random selection to validate an ethereum block when more validators come in line and supply their security 32 eth on the promise to follow the rules ethereum to ethereum it makes ethereum more secure when you add in sharding it will also make ethereum more scalable shards sharding allow for a redistribution of security across a higher number of chains rather than having all of the system security wholly pointed upon one single monolithic chain having three hundred thousand validators three hundred thousand instances of 32 ether staked all securing one monolithic chain is an over abundance of security and an inefficient allocation allocation of precious resources by spreading out validators across multiple chains ethereum's l1 can scale by creating 64 ethereums each one having roughly 4500 validators on each chain this makes ethereum scalability positively correlated with its security while a monolithic blockchain approaches the limits determined by the blockchain trilemma a sharded blockchain inverts the relationship between scale and security it turns its limiting factors into its growth factors sharded ethereum is slated to have 64 shards at this at the start but the goal is to get up to 1024 shards additionally moore's law as as moore's law progresses and all of our household computers get more powerful shards can increase in both quantity and capacity having 64 shards at the uh at genesis won't mean that we're increasing ethereum's capacity by 64x rather a number of ethereum chains the the number of ethereum chains will have gone up by 64 times there will be literally 64 different block chains but the size of each chain will be roughly one third as large as uh the current monolithic ethereum chain so overall ethereum gets about a 18 18x increase in size but as stated above the physical hardware as physical hardware improves in ethereum's validator pool increases we can improve increase both the size and supply of shards which importantly links ethereum scalability to moore's law so here's a little graphic i have of the beacon chain with with its pool of validators and the beacon chain is working on validating a block so it sends all of the validators to each shard kind of like a line up in groups of ten and then we have as many groups of 10 as possible and then boom that's as many charts we have this is not actually technically how it works it's just a metaphor all right getting into synergies between optimized modules the beauty of the modular design is that the optimizations of each module amplify the optimizations in the others there are three synergies modular proof of stake security can redistribute validators across more shards as more validators come online and can securely support additional data more decentralization means more scale additional shards on the l1 have amplified effects upon the execution capacity of rollups rollouts can compress a lot of data before it adds it to an l1 chart so any additional space that shards have have outsized impacts upon this available available space on rollups more scale means faster execution the more net transaction activity that happens on the roll-ups the more total fees are paid for buying l1 block space more total fees paid for block space increases the revenue paid to l1 validators the more validators are paid the larger the incentive there is to spin up additional validators adding more validators to the layer 1 adds more computational resources that can create more shards more shards go back to step 2 and repeat more scale faster execution by sharding ethereum into 64 different data availability layers we create much more space for rollups to deploy their bundles of transactions and doubt their bundles of thousands and thousands of transactions sharding the l1 has outsized impacts to the scalability of rollups on the l2 because rollups compress transactions into compact bundles any increases of data on the l1 creates orders of magnitude more space on the l2 this is where ethereum gets microtransaction capable charted ethereum is where the floodgates open for all roll-ups increasing the amount of block space that's available to consume creates a massive free reductions on the shar of the shards of the roll-ups on top of the shards the compressed roll-up transactions think a zip file now has much more supply in a has more supply of available block space roll-ups amortize their cost of their l1 transactions across all the users of the roll-up if it costs one each to deploy a big bundle of transactions to ethereum it will spread that one eth a cost over thousands of transactors in that bundle when we have 60 top four times more shards to deploy transactions upon the cost per transaction should drop by orders of magnitude which also increases the number of total transaction transactions that the cost of the rollups can be amortized over sorry once this occurs rollups are free to stop constraining their own amount of available block space as they currently do and really let the engine rev the combination of shards and rollups allows for computational resources to become assets to the network rather than liabilities more computers of any computational power can always contribute their resources to the network and have those resources become effectively utilized regardless of how much resources that computer has available to give a computer can either be a roll-up validator and help compress data to the l1 or can contribute its resources to the l1 validator pool and help spin up more shards adding your node to a monolithic blockchain adds another bottleneck to the network must get through a monolithic blockchain cannot process more transactions than a single node can since all monolithic chains uh all monolithic chain nodes process all transactions adding your computer to the monolithic network simply adds just another computer that needs to keep up with the network economic sustainability modular ethereum is an economically sustainable ethereum in this indus this is the industry of crypto economics and we need to get our economics right in order to get in addition to our cryptography in economics gresham's law is the monetary principle stating that bad money drives out good when someone is presented with two different monies they will save the one that retains this value and spend the one that is losing its value with fiat currencies we see people fleeing to the currency that is losing its value the least which is the dollar but now in the world of sci-fi economics aka crypto economics we can dream bigger dreams than not just losing value instead in the crypto world we can ask what currency is going to grow the most in value rather than losing the most in value bitcoiners are very excited about btc as the first hard cap money that is promised to retain its purchasing power by being immune to future issuance bitcoin promises to become more scarce as the economy grows around it the same supply of bitcoin but inside of a bigger economy equals comparatively more scarce btc ethereums are excited about eth and its ability to be burnt as a function of demand for the ethereum network and the possibility of becoming deflationary as opposed to bitcoin's disinflationary as a result of burning more eth than issuing via eip15559 a bigger economy equals a higher eth burn rate which creates an increasingly scarce eath transaction fees equal monetary premium turning gresham's law into crypto economic terms networks need to collect more transaction fees than what is being issued to validators crypto economic networks pay their security providers via issuance and fees using fee revenue to pay for security displaces the amount of issuance that is required the more fees a blockchain collects the less it needs to inflate supply through issuance collect more issue less herein lies the problem with scaling a monolithic blockchain many blockchains promise low fees and high throughput by committing to this they are simultaneously committing to never creating a meaningful fee market if you want block space to be cheap you must not rely on transaction fees to pay for security therefore you must rely on issuance which in gresham terms would be called bad money an excerpt from polynya's writing let's consider polygon proof of stake and solana polygon proof mistake is collecting roughly fifty thousand dollars a day in transaction fees or roughly 18 million dollars annualized meanwhile it's distributing well over 400 million dollars in inflationary rewards that's an incredible net loss of 95 percent as for solana it collected only ten thousand dollars a day for the longest time but with a speculative mania has recently seen it's seen a significant increase to a hundred thousand dollars a day or 36.5 million dollars annualized solana is giving out even an even more astounding 4 billion dollars in inflationary rewards leading to a net loss of 19 uh 99.2 percent this uh data is actually old uh since then solana has increased in price and so it is now giving away four uh six billion dollars in inflationary reward so what 99.5 that means that it's giving away 99 of all the money that it is either giving away or taking in as revenue it's giving away 99.5 of it and it only takes in 0.5 ish percent of revenue so it's completely unsustainable way too much issuance way very very little being collected uh that is like a government just issuing a bunch of money and collecting almost nothing in taxes it doesn't work it's just unsustainable as as a thought experiment solano would need to do 154 thousand 154 000 transactions per second at the current transaction fee rate just to break even which is totally impossible given current hardware and bandwidth the bigger issue though is that these those additional transactions don't come for free free they add greater bandwidth requirements greater state blow and in general higher system requirements still which reduces the number of network participants that can actually come to secure solana to down to a very low number of people that actually have the hardware to run a node so while all this issuance is being given out very few people are able to actually collect that issuance the critical feature of economic sustainability is that it compounds in both directions a constrained layer 1 establishes a strong fee market by limiting the amount of available block space you increase both decentralization by reducing the hardware requirements of participating nodes and you increase fee revenue by limiting the supply of block space available scarce block space creates high fee revenue which generates a high eth burn rate which makes eth more scarce making it more valuable the more valuable a currency is the less is needed to issue in order to achieve the same impact upon security therefore security actually becomes cheaper to pay for when the value of the currency is high under a cheap security paradigm you further reduce net new issuance because you are simply issuing less and this further compounds the scarcity of the value of the asset when ether or any proof of stake asset it becomes increasingly valuable you don't have to issue as much of it to pay for validators because it's worth more going in the opposite direction it all unwinds change that advertise a cheap fee environment cannot collect any meaningful fee revenue or else it would have fees if you cannot collect fees you must pay for security via issuance if you pay for security via issuance then the currency inflates and leaks value over time over time being an inflationary currency is simply adding supply to the currency and reducing its value on the secondary market reduced value means you must issue more to pay for security further issuance inflates supply and devalues the money and represents the beginning stages of an inflationary spiral if your currency that you're paying that you're using to pay for security becomes less valued because you're issuing it you have to issue more in order to pay for the same amount of security while bull market speculation can mask this effect for a while there is no escaping economic law currencies that issue will not hold their value as much as currencies that burn and these two paths will result in dramatically different futures there is a direct correlation between the throughput of the l1 and the soundness of the money that powers it if you juice up the throughput of your chain you increase the inflation of the asset sadly you also increase when you also increase the throughput of your chain you reduce the ability for the average person to become a validator this separates the community that surrounds the blockchain into two classes of citizens the ones that have the means to validate the chains and those are the ones that have the rights to senior edge the newly issued coined and those that don't and can only purchase the senior age from the validators that sell it to them separating your your ecosystem into two classes of citizens is bad bad news don't do that tying it all together all right here's where we sum everything up ethereum has a constrained layer 1 that optimizes for strong decentralization and efficient security this block space constrained l1 creates an expensive fee market that adds monetary premium into eth sharding increases available l1 block space as a function of the size of the ethereum security as ethereum's pool of validators grows larger the number of viable shards also goes up making ethereum more scalable as it grows in decentralization roll ups create unconstrained execution environments that bundle up transactions and compress them into the tiniest possible packet of data this unlocks new types of economic activity and allows a vibrant and cheap economy to flourish increasing the net economic economic activity that settles on the l1 as more economic activity develops on the roll-ups roll-ups fees drop as they are amortized across a wider set of participants as more shards are added to ethereum and as shards become larger roll-up fees continue to lower as a function of moore's law unlocking microtransaction viability increases the total amount of viable economic activity that can be supported allowing net economic activity orders of magnitude more headroom to operate which is all funneled down to the ethereum l1 via a series of compressions and commitments across various layers and all collapses to the competitive fee market on the l1 burning eth as a function of total economic activity beauty of the modular design is that it optimizes to each module excuse me the beauty of the modular design is that optimizations to each module amplifies the optimizations to the other increasing decentralization via proof of stake increases the number of shards added to ethereum more shards on the ethereum l1 added adds more magnitudes of more scale to the rollups on the l2 more scale-ups on roll-up l2s unlock newly viable economic activity which ultimately adds more collective fees paid to the roll ups to the l1 more collective fees paid to the l1 increases the incentive to run a validator making the pool of validators larger allowing for more shards to be created repeat execution optimized monolithic blockchains every bull market there comes a new cohort of chains that elect to sacrifice decentralization in order to optimize for the execution property of a blockchain they increase the block size and constrain the nodes so that the the exuberance of a bull marking can find a home with cheap fees in bull markets ethereum and bitcoin become extremely congested because they have optimized for decentralization which gives legitimacy to the chains that optimize for the opposing property transaction execution as discussed above monolithic blockchains that optimize for execution have committed to a few shortcomings they cannot collect meaningful fees and they have sacrificed decentralization if this execution optimized to monolith the blockchain insteads instead rolls itself up on an as an l2 on a different l1 chain it could actually become even more optimized for execution while not having to deal with the constraining factors of security and decentralization the l1 asset no longer needs to be issued to pacer for security since security is derived from the l1 eliminating the inflation from a supply schedule allows the smaller gas markets to have an outsized impact upon the long-term supply of the native asset chains like solana finance smart chain avalanche and polygon all may need to roll themselves up in order to derive long chain long-term sustainability into their token and in fact the sooner they roll themselves up the scarcer their native asset uh can become from the words of paulinaya i used to think that this is the most pragmatic approach but now i think there's too much capital and hubris invested in uh in monolithic projects for them to take this rollup only approach anytime soon the one that does will be a pioneer and gain immense network effects though the logical conclusion the world of crypto is rife with tribalism and politics statements uttered by one person crypto is tainted by which tribe that person comes from incentives and motivations are driven by pre-existing beliefs and back bias thankfully code and math are immune from also all these things the above the entire above article is able to be rewritten without using the word ethereum and instead could be an agnostic roadmap for generally optimized modular blockchain in fact this architecture is not being executed by ethereum alone roll-ups are not just an ethereum thing tezos is also break embracing a roll-up-centric roadmap nir is also designing for sharded data availability celestia is building a security and data availability availability layer exclusively for rollups the point is if we went back in time or hopped to a different parallel universe and re-rolled the dice ten thousand times the crypto industry would find itself at a modular design conclusion 99.9 percent of the time it is simply the logical conclusion of the development of the blockchain industry and it's the only reason why it has been politically linked to ethereum is because ethereum has had has been the only ecosystem to add adequately fund r d efforts that have been able to bring us to this point over time we will see all l1 blockchains either morph into a modular design structure by constraining the l1 block space pushing execution to roll ups and increasing the node count and compete in the world of global non-sovereign money or they will instead do away with the baggage of consensus and data and simply port their execution environment over to a more decentralized chain the modular blockchain design also illustrates the necessity of enshrining decentralization as the key property of blockchains that enable enable all the rest of the features ethereum has solved for the scalability trilemma by increasing decentralization not sacrificing it only by optimizing for decentralization decentralization are you able to receive the benefits of modularization illustrated above if you have decentralization you can have anything thank you for taking the time and listening to this and i hope you guys all understand modular blockchains a little bit better today is going to be a concept that we continue to explore on bankless and i think the rest of the crypto industry as well so cheers thank you for tuning in uh have a good day 