[Music] welcome to bank list where we explore the frontier of internet money and internet finance this is how to get started how to get better and how to front run the opportunity i'm ryan sean adams i'm here with david hoffman and we're here to help you become more bankless david we have vitalik on once again what topics do we cover yeah we cover three of his most recent blogs on his vitalik.ca blog these are all fantastic reads and in order to help amplify vitalik's message and try and get out what he's trying to get out we go through each of these blog pieces together we start with his recap of 2020 and his forward-looking um kind of his forward-looking predictions into 2021. uh that blog was particularly interesting that's how we start the conversation we move into his blog post called an incomplete guide to rollups and he kind of helps us unpack what it is to be a roll-up how we as an ethereum l2 scaling community landed on roll-ups as a construction and why why they are so powerful and then we also get into the topic of a social recovery wallet so these are all relatively three different topics but i would say they are all forward-looking uh topics that vitalik sees as kind of like the logical conclusion of a lot of different forces um perhaps maybe a lot of them social a lot of them political in his first in his first blog post that we get into uh but then the second two are more technological and about the way that ethereum um the the landscape is going to manifest and mature over time so again a wide ranging conversation but still with a lot of awesome through lines absolutely if you're listening on the podcast of course we have this on youtube as well where we actually go through the articles visually if you're watching this on youtube you can check it out on the podcast and get it directly into your ears make it more portable that way david we should just get right into the interview but before we do guys we want to talk about the sponsors that made this episode possible if you want to live a bankless life you need to get a monolith defy visa card monolith is a one-two punch of both an ethereum smart contract wallet and an accompanying visa card that lets you spend the money that you have in your ethereum wallet everywhere where visa is accepted when you swipe your monolith visa card at the grocery store or at a restaurant it actually makes a transaction on the ethereum blockchain that spends some of the money you hold in your monolith wallet it's insanely cool and it's one of the best tools out there for living a bankless but still normal life monolith also offers on-ramp services for getting your fiat money into the world of defy so it's trivial to top up your monolith card if you ever need to and your deposited money goes straight into your non-custodial wallet so your money is never held by a centralized intermediary because monolith is native ethereum infrastructure the money you hold in your monolith wallet still has the power of d5 behind it swapping assets on uniswap or earning yield in defy is at your fingertips go to monolith.xyz and sign up to get your monolith visa card today if you are looking for a product that connects your fiat bank account with defy tokens and products you need to download the dharma mobile app dharma is a non-custodial smart contract wallet and comes with a bridge that connects you right into your bank account drama is the fastest and most efficient wallet between your fiat and your bank account and any token on uniswap or even any vault in urine with dharma you can get over 25 000 dollars per week into the dfi universe and you can do it non-custodially if you or anyone you know is hot on defy and you're trying to get your money into a defy investment dharma is the place to go signing up and going through kyc is an absolute breeze it took me just under three minutes and after signing into my bank account via plaid i am now just one transaction away from any token that uniswap has to offer go to www.dharma.io that's d h a r m a dot io download the dharma app and get yourself unbanked today this is an incomplete guide to rollups so vitalik can can we go through the incomplete guide to roll roll ups and maybe direct this to someone who has heard about the buzz that maybe uh roll-ups are ethereum's next big scaling solution right and it's kind of the promised land of reducing gas fees tell us what are roll-ups where would you like to start with this sure so roll ups are a member of this family of scalability solutions that we call lovelier to scaling right so like there's this long-running dichotomy between layer one scaling and layer two scaling where layer one scaling says we increase how many transactions we can process by making the blockchain able to process more transactions and layer two scaling says we increase the number of transactions we can process by moving work off chain and instead of like running everything on chain directly we only run a kind of more limited verification activities on chain and so we use these more clever contraptions to remove to reduce the need to use the chain in the first place and you know in the case of bitcoin like this was uh basically the topic of their civil war but in the case of ethereum you know we're basically doing layer 1 and layer 2 scaling at the same time right we have sharding for layer 1 scaling but we also have this very kind of healthy and rich layer 2 scaling ecosystem and i talk about the three i'm scaling approaches so there's channels i'm in plasma and uh rollups and channels are this method for optimizing one-to-one interactions so for example channels are really good at the use case of like let's say i'm selling you an internet connection and uh you want to pay me per per megabyte right and then like what would happen is that like i would start for uh giving you an internet connection and then every time it would um reach one megabyte like you would just send me these off-chain messages that i call tickets right so your first ticket would be a signed message that just says i'm paying you 0.001 your second ticket would be a message that says i'm paying you 0.002 and so forth and the poi the way that this works is that i only needs to actually put on chain the very last ticket or the highest value ticket that you send right and so basically what you're doing is you're just you're making these payments but you're not but we're not yet committing them and you just constantly keep paying more by just replacing these payments with higher value payments and then when i publish the last payments on chain i'm basically kind of settling all these payments at the same time and it's happening in one transaction and there is a bit the smart contract implements this kind of interaction game where basically like let's say if you um try to submit one of your tickets um that has a smaller payment then i can challenge and i can send your ticket that has the higher payment or if um i just disappear completely then you can send your um your own payments or your your own ticket to close the channel and get your money back and so on uh so channels are good for bi-directional payments and there are things like the lightning network and raiden that tried to expand that out to broader payment networks but they also do have some weaknesses right they're fairly complicated to deal with they have these high capital requirements and so forth then there's plasma and plasma is this very technically clever construction um that you know it turns out plasma is like really amazing for dealing with the non-fungible tokens um because it's just like the whole idea with plasma is that you basically like assign every unit of an asset a different id and then you have this kind of merkle tree contraption where you basically if an asset has some uh some id x um then the transaction that corresponds to that address goes into a work which we add index x and then you publish the merkle roots on chin and then if someone who has like some asset x wants to withdraw it then they would publish an operation on chin um and then they would have to provide that merkle branch and if someone else wants to challenge them well they can do that and then all the challenges happen like just by providing these merkle branches so plasmas is really clever thing it's uh good for asset transfers it's good for payments it can be due can be used for exchange so the omg network is uh has been doing a great job of kind of pushing the plasma vision toward its uh interval uh logical conclusion as basically and basically doing as great a job as can possibly be done with that so very happy that their work exists but then we move on to the third solution which is rollups right and rollups are a fascinating class of technology because in some ways they're not a full layer two scheme right and what i mean by that is that in a traditional layer two scheme all the data and all the computation of at least each additional transaction is fully off right like in plasma you do have to publish miracle roots on chain but that's 32 bytes it's 32 bytes if there's 10 users and it's 32 bytes if there's 10 000 users in a roll-up you have to publish like it looks like somewhere around like 10 to 15 bytes of data on chain for every transaction now you you are able to move all the computation off chain and you are able to move most of the data on off chain but you don't you do need to have like some amounts of data unchained for every transaction and it turns out that the ability to have data on chin basically just gets around some very fundamental game theory issues that have to do with data availability and in my blog post i linked to this um a youtube video that i made i think it was in some stanford conference or meetup or one of those uh where i just talk about like why data availability is hard and like why there's this uh complicated game theory issues um around like you just like basically you can't have us a fraud proof system for data the same way you can have a broadband system for computation and rollups or plasma and channels kind of get around this issue by relying on this explicit concept of owners that basically says that like every asset has an owner and if the owner for that asset misbehaves then the system can fail but the system can fail in only one direction and that's direction basically is that the owner loses the asset but in a roll-up you actually can just make a hard guarantee that says the state definitely will be processed correctly and it turns out that that's really important if you want applications to become more general purpose right because in more general purpose applications like it's just you can't map assets to owners right like who is the owner of uniswap is the easiest example right like there is the there is no single actor who's kind of the logical beneficiary of everything that happens inside of unit swap it's just this like automated thing that exists on chain and it benefits everyone and it's owned by no one um so then i get into what basically what is how does the roll-up work right and the core idea of a roll-up is basically um that there is a smart contract on chain and that smart contract maintains a statement it maintains basically a merkle hash of all this state inside the roll up so that means all the account balances all the contracts code everything inside the roll up you have this merkle hash and that merkle hash gets maintained by the roll-up contract um anyone can publish what we call a batch right in a batch is basically this collection of transactions in this very compressed form um together with basically a record of the previous state route and a record of the new state so a batch is basically a claim that says if you start here if you start from this this statement and you apply these transactions then this is the new statement now in reality the batch just by itself does not have enough information to fully compute the state uh the new state route because if you want to actually compute that you need to have the merkle branches and of course you don't actually want to compute all this stuff on chain so instead what happens is that the roll-up just believes the batches by default and then you have one of two mechanisms for proving that these batches are correct right so one of them is optimistic roll-ups and the other is zk roll-ups and here's where we get to the core difference between these two great families of roll-ups right in an optimistic roll-up what you have is a system where you basically kind of trust but verify right so the smart contract kind of trusts the batches by default and it just accepts the results of the batches by default um but then if so like there are nodes in the network that actually do run the full computation and if one of them discovers that something is wrong then they can publish a challenge and if they get challenged correctly then that uh the badge that's incorrect gets reverted and whoever submitted the badge loses their deposit and the challenger gets the reward and then you kind of continue from there and so optimistic basically says trust by default but if someone challenges then if the thing they challenge is incorrect then you reverted and as long as you trust that there is at least somebody online who can revert then you know the mechanism works now zk roll ups they use validity proofs right zka roll ups use these kind of fancy cryptographic proofs that we call a zk snarks and they basically prove directly that the post-state route is a correct result of executing the batch on top of the pre-state route and the way that these proofs work is really complicated uh you know i actually didn't know i i've tried to make a couple of explanations of this i'm sure i'll try making more explanations of this in the future but these are just incredibly powerful and just incredibly clever mathematical contraptions that actually let you make a proof of a computation that takes a long time to compute where that proof itself can be verified extremely quickly and this is what zk roll ups rely on so there's these fairly complicated tradeoffs between optimistic and zk roll ups right in terms of like the gap the fixed gas cost of each batch which influences how frequently batches can be published the uh withdrawal period um so ezekiel optimistic roll up some the the fixed cost per batch is much smaller which means batches can be published much more frequently zk roll up some have instant uh withdrawals optimistic roll-ups have withdrawals that take one week but um the thing that you can do if you want optimistic roll-ups to have instant withdrawals is you can basically have a kind of third-party market so basically like if i have say one if that's being withdrawn in progress then if you were validating the roll up and you are perfectly confident that that wish to always correct then what you can do is you can just buy that buy my right to one eath for say one eighth minus a fee you can just buy up my withdrawal um rights for say 0.9999 each i would get my 0.9999 each immediately and then you would just wait a week and then you would get your one each at the end right so or your point zero zero zero one eighth no no sorry um i would definitely totally i see sorry yep right i sacrificed my right of one instead i get point zero point zero point nine nine nine immediately you as the buyer of the withdrawal pay me 0.999 immediately and you get the full one at the end uh so like this is a technique that's um available for optimistic roll-ups to have instant withdrawals but it does have capital costs and importantly it doesn't work with um nfts because and uh nft with nft is inherently like there is nobody who has like a second copy of the same nft that they can collateralize but four coins it works amazingly um complexity of technology optimistic roll-ups are simpler um generalizability um optimistic roll-ups are easier to have kind of full general purpose evm computation for and this is something that's really important right like there already are zk roll ups that are live and zk roll ups um like there's a zk sync there's loop ring there's um the diversify and those can be application specific but um it's very hard to make them support like much more general purpose computation whereas with an optimistic roll up like well we already have one on main net that's basically running evm code on layer two uh so and then per transaction on chain gas costs so this basically means like are the um the on-chain costs that you have to pay per transaction uh so this is basically paying for the 16 bytes it turns out that there's technical reasons why for certain types of transactions you need more bytes than an optimistic roll-up than a ck roll-up and then there's off chain computation costs so which are actually lower for uh optimistic uh uh roll-ups than they are than there are for zk roll-ups so there's complicated trade-offs but my uh kind of opinion summing it all up is that i think in the short term optimistic roll-ups are likely to win for general purpose evm computation zika ops are likely to win for simple payments and like some very specific use cases but i do think that you know on five a ten year time horizon zeke roll ups are gonna are gonna be winning out in all use cases so i think like the fact that you know teams like optimism and orbit from are doing optimistic roll-ups today it's perfectly fine and i think it was it's completely the correct path um in order to just get uh some kind of scaling out for ethereum in 2021 yeah but in like in the there is going to come a time when zk roll up tech zika snark technology improves and ziki starks are capable of uh moving uh actually verifying evm computation now expect to see demos of uh ck snarks um you know doing things like verifying somewhat decoded this year but just keep in mind that there's a big difference between a demo and a production implementation right like because uh once you have a demo like you still have to you have to securely audit it you have to debug it you have to really make sure that the verifier is correct um and those those things are hard right like i personally would much um rather trust um you know 10 million dollars of my own money to an evm optimistic roll up than to an evm zk roll up for at least the next couple of years but in the long term zkro upstart i think are going to be everything and so like i get my advice to teams like optimism and arbitrarily is that i think they should start kind of ckfying themselves fairly soon like you know it's not so it's not so urgent um that like people should lose interest in projects that are optimistic roll-ups today but i think projects that are optimistic grow ups today should have the attitude that they are not going to be yeah optimistic grow-ups forever and they should have the uh they should start putting together their strategies for uh zking themselves so i g then i talk kind of more technically about what if i could cut in here vitalik i would just like to clarify one thing between optimistic roll-ups and nzk roll-ups what would you say is the defining characteristic difference between optimistic and zk roll-ups that makes you long-term um long-term belief in zk roll-ups like what's the real what's the real uh separate separation between those two things that makes you optimistic about zk rollups long term sure uh so i mean one is like just zika roll ups have instant withdrawals even and without any collateral requirements another is that zk roll ups do not have this kind of one of m um online requirements um in order for someone to be able to publish a fraud proof and that's valuable because uh like it it opens the door for zk roll-ups to be until you go up and process things like you know tens of thousands of transactions per second where in like in an optimistic roll-up once you start having that many transactions then you know it starts like it's use it starts becoming less obvious that there will always be enough honest to nodes that are checking the that all the computations are done correctly um also the um the data efficiency right like the the fact that that so i have a table a bit further below where i look at the mixer example and uh the it's uh one table further below um there it is right like and uh a mix the mixer only has a 77x scalability again an optimistic rollup at a 570x a scaling gain in a zk roll up and the reason why this is true is because zk roll ups allow you to have a less data on chain because in a zk roll up you only need to have enough data on chain to update the state tree whereas in an optimistic roll-up you have to have enough data on chain to verify the full computation which is a slightly larger amount of data so i yeah like i don't now to be to be very clear right i don't think that these advantages are decisive in 2021 and like i think in 2021 like optimistic roll-ups and zika roll-ups are both totally fine we're going to have these withdrawal markets i mean we're going to have ways for people to withdraw from you know things like optimism and harvard from instantly and in 2021 and it ends 2022 and like even going a bit further the fact that optimistic roll-ups just rely on clean evm verification and like the you know they have surprisingly simple of fraud verifiers i think is a decisive advantage as opposed to zk rollups which needs to have just like this much larger and the complicated compiler code to convert uh solidity or viper or evm into arithmetic representations and there's just much more attack service for bugs in there but like over the longer time horizon those issues will get resolved and the calculus is like slowly going to shift toward the zk side so i like to take a stab at trying to go through the history of this to lead into my next question ethereum l2 scaling started with state channels uh which were and the great thing about state channels is that you know it's just between two parties you can make any number of transactions without committing anything to the blockchain and then to wrap up your day you commit something to the blockchain that state channel ends and then you bundle up you know 10 000 plus transactions into just one little packet of data submitted to the blockchain that's great that's great for two parties or just a low number of parties plasma was an attempt to have one-to-many or many-to-many type of interactions of various types and there are different constructions of plasma that did different things but it ended up being weak because of this thing called the data availability problem which in in short is that it's hard for ethereum the blockchain to know about the plasma l2 chains and reason and know about how to manage that without without making assumptions and assumptions we don't like assumptions in the world of cryptography that's not that's not how we play in the world of crypto economics uh we like things to be secure and then so then that turned into the rollups revolution of the optimistic and zk flavor where there was a compromise made where we figured out we could actually just regularly submit you know some data to the ethereum blockchain to solve that data availability problem and so it's not we aren't getting like millions of transactions per second we are still generally bottlenecked but the actual bottlenecks are actually still pretty wide and there's lots of optimizations there that can make them even even wider and that's kind of where we are today how do we know that we aren't how do we know that we are uh towards the end of this research and development process how do we know in like 2021 or 2022 we're not going to come up with this new scaling system what indications or evidence do we have that we have approached the end of this research and development phase that's hard to tell for certain like there's no theorem that says that like these are the only scaling mechanisms that exist and there are no others but i think like there are kind of heuristic arguments that suggest this right one of them is just the windy arguments right like we've had channels and plasma and roll-ups and basically nothing else for something like four years now um i'm uh and roll ups themselves like i yeah they were like in their current form they were kind of created in 2018 to 2019 but there was this much earlier con thing of shadow chains that i published back in 2014 that kind of is a prelude to roll ups so we've had a kind of long and growing time span within which we've known about these three techniques and we've seen no others another thing that i arguments that you can make is this mathematical arguments that basically says like if there are end users um how much data gets published on chain um not taking into account deposits and withdrawals and fraud and you can classify them very easily right in a channel the answer is zero in a plasma the answer is o of one so just the one merkel regardless of how many uses there are and in a roll up it's of n right so like there's one a bit of data per transaction and so that basically covers the space right now you might say well is there are there things between one and and are there things that are like square root or like logarithm or some weird thing in between and i think my intuitive answer there is just probably not because that just means that you eventually you have what less than one bit on chain per transaction and like how much can you actually do with that um but intuitively it just feels like those three numbers like zero one and just kind of cover the whole range and you know you can tell how with the increasing on chain load you have increasing capability right like plasma gives you increasing capability from channels um what the particular thing being just the ability to send off chain to new users who have not yet been inducted into the system and then going from one to n you have this other gain of capability which is being able to go general purpose uh so [Music] like there is that kind of heuristic intuitive reason to potentially believe that like you know these three options just are the options out there and that everything we're going to see from here is just like different permutations on that gemini is the world's most trusted cryptocurrency exchange i've been a customer of gemini since i first got back into crypto back in 2017 and it has been my main exchange of choice to make my crypto buys and sells gemini is available in all 50 states and over 50 countries worldwide and on gemini there are markets for over 30 various crypto assets including many of the hot d5 tokens like wi-fi ave uni and also they are one of the few exchanges that has liquid die markets having both the option of logging into the gemiini.com website or instead opening the gemini mobile app has allowed me to be able to access any and all exchange and honor off-ramp services that i've needed to on a moment's notice with instant deposits and fast withdrawals i'm able to make my money do the things i want it to when i wanted to you can buy crypto safely and securely on gemiini with the peace of mind of knowing that your investments are insured and protected with industry leading cyber security you can open up a free account in under three minutes at gemiini.com go bank list and if you trade more than a hundred dollars within the first 30 days after sign up you'll be gifted a free 15 bonus check them out gemini.com go bankless ave is a borrowing and lending protocol on ethereum and just recently released ave version 2 which has a ton of cool new features that makes using ave even more powerful with ave you can leverage the full power of d5 money legos yield and composability all in one application on ave there are a ton of assets that you can deposit in order to gain yield and all of those same assets can also be borrowed from the protocol if you have deposited collateral here you can see me getting a 200 usdc loan against my portfolio of a number of different defy tokens and eth i'll choose a variable interest rate because it's a lower rate than the stable interest rate option but i could choose the stable interest rate option if i wanted to lock that interest rate in permanently one of ave's v2 features is the ability to swap collateral without having to withdraw your assets trade them on unit swap and then deposit them back into ave ave does all of this for you all in one seamless transaction so you don't have to repay loans in order to change the collateral you have backing them check out the power of ave at ave dot com that's aave.com rollups are definitely very exciting what's what's also exciting is we can uh begin using them now right so this is no longer hypothetical theoretical like loopering has one in production uh synthetics just released their version on optimism so it's going to be very exciting to see how both the optimistic roll ups and the zk roll ups play out i had one other question for you and then maybe we could move on to social recovery wallets but just last question on on rollups how does eth2 kind of just to tie this out how does the eth2 roadmap fit with the roll-up uh roadmap i understand that um eth2 is going to provide a way to um like uh provide consensus on a sharded data layer which is going to make more space more sort of bandwidth i guess uh for for rollups in the future what's that gonna look like and what's that going to do for ethereum's holistic scalability story here great question i think it's definitely very important to circle back into yes answer this one basically so we have this thing called the roll-up centric road map which basically says that now in the short term we recognize that there is massive fee pressure and roll-ups are the only thing that can relieve the fee pressure no matter what we do and and at the same time we recognize that for shorting providing sharding of just data so just having sharded blocks that just contain these blobs where you know you might have whatever data you want but there's no kind of on-chain processing of it is an easier problem to solve than than a sharded computation and so if you take those two facts together the thing that you realize is basically that well what's a rollups need rollups need data and what's the scalability element of a rollup the scalability element of up is basically well how much data space is there that the chain has a consensus on and with the current ethereum chain that limit is somewhere around 500 kilobytes a block but with the shorted system you basically have like 500 kilobytes for one uh for each of these 64 blocks in every slot right so there's just going to be this much larger amount of a space and within that space um you just you know you can use that to potentially go up to something like a hundred thousand transactions per second that just with uh roll ups right and i have uh some numbers i definitely encourage people reading the post it's also on vitalik.ca and i talk about some of the tricks that we use for data compression and some of the math um that shows like how many data um how many bytes you need for a transaction of different types and like how much uh scaling gain you can get on a on a regular roll up and or on a roll up on each one and then multiply that by another 64 to get the scaling gains for roll-ups on youth too uh and so and just just to clarify here vitalik so um this data this sharded data layer is this going to be available to use for rollups before the eth1 and eth2 merger um it can be there is work that needs to be done for that to happen basically we need an eth2 like client inside of each one and that technically requires like some eips on each one to be done which i think are like in the pipeline i believe for like soon after berlin or something like that got it cool all right well excellent this has been a fantastic article so of course an incomplete guide to roll-ups um i i didn't feel like that was incomplete what about you david i felt i felt like that was a very complete guide to roll-ups yeah um at least for me maybe that's a good question vitalik what would a complete guide to roll-ups uh yes one thing i say is that the guide is already wrong so uh one of the tables um line four general purpose evm roll ups are already close to mainnet well as of now the optimism roll up already is on main net at least for uh synthetics uh so that's uh uh progress and i think like this is just uh evolving technology and people are going to come up with you know new and more clever tricks and like and i wrote this blog post with the goal of uh it being something that people can kind of go back to and just get their just primer on what the heck roll-ups are even for years into the future um so i expect there to be a more and more things that end up just inevitably not being part of the post but that you know continue improving uh roll up uh people's uh roll up users experience as always want to end with this none of this was financial advice of course ethan's risky so is defy so is crypto you could lose what you put in but we are headed west this is the frontier it's not for everyone but we're glad you're with us on the bankless journey thanks a lot 