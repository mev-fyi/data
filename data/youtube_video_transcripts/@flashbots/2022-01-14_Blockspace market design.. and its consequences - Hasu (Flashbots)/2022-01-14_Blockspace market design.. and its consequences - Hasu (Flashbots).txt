yeah i'm so good at these things alrighty um yeah first of all big thanks to robert and to alex our wonderful host because um i had very little time to prepare this presentation because of a busy week and not dealing well with the covet covert vaccination um but here we are and um yeah i'm ready if you are should i should i go ahead and start yes please you can go ahead and start we can see your screen and we can hear you very well perfect yes so we've already heard a lot about how uh mev extraction works on other blockchains today and i i'm just here to give you know a little summary of what we've heard today um a little overview and how these things all tie together and um so first of all why block space markets i think um good to start from a high level perspective um in in blockchains we have a limited amount of block space we we constrain this so people can still run full nodes and validate um the current state of the blockchain however there can be a potentially unlimited demand for that block space we've seen this on ethereum many times you know here ethereum is a whale chain right now i think gas fees are above 300 way so we need some way to match this demand with the available supply and that's not an easy problem um because we need to figure out two things first we need to mediate access so who gets into the block at all and for the longest time in crypto this used to be actually the only problem like people only cared about getting into a blog but due to mvv we sort of see a secondary problem come up and that is transactions increasingly want to be my end at a specific target position so um the original problem of just inclusionary block it used to be [Music] quite easy um people were concerned about underbidding and if they underbid their fee then they would have to wait longer for inclusion maybe their transaction would fail so maybe if they want to buy something from unisop and they under bid then the price might have already moved against them and then their transaction fails so this this happens um and if they over bid then of course they're paid more than necessary so in both cases um it hurt market efficiency um and uh but it was ultimately not that hard of a problem to fix so um created eip1559 and what erp 1559 does is basically it tells the user how much to bid right so it um it basically uh it quotes it quotes a price where if the user is willing to pay that price they are definitely getting included and that price is uh it's almost never higher than it needs to be um there's a great article by pintervale if you haven't yet read it who recently analyzed if if erp1559 had fulfilled these objectives of preventing under bidding and over bidding and he came to the conclusion that yes it has and it's actually a really good read it shows that um a lot of uh so uh the users who today use the erp-1559 format i.e they outsource their bidding strategy to erp-15559 they consistently pay less for their transactions than those who still use the legacy type okay so now so but so uh block space market used to be easy but mvv has made it hard again why because we now have the secondary problem of transactors wanting to express preferences on where exactly they want their transaction to be included and mvv is a really big economic force right so we see this is an absolute minimum amount on mdv that has been extracted it's just like an extremely defensive gas by flashbacks but as we can see here even 800 million dollars um since 2020 and this is a substantial part of minor revenue so as a miner you can't not care about mev and so and not just as a miner so uh this this is just a huge honey honey pot um too that attracts a lot of switches and you know um financial firms to compete for these you know arbitrage opportunities degradations etc um and as a result unfortunately of this mev extraction um there we have seen uh some negative externalities that have risen so in the short term um we have seen like more um and this actually not very logical uh the way so this this should actually come before um so uh we can see that the choice of um the market mechanism it informs a certain med market structure um and we will go into like a bunch of energy market structures or market mechanisms soon and see the results and these market structures they lead to certain negative externalities and these can include ones that are quite short-term in nature so for example if you have uh if you have a market mechanism that allows for very finely grand expression of you know where you want your transaction to be mined then the result is that you can um it leads to for example a much more uh mvv extraction period right so and users might care about this specifically because it could lead to more symmetry attacks more front running you know more more exploitation of nft jobs etc so this is very problematic but if there's no way to express your preference then it might lead to a lot of wasted block space um because if you have 800 million dollars of mev on the table then it's you know searches and miners are going to going to some way to extract that money so it's just a matter of you know of power and what are the negative externalities of their approach and in the long run uh we have to be very concerned about concentration in both the block producer and the block builder set so for example if miners start to extract all of the mev themselves then this massively raises the barrier to entry to be a minor and really hurts the decentralization of the blockchain to the point where there might only be one mayana who can compete because they have the dominant dmv strategy and they're all proprietary in nature but equally you can have a really decentralized block producer set um but there's one searcher for example one financial firm that sends their blocks to all the miners um and that that firm is so much better than everybody else that they um they basically even if they started censoring um some users over others they would still not that would would they would still be so profitable that people cannot do anything against it right so miners don't really have a choice to switch to a different uh producer doesn't censor so it's actually really important that the market for mining and the market for searching that they both stay reasonably competitive so we know we want to minimize these negative externalities question how and the answer is via backward deduction so we go from these negative externalities we see how they arise from you know certain mmv market structures and these tend to be the result of a specific choice of the mbv market mechanism and in the wild we have seen a bunch of different of those um and we had some time to study them so on ethereum for the longest time we used to have transparent batched auctions uh also called pgas priority gas auctions today most mvp extraction has moved from pgas to sealed pitch sealed batched auctions that happen in the flashbox relay we have seen some chains for example arbitrary um experiment with um first come first serve approaches so they have a single sequencer and the sequencer processes transactions in the order um that they have first seen it right and then finally another popular approach is that of randomization so you collect orders you batch them same as in pga but then you randomize them once um so i think um a chain that does this might be i'm not actually sure if any chain does this right now in the white i know it's on nearest road map i think it's on osmosis road map um so this is definitely like an approach that has been known for a long time and we can understand the dynamics that it would create so um we will go through some examples now of how the market mechanism informs the domain strategy and creating following negative externalities so ethereum used to have a pga pga means um that all basically all of the bidding go for inclusion but also for the position in the block tended to happen inside the public mempool um and priority uh was simply mediated via the gas price that's that's why they used to call it the priority gas auction so if you wanted for example to be on top of the block then you just paid a very high gas price because miners would sort all of the transactions by gas price they had this very simple sorting algorithm basically and if you wanted to if you saw a transaction and you wanted to front right on that transaction then you looked at the gas price of the transaction and you just bit very slightly more okay so you would be inserted right before etc and for back for back running he used to like understand the underbit and so on um but there is the problem here was that um the bits of like as everybody uh saw each other's bits there was a very big incentive um to just constantly update you a bit so you would uh this this caused a lot of strain on you know the the p2p layer and the mempool and it was a game where as a searcher or as an mvv extractor you needed very good latency and you needed a very good view of the transaction pool so you always knew uh when you had been outbid so it was a game very much of speed um and what it led to was a lot of fair transactions because even though some even though searchers knew when they were outbid and they could sort of replace their transaction with one that paid very little guests still this did not work all the time in practice and so about i think for some time more than five percent of block space was actually filled with failed transactions in ethereum so this was not great um it also because of the high unreliability in extracting mvv it it created um a significant incentive for vertical integration so vertical vertical integration means that the producer owns all layers of the supply chain so um and the supply chain in in mining is basically uh yeah um the the order of transactions in the block right so um a minor might so if you look at flashbacks today then you basically have the opposite of vertical integration and you have division of labor where miners receive their at least part of their block ordering from a specialized marketplace that tells them which mvv transactions to include right and this is sort of public for all the miners but this is not that this is not the standard outcome uh like the guaranteed outcome right so this is something that um you have to actively work towards and in pga because of the high unreliability of med extraction basically there was a big incentive for miners to just start extracting enemy themselves and not not just higher unreliability also if the market for searching is very is not very competitive so there are very few searches and they control a lot of the mev uh activity and like a certain opportunity such as front running then the result is that these searches are the price setters so they can pay a very low because they have no competition rates but they can pay a very low um amount of their of their revenue to the miner and this further increases the incentive for the miner to just extract the med themselves and we saw this i think there was a time where some mining pools started to extract their own mvv and they eventually most of them stopped doing this and instead adopted um flashbots but without flashbacks this is some of the outcome that could have happened um however so i said a lot of good things about flashbacks um so we are obviously a bit uh see a bit auction mechanism and what this does is everybody basically only submits one bit instead of magni so uh your incentive now because you can update your bit is just to to to bid the highest that you're willing to bid which is very good for the miner and instead of competing on latency now all of a sudden the searchers are competing on gas efficiency so they want to they want to create or finish their arbitrage opportunity or their transaction with as little gas as possible and this is great for users right because it frees up a lot of blocks based on the chain however there is one negative externality here as well which is simply that because it is now so easy to express preference on your transaction and stay exactly why where you want to uh be mined in the chain that this leads to more enemy extraction period and this has some negative externality on the users who suffer from more sandwich attacks so um another example how much time do we have left by the way that would be um quite um you have another 10 10 minutes or so maybe a little oh okay that's perfect that's perfect we want to leave like 15 to 20 minutes for a question and it's 37 so let's say eight minutes okay so another example here is bsc binance smart chain so binary smart chain is very similar to ethereum um it also has public mempool um in the basically um yeah it just has like a lot bigger block size and shorter block time so i think block block time on blc is around five seconds um and the block size is i don't know how big but really big so um it's a chain that has very low fees and it has a very concentrated well that i said i think it has eleven uh welders who are all owned by binance um finance and friends um and what this leads to is it also pga because there is no so you can or you can think of sort of the flashbox mechanism is almost like a side channel that exists on like next to the public memphis where you can express your preferences about where you want to get mined and and this happens in an environment where it is performed with very few negative externalities so but bsc still doesn't have such a system so what instead happens is um it's pretty much the same that we saw on ethereum however with even sort of less bidding it's just more spam so i think robert um he made a good tweet the other day about a block initiative no about it yeah about a block in bsc that had um i think on average a block on bsd has between like one 1.5 k and two k transactions in it and that particular block had um around 1 000 transactions that were all competing for the same arbitrage opportunity so and only one of them was able to fill it um and all of the other 1000 transactions failed and actually wasted more than half of that entire block right so um so that's that's a clear negative externality because the these searchers they are going to fight for this arbitration opportunity because it exists but um they basically pay they compete in an auction and they pay sort of with with failed transactions right but this this is not actually born um yeah this this is a cost that has to be borne by users basically that they're not compensated for um and the outcome here for market structure is kind of the same that that i alluded to earlier with with uh theorem which is that if you don't have a market where um searches can if you don't have this this permission is side channel that every uh validator can adopt where they communicate with searchers then the outcome is um that you might see vertical integration so meaning that the validators start extracting the mep themselves this is not really a big deal at all and bsc because blc doesn't have the same it doesn't have the same agenda in terms of decentralization right so they don't claim to be as decentralized as ethereum they know of course that they have concentrated well dataset and this is not a big problem uh and so this can actually be fine in this case however the way it's a block space i would say i would say that is still an issue especially when the network you know can get really overloaded at some at some points um we briefly touched on arbitrary arbitration as a single sequencer they use first come first serve and um so what happens what happens here if um if a bunch of uh searchers see the same for example arbitrage opportunity so someone traded on the decks and then the state of the decks on an arbitrary is different from you know the state of the exchange on binance and so they want to perform an arbitrage opportunity so in this case um we still know that they will do everything that they can uh in order to satisfy this opportunity um however so and we know like definitely that um they will just try to spam as hard as possible but mostly i would say it's it's a game of latency so they want the optimal network um network location and and like the closest proximity to wherever that arbitrary sequencer is and um if sort of trading on traditional exchanges and high frequency trading is any guide then i think the end game for all of these um yeah for all of these things where you have a single sequence and they they they sort basically by by latency then the the final outcome is always a massive incentive towards collocation so that means basically you being in the same room with the sequence and the sequence i can say these co-location spots um so on the one hand this again leads to wasted block space but on the other hand very high barriers to entry um both in um both in the market for sequencing so if albertum ever wants to decentralize the sequencer then you know sequencer sequencers might have an incentive you know to to offer such co-location services um and this might not be available to everyone but also to searches right so if you don't if you don't have access to very high latency uh or to co-location then this might be yeah this basically is very bad for the switcher market and finally um the randomized batch auction um so here the case is actually quite clear so you have 100 transactions in the block um and you know you're going to get randomized and you have two ways either you fill up you know as much of the block as you can with that transaction that you must get in mind or you coordinate uh with a minor to you just ignore transactions that would in any way be competitive with you right so um the dominant med strategy here is just censorship so excluding some transactions that might pay um a sufficient fee but would uh reduce the the probability that your mev transaction would succeed um yeah and this once again especially the spamming is to waste the block space and the censorship there is an incentive here again for vertical integration um because it's actually very hard for searchers to extract mvv here in this in the scheme without spamming so um i think this this leads to concentration um in the block producer block builder set as well and while the takeaway is kind of you know show me the incentive and i will show you the outcome it's um if you build a certain market structure um then this market structure better um you know better ideas to the realities of the market which is that there is mev on the table of a certain value and so searches and miners both will will you know do whatever they can uh in order to extract this mep and if your if your market structure doesn't consider that and in many cases it doesn't that's that that was the point of like the second or third slide because in the in the past our market structures our blockchain uh marketing mechanisms only really cared about inclusion and like dealing with inclusion well but not dealing with with um the exact position in the block very well then then you then you get extraction strategies and any market structures that that create a lot of unforeseen negative externalities and um yeah here's sort of a great example of that um because right now um you know we have this climate crisis but at the same time a lot of airplanes are sort of yeah basically forced to do these unnecessary flights because otherwise they would use the landing spots in airports and this is one of the most extreme examples of you know just bad market design driving extreme negative externalities so takeaways uh i summarized it here for you um the dominant mvv strategy and these market mechanisms um and take away yeah we touched on this um maybe it's an editor of it so uh the marketplace as a marketplace that i should very uh should think very hard about the long-term consequences of your design choices and yeah build mechanisms that you know adhere to the realities of the market not in utopia where mvp doesn't exist and app designers don't rely on marketplace designers alone because we have seen actually in the in the last year um some some big innovations on the application layer um to give just two examples um maker daws liquidations 2.0 um instead of having a fixed amount like um a fixed reward for for liquidators you have a reverse touch auction so um the um the amount that you get for liquidating it starts from zero and then it it goes up every block so you get liquidated at the best possible price and the lowest possible med and second unisop v3 um because it allows um market makers to concentrate their liquidity around a certain price point it has greatly reduced the price impact um of many trades that users have and thereby greatly sort of um reducing the amount of sandwiched attacks that happen so um so this is uh really really positive both so um so i think mostly um you know the the the responsibility to prevent to to protect the users from movies still lies at the application layer um and so you know don't um we hear a lot about you know chains that protect the users from maybe but in reality is that mev will find a way um just with very negative con externalities on the users thank you all right awesome thank you hassan that was great um 