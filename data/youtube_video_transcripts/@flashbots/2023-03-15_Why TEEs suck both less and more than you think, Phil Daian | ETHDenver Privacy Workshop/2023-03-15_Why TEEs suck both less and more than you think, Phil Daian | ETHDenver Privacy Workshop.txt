yeah all right so I'm coming to you here with some minimal prep some two-year-old slides and some vintage memes but using these like very humble ingredients I'm gonna do the impossible and I'm gonna answer the question of dotees suck and then I'm going to convince you that sgx is the bull case for all cryptocurrency uh within 20 minutes and uh you probably don't believe this now so let the magic begin um okay and starting the two-year-old slides um okay so uh two years ago we envisioned a post relay World basically looking towards Mev boost and said one thing we must do um this is kind of even before math boost relays when we called the flashbots software a relay one thing we must do is we must remove all elements of minor and flashbots Trust in the MAV auction here system means map option otherwise flashbots on Mev has failed in its effort to keep crypto decentralized and we've kind of centralized crypto to some trusted points so I think we're all on the same page here we all know the risks here of a trust collapse if people stop trusting Med actors cat and mouse game when it comes to attacks on the system that may or may not be falsifiable from a technical perspective a need for constant data and policing of people's behavior within the system uh major centralization in the East stack which certainly we've seen some of um and also vampire tokens that can come in and kind of uh you know sweep up various uh Corner cases of system incentives and become politically important in the system eigenlayer um sorry um so these are the risks if we don't uh decentralize and we don't kind of move past what uh the status quo we have is today so what are the proposals to do this so these are some old proposals but certainly in this vein there are many new proposals um one vein of proposals people have made is an economic in nature so basically let's come up with some economic incentives some crypto economic scheme where people suddenly are rationally incentivized to behave honestly AKA how we expect them to in the protocol um either through lost revenue or explicitly through slashing conditions Etc and maybe this is enough to decentralize uh the auctions in the games that we rely on today but maybe not so today I'm going to talk about an alternative and again keep in mind these are two-year-old slides but I'm going to kind of Blaze through them and get to the new stuff um so what does sgx actually help you do well one way of thinking about it in a very informal kind of systems thinkers attack defense way um is sgx or here we call it Voldemort because it is that which shall not be named uh removes the wiggle room people within your system have assuming that it's operating correctly in many cases so without sgx when you're looking at someone behaving over a network and you're communicating with someone they have all this wiggle room so these things they can change in how they're communicating with you how they're processing how they're dealing with information Etc um they can manipulate the network which kind of lies between where you are and where they are in various ways or they can change the code they're using to generate various messages so if there's some algorithms some key exchange algorithm that you expect them to be running they can for example modify that to uh use bad Randomness or to you know log certain aspects that maybe are supposed to be kept private or Etc um so sgx basically helps you kind of get rid of one aspect of wiggle room which is the wiggle room people have in changing the code they're using to interact with your protocol it does this through a primitive called remote attestation there's going to be a talk on that in like 10 minutes so I won't go too much into that um but it gives you this kind of very very nice property um that if the code is not in in the wiggle room you don't need to Define these kind of economic conditions which at this one level up abstraction of Economics have to reason about how you get code security from the messages you've seen so like okay assuming we've seen this message someone must have at least done this much in like running the code and we reason from Security based on that here you can reason directly about what the code people are running is again assuming you trust sgx and this is a super important point we're going to get to in like five minutes but let's assume sgx Works let's suspend our disbelief here then suddenly as an economic mechanism designer you remove the need to reason about kind of this second layer of abstraction of what code generated the messages and what code is this actually doing um which is um so one thing we're going to argue for in this talk is basically a concept we call defense in depth which is that assuming sgx is at all useful in some way again big assumptions suspend your disbelief um you know adding sgx to a stack that involves many other elements of security maybe economic maybe crypto techniques like NPC or zero knowledge proofs or uh even fully homomorphic encryption Etc combining these systems with sgx in theory can give you strictly better outcomes because sgx kind of has a different threat model and a different set of breaks than these other protocols tend to um so this is again two years ago I'm going to give you the updated version of this which I think is more interesting to this crowd but uh or 18 months or whatever but like when I made these slides I was kind of arguing that sgx and economics are complementary for MEP uh why because there are a bunch of uh kind of angles of each security where each kind of uh protocol each type of approach falls short um and in these shortfalls the other approach kind of is able to bolster and patch over some of these uh short followings so if you look at the capital required so how much money does it take to break your system this is clearly an important aspect to security with sgx we actually don't know how to quantify this yet so it's a little bit unclear how to parameterize this in practice with economics maybe you have some intuition at least with basic intuition um as to how much it would cost to basically perform some attack on your system um so in this way economics kind of provides a natural bolstering to sgx that being said there's a few aspects where uh sgx kind of shines so if you look at basically the engineering expertise um and capital required to break the security that you haven't designed for in the protocol um to break sgx basically and to to access this attack surface that comes from modifying the code you need to pay a pretty clear engineering penalty you have to solve a pretty complex engineering problem which is basically um breaking sgx right at least we we theorize we assume this is complex again suspend your disbelief we'll get to it later blah blah um so assuming this is the case this kind of adds a nice layer to the economic conspiracy right if it takes more than just money if you also need kind of Cutting Edge Electronics equipment to break a system clearly the bar becomes higher in practice for your um security another interesting thing is let's say you do have a lot of capital you can actually break most economic protocols with a with a fairly small conspiracy so it takes a fairly small number of people uh or entities likely to pull enough Capital to kind of substantially impact a lot of the protocols we're building you can look at this in practice even with proof of stake and large stakers or you can look at kind of weaker security models like chain link oracles or something like that the conspiracy size is pretty small in sgx to actually create a physical space where you break a chip assuming that we can get past some of these lower hanging fruit attacks we've seen you may actually need a larger conspiracy which is useful for kind of uh making an attack public before it happens and also it possibly introduces some lead time so we've seen this with mangomarker is with the famous Avi that all these economic exploits kind of can really fully rug you because one guy working in their basement with enough Capital can just kind of go in one block and deploy this potentially through a private mempool potentially through flashbots potentially even not and within a block if they've broken your security assumptions if they've managed to gather this High Capital cost you have very little actual lead time to respond we've seen so many protocols fall over to this lack of lead time we've also seen protocols try to patch around this lack of lead time for example delaying Oracle updates Etc and and we know as kind of system designers that that introduces more trade-offs so clearly complementary here um another fun thing is if you look at the limit of Mev which is a very spiky kind of uh distribution of capital uh again these are super old uh stats so the highest Med bundle then on flashbots was 360k I'm pretty sure we've surpassed that at this point um but when you have these spiky distributions where you may have one Epic or one instance of the game where the incentives far outweigh the metagame or other instances of the game that player may be participating in like you do in proof of stake or proof of work um you you can easily see economics breaking down at the limit whereas uh pure crypto Solutions or even trusted Hardware kind of break down a little bit harder than pure economics does um so one example is like the collapse of Terror right when Terra collapses suddenly all the economic security in every system that's kind of relying on some second order economic uh um of security that touches Terror in any way you see this cascading failure of all these economic assumptions whereas with technical assumptions there's a little bit more robustness across these Cascade failures so that's nice but is sgx actually secure we have these kind of sgx fail attacks it's in the required reading we've seen again these are the these are all slides so back then meltdown inspector where the buzzwords but there have certainly been many more ever since uh see Andrew's work in sgx.fail for more there so is it actually secure when we see all these breaks well in my opinion this is an unanswered question and here's why it's unanswered because when you look at combining sgx with economics or combining sgx with other approaches what you see is uh basically it whether you can combine these ingredients successfully depends on the marginal cost of an sgx attack not whether sgx can be broken at all so there's a little bit of a subtlety here so these are two possible attack curves for uh sgx in this top Universe we're screwed that's the crying phase in the bottom Universe we're doing pretty good that's the party emoji um so crying face is basically a world in which you have to pay some upfront costs maybe a pretty expensive one maybe you need to acquire some Hardware maybe you need to get together a team of phds for four months Etc who knows what you need to do but you need to pay some cost um and then once you've paid that cost you have a break that can then be repeated on any number of chips very cheaply so that's what we call a low marginal cost attack so even though there's like a high upfront cost the cost to compromise additional units of sgx is extremely low meltdown inspector are both attacks in this category at least for some protocols not for all we'll get there uh later there's some spicy subtleties there too um so if we're in this universe we're kind of screwed but let's say we can achieve this bottom equilibrium where a lot of these low-hanging fruit attacks are patched over um and in the iterative kind of crypto security game the same way we've seen with symmetric encryption the same way we've seen even with Hardware enclaves on iPhones Etc security increases over time and the low-hanging fruits go away right if we're in that universe and we keep seeing investment in these protocols maybe we live in a world where each additional compromise costs I don't know a hundred thousand dollars fifty thousand dollars and then if we can estimate this curve we can parameterize our protocols to kind of be more secure than uh to be robust against this attack right so if we live in this world we're actually doing great and we can definitely use sgx for defense in depth and why wouldn't we it's like a free additional attack Vector that complements economics that complements pure cryptography in some ways right um so great if we're in this world you know use it um so another kind of subtle question in sgx security is there are two parts of this question number one is what is your protocol relying on sgx4 and number two is what happens when it breaks right what are the consequences of one of these attacks succeeding and those are both extremely relevant questions as to whether sgx was usable in practice right so if you take a look at eth L1 consensus security you could say like okay why are we bothering with all this blockchain stuff with all this crypto economics if we could just run sgx well in that setting you have billions of dollars of capital sitting on chain um in in amms in liquidity pools you have Mev incentives going on all the time Etc you have censorship incentives so you have massive massive incentives around manipulating the protocol and a massive kind of uh cost to a failure here so a failure kind of erodes the very Trust on which this protocol operates so in this case obviously sgx is not appropriate because you're securing a lot of money and it's completely unacceptable to have a break having a break is kind of the end of the system in that game theory you would never use sgx right but in some other game theories maybe you have a case where the public can tell actually when sgx is broken and it's falsifiable then sgx is usable for defense in depth uh maybe you can provide objective evidence right if you can provide objective evidence you have actually a very strong security model you have a falsifiable security model for sgx something we need to write more blog posts and go on in more depth but uh you know that's super nice if you have objective evidence guaranteed anytime sgx breaks you can just show this to people and say like look we're secure and now we've detected a break and we've kind of reasoned in advance about what happens when sgx breaks we can just go down that path that's fine right or if the evidence is not objective if you can just kind of detect that something funky is going on in the system you can maybe build subjectively more secure protocols that kind of achieve these robust meta properties right so all this is to say I'm trying to convince you that sgx is not a zero or one it's not a binary um right and uh why do I care about sgx well I care about sgx because if you lay out the landscape of Mev auction techniques and you actually ask the question of how do you build the best possible Meb auction the one that maximizes Surplus for users the one that maximizes network security and payment for validators the one that's maximally economically robust against actors that are willing to violate kind of these consensus Norms these are the design goals of our Mev option and when you lay out all these different techniques that we have I mean there are clear trade-offs here right um so I'm going to kind of just go through the techniques uh take a picture of this table if you care because I'm not going to run through the whole table it's too boring and I just put it together in one minute earlier today so that's why there's this troll face which by the way many of uh you youths in the room may not recognize this vintage meme I always get called out on it but I'm old so please let me have it that's the one thing I ask um so trolling you with this table and not to be taken seriously I'm trying to articulate that there are many trade-offs in what we can actually use to build Mev options and privacy in crypto we can have centralized privacy which is what the flashbots option enforces today which is the guarantees flashbots provides Searchers and users through protects and Etc you can build a committee you can use chain link you can have your fair ordering set you can try to punt it to some Committee of notaries there are trade-offs there you can have sgx or some other te involved in this auction you can have an economic protocol that is layered on top of this crypto economics to probably try to slash people when they misbehave or design an auction in certain ways in the public that gives users incentives design the public mempool in a certain way et cetera um you can use NPC so using MPC you can we have a blog post out about this that I'm going to pump about how you can use MPC to securely negotiate a back run between a user and an Mev Searcher that pays the user an Mev Kickback without leaking the user transaction right so that's super powerful so you can definitely use any MPC aspects here and eventually maybe you can use stronger techniques like fully homomorphic encryption that being said all these things have trade-offs so the committee what sucks about the committee well what sucks about the committee is that a subset of this committee can cheat you in a way that no one else can actually tell and if you combine this with the economics of hedge funds basically being incentivized to sit on this committee and profit more from these committee positions than anyone else or any researchers or whatever else right you end up with a subset of actors on your committee that's incentivized to behave rationally that can cheat you without it being falsified in many cases in Mev options and kind of private information Theory so that seems sub-optimal right and we have to build around that um there's also an incentive to co-locate with committees so like if committees can profit more if there's low latency to other committee members there's a pressure on committee members to geographically co-locate which I'm writing a blog post about I think this is the worst thing in crypto if we get to Geographic incentives to co-locate we're and we're all going to end up uh under you know regulation and under a single regulatory regime one day and that's a dystopia so let's not get there right um sgx-te it has other trade-offs you're dealing with all these Arcane attacks that are hard to model hard to understand we don't understand the trust model in some ways you're relying on Intel and Intel's reputation I would argue this provides defense in depth to the committee on economic protocols because Intel has less incentive to tamper with the Mev game than the participants in this committee or the participants in this crypto economic protocol right because their business and their trust lies outside of the Mev industry so why not use both um again NPC similar story great security guarantees there a number of problems there are no fair NPC protocols MPC Protocols are super high overhead and would require much longer block times to be effective at actually building blocks there's also a huge communication overhead that's geographically centralizing again this is the worst thing we can have in crypto and that means that uh you'll you'll end up with you know Solana style kind of clusters of nodes in one data center or one Locale so what is this table all to say it's all to say there's no Silver Bullet there's only trade-offs and what we really want to do is combine all these columns into a single system that leverages the best boxes here in an intelligent way to provide defense in depth and I think sgx is the simplest way to bootstrap this by giving people something usable plugging in various aspects of all of these different security models to bolster security and build the best possible Mev option why do I also think scx is great for Mev well because if it breaks you know yes it sucks yes people will get cheated in the Mev Market but we're not losing like billions of dollars in consensus right and like mainly we can build systems where we just fall back to today's more centralized or committee based steps quote right so in that case a failure of sgx is much more tolerable and the advantages it becomes are much more attractive so what are the trillion dollar questions answer these questions and you get this wonderful stock photo of a money shower um now we've gotten to my new slides so time to pay attention if you've been tuning me out um so the first open question is what is the actual security model of sgx as it interfaces with economic systems what is the attack cost curve I mentioned look like in equilibrium what can we expect it to look like another open question is are there any smart tee tricks we can use to actually bolster the security a lot so here's one fun one which uh you know I'm gonna troll the crap out of you which is you can actually use The Enclave ceiling key for a lot of security properties and privacy properties you don't need to use the attestation key or even remote attestation at all in a lot of settings if you're in one of these settings then all of the attacks that have basically happened on sgx so far have been on the attestation process in the attestation key which is a much lower security key than the ceiling key it's hypothesized that the only way to extract the ceiling key is to destroy the hardware because it's embedded in a 3D silicon Matrix so even with a microscope you can't extract this key and the leading experts on kind of silicon manufacturer think this may actually be impossible even with a billion dollar budget and state-of-the-art Machinery you may not be able to extract such a key assuming Intel is not compromised so what now can we actually use this can we leverage other tricks to get past these security models to go past this binary of like sgx is broken sgx is not broken what about alternative tees so if we can build special purpose tees we can actually do much more with sgx I know I'm over time two minutes left I'm done I promise um so a lot of sgx attacks come in this interface between sgx and the general purpose Intel CPU right so even the ability to set this interrupt timing that Andrew was talking about and many many other features relate to this boundary between this general purpose processor and this special purpose processor what if we could just have a special purpose Mev processor right and like it doesn't have to be fast it just has to be secure right maybe we can build that cheaply who knows maybe we don't actually need to build that many of them to be effective so that's something that as a community why wouldn't we look into that also bolstering the security of sgx with defense in depth with uh you know one of three set up with other arm tees or Etc even iPhone uh kind of secure enclaves that's a research direction that I think is super promising for the future of crypto so the last thing and this is something flashbots is doing now which I think is is kind of the missing piece in convincing you that sgx is really a bull case for all of crypto and then I'm going to give you the hype after the slot um is it to me lies in these things that we're developing called the Suave Primitives so ask Tina about the Suave Primitives this is kind of a small set of Primitives that we're going to be releasing shortly they look a lot like functional programming they look a lot like various Concepts in information Theory and theory of computation but Maps specifically onto Mev and optimizing Mev options in the context of crypto so we believe that these Primitives basically provide a nice bridge between two different sides of of the cryptocurrency effort mechanism design which can be translated into these Primitives to reason about what options can we actually build with these Primitives what information should we reveal how do we negotiate on information Etc that's a whole line of work right and then cryptography how do we Define cryptographic games and abstractions and this is something we're actively collaborating with cryptographers on write these things in a language that cryptographers can develop schemes for and let's use this to Turbo Charge the next 20 years of crypto development that's the bull case for crypto So Okay one minute I promise one minute I'm gonna tell you this is real so flashbots right now is running a block Builder inside an sgx enclave on the East sepolia test net and we are planning to move this block Builder into mainnet testing soon uh like very very soon right so um it's not secure it's an alpha product it's experimental there's a lot of work to do it really making this a true end-to-end product but we are getting ready to kind of start moving a lot of the trust-based infrastructure that we offer onto sgx to give another layer of security to people who today trust flashbots not to misbehave or to not censor transactions or to behave a certain way um so this is the transition that we're making actively right now so if you work on any of these questions I promise you it will have impact because we will make sure it has impact um okay the last thing I want to talk to you about is the bull narrative for all crypto so we're in a bear Market things are crashing whatever 20 who cares all doom and gloom but here I am I'm gonna tell you about hypermevization so hypermatization is how cryptocurrency takes over the world um so this emoji means Rocket Fuel so basically my argument here is that Mev serves as Rocket Fuel to develop those Suave Primitives and these decentralized Builders and these decentralized Mev systems and these distributed auctions uh these less centralized systems than we're currently seeing today that's going to be rocket fuel for sgx and tee research suddenly you have billions of dollars relying on TES in a way that they never have before maybe not in like fully for security because again we're going to do defense in depth but certainly this I think will serve as a catalyst for Te development here you don't need just one ship to kind of do a shared ml thing we're going to really Turbo Charge what you can do with Tes in real time now that will catalyze fhe development because that is our exit as a space from tees um so this will catalyze through these crypto abstractions new forms of cryptography which encapsulate what economically we actually need from privacy not only in the crypto space but in ad options in Trad fi um in in all sorts of markets all around the world right these markets need privacy these markets need crypto therefore these markets need cryptocurrency and we need to catalyze the development of the right crypto Primitives for actually solving these  trillion dollar problems that the world has and fixing the mess that's Left To Us by these trust-based systems so through this fhe becomes rocket fuel for crypto winning and then that becomes rocket fuel for money that's parcelable by the AGI which rises from an Mev bot that optimizes user preferences and we all enter the next phase of utopic Mev human evolution and the bull beats the bear so if you're interested in that join us join the conversation flatspots.net keep up with our sgx work and that's all I've got to say I'm five minutes over thank you 