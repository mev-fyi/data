um I will try to make it short and um yeah I'm seeing I'm you know probably I know most of you here and uh you know I I have been passionate about the direction of credible commitment for London as I think it is one of the major value propositions of crypto whereas compared with the you know the this major value propositions the research of crypto and formalizing the blockchain as a community device and how does different designs of the boxing Community device impact the commitment games slash coordination games played on top of it this research has not been largely explored and this talk would be you know a simple exploration about the idea about the ideas we basically goes through a series of theory and practice examples to arrive at uh you know the central question that we want to answer which is you know what is mediator extractable value how do we better formalize blockchain from Human devices and better study Mev uh both mentioned in Barnaby and David's talks this phenomena particular phenomena that arises from the specific design of launching as a community West okay so uh let's start so the expectations of this session is that it's going to be free informed it's not going to be a lot of slides and whiteboard mostly feel free to interpret and the motivation of this session is to as soon as we want to make an impact and actually Implement any coordination technology with commitments whether for AIS or for humans so the um I know that's something a lot of the copy AI folks here are working on over as lines we want to actually Implement those systems will run into problems that involve the design choices so what substrate those communion games that are that are played on and as as we have seen in blockchain we have witnessed you know through like blockchain history the design choices of the substrate uh of the community device actually impact greatly the commitment games that are played on top and it is non-trivial for us to navigate the Traders between different designs and commitment devices so I will first start with some yeah with some Theory to talk about the overview of some existing work on formulating blockchains as Community devices so uh I believe all of those uh work on commuting devices scene blockchains started mostly with the old virtual Griffis this is a sub version was uh you know a person working I believe on special projects at the ethereum foundation uh a few years ago and he had this thesis which relates to the game mining paper and game money is essentially say I'm credibly committing to your commitments and Maps the set of outcomes in a game to a set of payments so this is very much you know like the principal age and probably how to design a better you know optimal contracts um I also mentioning The Daily Talk and so from there people have started to devise games that we can play with this with the most uh easy example is of course the example of dark Dows so dark dos basically states that you can use the blockchain or you know usually a privacy enhanced blockchain to deploy a beating ring for a second price auction auctions um or the example of Bitcoin so Bitcoin is basically allowing users to achieve public goods funding by committing to say that if uh by commuting to a Smart contract to say that oh if a hundred other person agrees to fund this project this public goods and I also come into fund this public good so that is a classic like interdependent commitments um and those interdependent commitments can be formulated in a way that oh I'm coming into a smart contract that reads the source code of your small contract which is might be familiar with uh to the uh um what's I think open source Game Theory or program included by Marshall Tanner hotz and while they study the incorporate aisi as far as I know um so um going forward with this how knowing this theory of blockchains as Community devices uh what have people built we know that people have built you know the uh the dark elves the bidding Rings people have built the public goods foundings people have also built let's say you know I don't know like the global global payment system for example like the the all of the Bitcoin ethereum examples are all like oh two people are playing this game where like they can't trust each other that if I give you the money you might not give me the goods for like through the use of smart contracts we make this uh Atomic so that's like I commit to only giving you the money after you give me the good answer like you know the other person who commits to the symmetric movement so that's uh uh so that increases efficiency so of course we know that there are various like folks hearing results about this which is to say that if uh in your commitments you can only uh commute to a specific strategy in the number homophone game then you can achieve better equilibrium but it is but there will always exist some games in which the optimal outcome is not achievable if you can only commit to a specific strategy and the um the only way to robustly achieve the ultimate optimal outcome in given any game is if you have this ability to commit to interdependent commitments uh AKA is a program equilibria whatever notion um so so we saw those like practices being made but then uh you know let's focus on specifically what we are studying here so the theory what are some unique properties of blockchains that makes it different from other commitment devices that we traditionally studied what are some like unique things about it so one unique thing that we have seen is that let me use the Whiteboard um yeah okay so the first one is of course the block type so block time is the notion that we uh let's see okay so we know Community devices Implement coordination via enforcement and the common knowledge of enforcement we know that blockchain is implementing enforcement via delegate gameplay to the ethereum virtual machine which is like you know the concerns of protocols whatever value that code that people want secure about these interesting parties holding the commitment device it is also uh it also implements a common knowledge of this enforcement via consensus protocols to make make Public Announcement broadcasts however we know that the common knowledge of enforcement means that um you know the common the computation and that of Delegation and the implementation of common knowledge takes time which is a vlog time and the block time is evidently by that say you you are in a distributed Network you need to network latency to propagate messages to send messages to each other you also need to do some like computation time to process the messages and so let's just call the block time key and then and then we know that yeah I mean you have to knock the service okay yeah okay that's good so you did you say like the implication is okay computation the variation and Foundation property takes time against the blockline but there's a broader block that is Sixth Street right yes yeah yeah you could have that Okay so is that a property we care about or not can we should we think of blockchains or Australia things that like involve time or should we take like block times as a separated in Block on somewhat yeah I think we should at this stage we should take them as a property of the blockchain community-wise because in most of the designs of blockchains we have this discrete time elements The Continuous time element is more like say you have a roll ups right for example the calculator you take uh yeah you take transactions you take people's commitments and then you make those commitments common knowledge by somehow broadcasting to other people but even in reality don't really implement this continuous time scene Say More Often just batch transactions and then settle them onto the layer one at once so that's really like a discrete time thing yeah that's I think this this observe blockchains in a while and this will block time so then we model them I find but you are leaving the signs of the table right that could be potentially convenience diving yeah yeah yeah I I agree I agree the study of um there's some objects where there is no um time um yeah so people wouldn't be longer than this like long yeah I mean ethereum is sparkly uh synchronous Berkeley uh so maybe you have a businesses but I mean it's possible that definitely possible abstractions uh yes yeah yeah yeah for here I'm more like emphasizing that the blockchain is like not zero so like in uh say you are in proof of works there's no like definitely a lot of times because uh you know you take some time to implement the common knowledge and that part is uh like the property that is needed for uh yeah you know that is different from traditionally how people presume the properties of a commitment device in which they presume that the implementation of common knowledge takes zero time um okay okay first of all about this oh yeah yeah yeah yeah yeah this is uh say this is same as the first one so it's just saying like implementation the common knowledge that there is this predicating strategy space take some time like where the first one is this you know you can predicate other people's strategies um okay yeah so another unique property I think is that uh yeah on some um past ethereal we have this public member so public mental space still it means that we whenever you send a commitment the other parties is able to view your commitment before your commitment is finalized uh what does it mean for a commitment to be finalized on blockchain it means that the commitment is being is made permanently credible and it's made common knowledge that other people also knows that you have credibly committed to these actions uh however you know on ethereum in the old days we have this uh we still have this now but it's much less problems it's probably 9 Force which is that whenever you first send the commitment before this commitment is made credible other people can see it so you know as uh talk goes in Barnaby and David's talk people can do various bad things about it right so for example I see you have committed uh tried to commit to this thing and then I front from you uh right I buy the assets that you want to buy before you buy them or I can do things like sandwiches uh and then the third property is that in most obviously why uh on finalizer on The Ledger because like it's if it's a digital signature it's still great uh yeah like it's it's like you cannot back out if you assume the other person person would like includes your like commitment on the blockchain like mempool that that is they pray in a way right uh well I mean there are nonsense so I can see so like right like you can like cancel the previous commitment by sending the same transaction with like a higher notes but that's really a technical detail actually yeah right is that you're ready to give a transaction yeah but you could pay for signings of arbitrary thing that gives you the difference yeah you really put it back out of it yes yeah yeah that I I I agree yes yeah um okay yeah so that's really for the second point and then the third point is more like the mediators on blockchains controls the settlement function so the mediator is more you know in classical mechanism designs median here is often called like I don't know the auctioneer ending uh game series slash Community devices the mediator is more meaning talked about in the context of media equilibria right so everybody instead of uh committing to something and have the natural coordination mechanism arises from the uh composition of all those individual commitments you have the central mediator where everybody the mediator says that here are the messages that you can send and here is um money guarantee or my commitment to say that oh like when you send this message here is what will happen basically an immediate implement the correlative equilibria in this way and and on blockchains the mediator is a is a as I mentioned blockchains have this block time component so during the blog time everybody sends a commitment to the blockchain and then the mediates are basically takes all of those say earning commitments as the only status maybe M of the all of those commitments and it is the mediator's choice of uh what I'm out of and commitments to settle and that gives a media her some power on blockchains um and the euro is a mediator is called you know the miner or the validator um yeah so from so so so from those three properties we can already see some uh some things kind of some bad things can happen right so for example with the existence of block time we know that blockchains Implement coordination via the use of commitments and common knowledge of commitments um so that means that anything any game that is played that within the Vlog time I if the game starts and finishes before the blow time before the blocks is published then the blockchain as a gaming device cannot coordinate that game and it is and in in practice we see that there is an abundance of such games for example Financial applications like people trading against each other the price is constantly moving and therefore the game of arbitraging some automated Market maker on blockchain is almost you know by definition you know in practice uh a game that is played within the Vlog time and therefore the blockchain cannot coordinate this game so this is evidently by say two users want to two users want to trade against some a want to trade some assets and then in practice we see that those users can only come into I want to trade asset a to asset B using this route however the optimal routing can only be decided if agent a and hmd coordinates which routes as they take right so for example agent a and a hmd wants to settle against each other there as at first before batching their others and then Central against the amount so then um so then this ability this game is like not able to be coordinated another game that cannot be coordinated is the game of determining uh The Ordering of transactions inside the block so this is again again that by definition cannot be coordinated uh within the Vlog time because you know it is a game about the other thing that is happening within that block um okay so then in practice we see uh we see a great welfare loss due to such fast games that I've played within the block tank right as I mentioned the uh when people cannot coordinate on determining the ordering of the blood they tend to you know spam others or like collocate with the validator spend a large amounts of resources just to get the lower latency or things like that um and those things are traditionally those things and variants of such uh mechanisms are really thought like one one specific instance is called the priority gas auctions so in that case it's more like a is that people determining the ordering of transactions inside the block by entering an all-pay auction and that as we all know of the option of deciding The Ordering of the block is really not efficient and uh what happened was that uh people deploy off-chain systems as we see environmentally thought people established additional institutions that deploy additional mechanisms makes additional credible commitments where the credibility is only assured by the um you know some reputation of the institution to achieve the equilibria and those new institutions act as mediators to coordinate this game where the blockchain cannot cannot self-coordinate this game um yeah you said it came as a lot coordinated we are unable to coordinate unable to be coordinated yeah so that means that the uh more optimal outcome is not able to be achieved because users say for example cannot express their preferences or you know say fail to uh so for example if the priority gas auction people uh all of the leaders would want to say that if I do not if I fail to end up in the first of the block then I don't want to pay anything and they want to coordinate with other people to express such references basically they need an Auctioneer right so is the idea that again is we failed to coordinate against it incredible commissions yeah yeah they don't have access to Credible Community devices that are fast enough yeah yeah yeah so two coordinates again since they are playing um yeah so another more maybe easier example is a case of uh to use this trading against uh trading some assets right users want to settle against each other but they can't because you know they don't know what the other user is doing or they cannot express the preference uh that the other user uh that they want to settle against another user yeah and then therefore you know people Implement things like Coincidence of ones which is to save one user commits to that if there exists another user uh committing to trade the same amount of assets but in the opposite direction that I can meet to trade against that user and currently on blockchains you cannot do this inside one block yeah okay um so then in practice we we see that I I you know as we mentioned those those unique properties impact the coordination again straight on top in the way that it introduces uh Mev it introduces uh welfare losses um and uh so to mitigate them the design choices that people made to the blockchain commitment device to change this is essentially uh or mostly to establish more institutions right they established more institutions to count uh to mitigate this problem that the block and that they cannot coordinate against happening within the block time the establish institutions to provide say private but programmable members to solve this second property in you know probably established by the second property they uh you know some people try to establish in institutions that provide better decentralization and encourage competition between the mediators um to weaken the mediated sparkling power in this grand scheme of the games um okay so then after seeing that the blockchain the industry has been trying empirically to like uh to like patch its protocol to go from a very bad commitment device design to increasingly better then can be systematically study what what what is the drive underlying all of those patches that we make to the protocol why do we keep on establishing those institutions there's some is there some way that we can systematically study this and then um paste our our systematic study derives some uh results that we can finally Implement and practically implement um so I don't have I don't really have a systematic way to study but I have some attempts so let's uh okay that's awesome okay yeah yeah so then let's uh jump onto some uh probably Sims to present a simple study of those okay so suppose we start at time t with Vlog time you know smarty suppose all of those are you know unetherium therefore we have this you know synchronous recommending you guys I suppose further that this blockchain community wise exhibits all of those three properties described by using natural language and then uh within each block we have we receive transactions which are essentially commitments by the users denoting by com and they are sent to the community wise and at the end of the blog time I at the end of the block the commitment device implements common knowledge of the commitments and their settlements um you know we have a bad functional matching the list of all commitments to a community device states by making a public broadcast of the results right so basically as a startup each say slots um people send their respect to commitments come one come two come three to come and and then the mediator basically have all of those commitments and then it controls the settlement function f to process those commitments okay so then we can formally Define crypto as this permission as credible commitment device that consists of say a state assets that include all of the set of commitments the commitment Constructors that people can use to produce commitments um so one example of a commitment Constructor is to say that I can only commit to single strategies in a normal phone games and as we discussed before this you know inclusive equivalent that cannot always achieve the optimal outcome state and other commitment Constructors on ethereum we know that ethereum is a turing complete so so if the extension will influence a good uh good old programming equilibrium type of commitments uh and then the semantics or the settlement function which is controlled by the mediator is as we discussed function f takes into the list of commitments and Returns the states and then the blockchain key of course that this commitment device need to collect compute settle and then finally broadcast all of the commitments so then let's start with the favorite our favorite example right the simplest prisoners dilemma we know that for the president of dilemma the state s is essentially the strategies that agents play in the actual prisoners dilemma game not nothing not the prisoners dilemma game 80 with the commitment so then State as is essentially a mapping from the each player's ID to the strategy that they play in The Prisoner uh you know you know hit here the two by two Matrix and uh so basically we have the commitment Constructor C count basically uh it is a function that takes in either a function from the prisoner's dilemma game uh strategy to the prisoners dilemma gain strategy like it's a it's a function from the other person's strategy to your strategy or a proven development game strategy so what this means is that uh um I can commit to that if you play uh sorry I I wrote Silent you should really be corporate if you if you like me to cope with then I will also come into copy so that's like a mapping from corporate incorporate and defective effects and then the other person then you know can you you can take the other person can you should commit to uh effect so then there should be two types of commitment Constructors one is like allows you to come into a mapping from a strategy strategy in the others to come into a strategy and then the community semantics and it basically checks the list of all of the commitments as an applied commitment of type strategy to Commitment of the type of a mapping from strategies and strategy as it puts all of the results the you know the result results into the mapping of the stage right so then you can check if you have such kind of community devices then you can't you know here's a sample you know smart contract or the mapping that you can Implement in a construct using ccomp so you can check over here you can achieve like the optimal state over here what about block time T actually so um about block time T we see that for me pctdr commercializes the Implement coordination via common knowledge and this is what we talked before you know yeah for any game played within about time it cannot coordinate and the auctioneer strategy is not certain this is again the third property um then after the mediator is upset of profit seeking or even malicious agents that could collude so then in this case the commitment device cannot coordinate the game so another so one example of this is say yeah yeah so it could be possible in Vanessa uh advice and start sleeping in the contract that validator Network that way you know um for example could be so be you know this device that keeps track of all the commitments in the network also in both yeah yeah um for biting at the station or uh proposing uh buying blobs and so forth and that way also that's important part of Adam system is also uh represented yeah yeah uh you mean can can you taking smart contracts sent by the valuators no I mean for example um say you are so particular fundamentally entering contracts yeah yeah it runs a validator code yes and equipments are uh enforced yeah two ways your either and for the uh of money for example you know battery blocks yeah that's my question is no uh I personally see them as soon eventually just having a deeper language from the commitments are on the uh represent the expired complexity yeah so I guess my question is is there perhaps a common abstraction or where you will a good device that can accommodate for both things in blocks so for example you can input Productions uh like uh yeah but yeah I'll take good for example uh you know all the operations in this day um I don't know maybe a weird way in explaining what I was trying to say uh um yeah okay here's a real phrase of your question I don't know if that captures the same but um so you're saying there are two kinds of commitments one type is a commitment games um so you know one type is the actual ethereum commitmentation makes this is like the community is made as a level of the valley territor the other is a commitment that you you know the community that you use to play the actual commitment games on top of the blockchain this is like commitment made on the level of smart contracts and those two commitments even though they are theoretically of the same uh whatever of the same uh same expressivity in that you know you can add any uh universal code is written in go you can add any like arbitrary commitment and the smart contract is also true incomplete but then there are kind of different and how do they interface can be like put some part of the regular code level commitment onto the smart contract level commitment or vice versa well that's one way probably I say for example you know lost in political transactions and operations such as you have slash shares and and changes to players and so um I guess my question is you know basically you could think of ethereum uh also Southampton institution uh made up of commitments and the question is why not uh create a space in the committed by structure to correlate with people making sense this way that also allows validators to enter informations that workouts may not necessarily be specified uh so this Builds on on something that perhaps uh you know Business Media or proposal that's where you can have the composer and you go with that yeah so maybe books are the same factor um yeah you could have that because that's like you're making the so the value of the code level Community is like slow commitments right because to change that commitment you need quite social coordination of the ethereum foundation and then like the smart contract level Community is like permission as anybody can deploy so then you are like you know using the fast commitment to encode some commitments that should have been encoded in the slow commitment so you can always do this because like the fast Community device can accommodate for the slow convenience um the vice versa cannot be achieved yeah and what you talked about is like kind of restaking or Pepsi but I currently right yeah yeah [Music] [Music] strategies and then they have this neutral devices that are commonly this psychological strategies but Wonder like is why you need to be with structures yeah that's a great question because uh because the reason I I chose to exclusively have the commitment Constructor is that I want a way to compare how would the expressivity of a community device impact the you know kind of the efficiency that it that it can achieve like how so like when we move from a less expressive commitment device to a more expressive community-wise if by expressivity we mean that you can condition you you can add more conditioning onto your community language then that how does the welfare change right like so you know for example even in the same place prisoners dilemma example we see that this change this graph if you plot it out the efficiency versus expressivity it is not not monotonic it's like it's actually like you know it starts at like a very not efficient outcome if you have another efficient language a non-expressive language it rises and then it could decrease once you increase the expressivity so the reason is this the reason of this is like you can imagine can I draw on this yeah it's like you have this like very complex space and that you are trying to carve out this is all of the outcome space and over here is like the good outcome space right over here here is what you want and there's a lot enlarging in the expressivities like you know you go from you know you basically draw a circle inside of this okay so this is all of the outcome that you can capture while circle is because drawing a circle is easy um yeah this is you know this is an analogy to saying that in reality you cannot divide the super comic expressive uh expressive language you can only device a sensible language and like doing in practice a practical sensible language is the equivalence of you can only draw a circle you cannot like draw some like complicated last shapes yeah and uh so they increase in the expressivity is like you're like drawing a larger Circle you know I also have the same you know Center doesn't like join larger Circle actually does not necessarily allow you to net you know exactly carve out the desired states that you want it could like enlarge too much and then you like your welfare and decreases so if this is like expressivity and this is efficiency then it could be something like this yeah um so and overall it's like because I think this uh you know this thing is at least not iterative to me and I think it would be interesting to study that such a formalism and also in the uh in most of the game theory papers that I have read it's like they uh kind of directly especially some programming equilibrium they uh they don't mention these semantics or settlement function at all they kind of because they were proving folks here and they just assumed that oh you know there exists such function that maps on the two programs onto the set of strategies that those agents actually play but in practice if you want to actually Implement anything that solves those you need to consider oh there might not actually exist such function because even even if it exists it does not terminate so like to capture the idea of like termination you need to additionally Define define these semantics or settlement function which in turn dictates that you must have some notion of like Constructors because like non-termination is a property of the like expressivity yeah so okay so I mean because of your definition of someone um because yeah uh then you could have like the enforce that you can certainly you can you you can how does somebody enforce that like um yeah yeah I think in practice we can only do stack overflows the the gas and ethereum of course there are many like uh um you know more theoretical results so like the most generalized one I think is like you use a total language which is like you still have this uh you know touring complete language but whenever you pass on the pro the commitment you accompanying your commitment with the proof saying that oh if uh if my commitment encounters whatever other people's commitment that here is the proof that those programs will terminate and then basically the settlement function takes the termination proof and then like checks it actually terminates and in that way you can enforce so basically the settlement function rejects any commitment that is not accompanied by the proof of termination um and like in the literature like there's several you know like the law of theorem classic whatever thing So when you say that um espresso language talks about the dog and practice law uh can you talk about why that is the case oh yeah it's more like if you want to actually in practice draw this like super complicated shapes to actually you know just like you know precise like capture this this outcome region that you want you probably need something like the total language that I describe like you use the you still use the Turing County language but you require the other person to submit your proof about the termination uh of your settlement function so that thing is obviously not doable because like as we know like doing some like formal proofs especially machine checkable proofs about communities extremely hard so like in practice I'm probably only draw like circles I understand you're playing to be different now I thought the first time was that there's limitations yeah yeah yeah the most expressive language is probably like drawing a silver large Circle that encompasses all of those like outcome States so that's like equal and such like you're not doing it why was it the total language not be a large Circle and obviously of might be exactly oh because you're requiring other people to submitted send me the truth that you're You Know Your settlement function terminates Saint Patrick 's year that's in guarding the circle and changing the shape and you're equating now changing the shape determination which I think here or oh sorry I don't I don't think that's very wrong you're saying like more expressivities oh yeah yeah yeah sorry sorry yes yes I  out yes yeah yeah yeah they are not the same yes yeah yeah yeah yeah the the changing yes yes could catch the changing the shame uh changing the shape is that it requires you as the you know the designer the mechanism designer the designer of this commitment device you know what exactly are the games that people are going to play on top of your coming device uh and then like you knowing the game structure you like you can carve out exactly almost exactly the space that you want but this is not possible say on ethereum because ethereum is still in concave people can use it to play whatever Community games that they desire to to play and you can't really like you know carve out the the cases that you want to so a simple example is reworks or 51 attack encouraging contracts right so for real or contracts is something that you don't want to get played so you are like they're kind of over here it is like the region that you want to evade so then like you so then the way to actually carve out is like in your ethereum validator code you say that oh if somebody deploys a commitment that seems like a real Arc contract that I just censor it or like don't don't sell for it and then you can carve out this region and an argument for like different a patchwork of different languages in the local strategy group right mindset where is one like General language that covers it all by like a patchwork of like more languages yeah that's the Kudos apps specific Chain versus generalized chain uh corresponds to you know can be expressed in terms of whatever language whatever set of languages you're into the OR back then it's with as well good stuff new languages like social media if you provide a like a general lab would you understand usually including one application we all can Replay that you don't have to condition what other people are doing something I guess you can also reach some of it it's like social norms to here we should should end this thing I agree with that I mean obviously it would make uh consensus uh a little more tricky maybe easier for people to receive something the same setup as um now yeah I'm not talking about enforcement just sort of like uh it kind of works out because I I disability I'm also doing something similar um but yeah but maybe yeah yeah I would like to talk more and I have a comment about that as well but I think we are you know over time I should hand 