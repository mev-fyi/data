[Music] um i'm tuning in from new york city actually six am here uh excited for everyone tuning in from any day in amsterdam and online sorry to have to be there in person as well i'm talking about nad uh across crypto in 2021 i try to keep this anchored in what's happening on the ground in the real world across the actual abstraction strategies that are being used the negative effects or negative externalities that are caused by those extracted strategies and then the efforts being taken to reduce those negative externalities so those are sort of the three broad categories that i'm looking at of mmd activities across crypto extraction externalities and mitigation and again this is really focusing on what we've seen happen actually on chain in the last year so we'll start this by looking at some numbers i try to put together an estimate of how much med was expected on each player one in 2021 so beginning with bloodshot's public metrics which is end unique explorer about 475 million dollars of nad was extracted with just arms in liquidations in 2021 so this number doesn't include sandwiches it doesn't include things like nft mvv some liquidations like maker uh token sampling etc 475 million just from arbitrage and some liquidations um there is a community sandwich profit estimate that builds off of some of the work can be explorative which was 379 million dollars if you put these two together 475 379 you get about 815 million um and that's a lower bound but this doesn't include some really important categories that i've listed out in the bottom here which i don't really you know don't have great numbers for this is just a finger in the air kind of estimate you can treat them as you see fit whether you think i'm over or underestimating here but nft med given the size of the markets was probably somewhere around 100 million 50 50 million 75 million something like that maker liquidations probably around that other kind of long tail things like liquidity sniping maybe 50 million something like that so change sort of the last three categories according to you know your intuitions as well but if you just take the top two that's 850 million we're leaving some on the table certainly so the amount is somewhere between 900 and in a billion i think um depending on your assumptions and what this doesn't also look at is uh centralized to decentralize and change bars too uh and a bunch of other ndv categories and of course if player one isn't on the market that matters anymore and there are a bunch of other chains with a lot of enemy activity i went around asked a bunch of different people in the community for their estimates on other chains but some good data which is incomplete a lot of these have data sources which are halfway through the year so the marlin protocol team on their explorer public dashboard estimated 43 million dollars in ours were captured from polygon uh in 2021 this is jan first to december bsc the identify team gave me june 1st to december 31st 55 million dollars uh will chihan gave me an estimate of 19 million on avalanche from august to december and xerox osaka estimated eight million dollars in salon arms so you add all that together you get about 125 106 million dollars in arms extracted over these ecosystems of the lower bound because the time frames so again you know depending on your assumptions here you can you can go out much higher maybe you want to be a little bit more conservative but but the lower bound is about a billion dollars and how are people actually capturing this this value you know what are the strategies being used and what are the effects from that that's what we'll dive into for the rest of the presentations uh so of course we need to begin with priority guest options where the flash quiz paper began with the film so pride i guess options are this iterative game where bob's our bots are uh competitively bidding each other up in an effort to receive priority at the top of the block by having the highest gas price right so you send out a transaction you watch to see that nobody else's transactions have higher gas price bid above them if they do and this was a game that really you know competed on networking latency view of the mental but the externality of that was wasted block space so here's a block in ethereum it's an old one where one pda bot uh one one bought actually a five spot operator captured an arbor seventy thousand dollars and then a bunch of pga bots had failed transactions after that so all of these 20 plus failed transactions don't end up doing anything they waste block space so uh there's less supply of block space for regular users and ends up creating costs for everybody else so in response to pgas and some other things flashbacks released med gap this is our first mitigation that we're talking about today medgap created a sealed bid auction where you submitted your bids and your um adjudicated off chain so only the winner of the auction ended up landing on chain and all of the losers had their bits this card had put to the side so you didn't have any wasted block space if you need a tail fit and that's one important mitigation here the other important mitigation was that we mitigated the risk that miners enter into proprietary deals or develop their own med strategies instead of participating on an open market so in flat spots any minor small or large and listen to the system to produce the most profitable block um and in such a way that is competitive with even the top miners that run their their own searchers so a small miner can make as much muv as a large miner and on flashbacks and we negated that centralization risk in turn this created a new extraction strategy flashback auction where you are optimizing your code for a gas price so the flashback option uses gas price to decide who gets included on chains and since enemy opportunities have a limited amount of nav that you can extract um that is a numerator that's called constant the only thing that you can alter is your denominator your gas used so to get a higher gas price you need to lower your gas views which means that searchers are constantly trying to lower their gas use and make their enemy extraction as efficient as possible and as a result with less gas being used by enemy instruction there's more space for users you can see on this graph here down and to the right of the average percentage of whole ethereum block space that thought about the bundles are using as searchers became more gas efficient over time and the other important thing to note about this extraction strategy auction is that structurally common strategies are going to get bit off to the point where miners are being paid the majority of med um to keep that property that small miners get as much med as large miners or you know any miner is able to get the most profitable block rather you know lastly um because of the structural sort of paying most mvp to miners where there's competition you're incentivized to find novel forms of alpha where there's less competition too the externality of this was it became less risky to do sandwiches on ethereum because you have atomic execution across multiple transactions so you can look at about january to may as flashbacks adoption ramped up over time sandwiches increased but in may 2021 um uniform v3 was launched and brought more capital efficiency uh as well as a general downturn in the market and so sandwiches decrease also in the fall we launched flashbacks protect which is our mitigation that gives users an easy way to submit their transactions actually to minors so you can do this by adding to your metamask all of your transactions then will be ferried directly to the miner they're not seen through the public mentor you also don't lose any gas when you have a failed transaction so add this to your wallet we're going to move away from e-player one in flashbacks and talk about some other expression strategies uh which you know maybe get a little bit less traction on proof of twitter so this will be fun a really interesting one that we started to see happen more or unchained this year is on-chain search spam uh kind of a mouthful but basically if block space is super cheap and there are extremely fast blocks with first come first served then the dominant strategy is to just send transactions repeatedly hoping that one of them lands right behind an enemy extraction um creation opportunity and do the searching for any of the on-chain instead of optioning so your your program on solana or your smart object on ether or whatever chain would actually be looking for arms uh within that foreign contract um and you just hit the smart contract constantly you know thousands of times every hour uh trying to probabilistically land in a place where you capture an arm and reverting when you don't and you can do this because your reverts are so cheap but it's almost costless for you to constantly do this and you make a bunch of money when probabilistically you actually capture some energy um so you see on the right here there's somebody that's that's doing the strategy in solana uh you know calculating arms on chains they made fifteen thousand dollars in one artifact uh the negative there's a bunch of negative experiences here but one of them was that um sona was being hit with so many transactions that validators didn't have the resources to process transactions of regular users so you needed to be sending you know thousands hundreds of thousands of transactions in the same way that liquidation bots were uh to be able to get your transaction processed um before there were some updates to how confessions were included that helped address this but uh the chain was essentially done if you were a user and unable to spam the network in the same way as liquidation buffs um there are a bunch of chains that have some elements of randomness are block space markets too and if there is randomness in your block space market then you are incentivized to spam to ensure that your transaction gets where you want it to go so within polygon this has to do with network propagation like which transactions go to the validator um and the negative externality of that is spam so you know you um you can see here three different tweets so three different chains bsc uh aurora and polygon where uh you know me in two cases in the carnation and another are talking about people that are spamming huge amounts of transactions that end up wasting block space they lower the supply for other users so it raises costs for other people it adds a ton of load to the period of your layer so it becomes much more difficult to run a full node um which is a cost that we don't talk about very much and it loads the state space of your chain over time it also can bring your chain down so there's a case where there was a very hot token drop on solana to the point where a couple bots sent huge amounts of transactions hundreds of thousands to get into this token drop as fast as possible uh and it ended up bringing the chain down for a small period of time um so pretty clear negative externality there you know your blockchain being brought totally down and the mitigation for this is i understand it is fee markets and some optimizations to how transactions are processed by block producers um i think we have two more interaction strategies here and i'll try to take questions um on avalanche before snowman plus the strategy was to maximize the stake weight and then gossip blocks as fast as possible so by having as large as possible of a stake weight you can hear about unconfirmed flocks really quickly and by doing so you can shoot off new blocks of your own as fast as possible uh and so that was one like dimension and competition and the other was running as many full nodes as you can to be able to gossip as many blocks as you can and this meant that you had a ton of competing blocks happening on some man plus blast aspect increasing over time um and since the consensus mechanism of avalanche needs to process these competing blocks and come to some consensus on which one is the the canonical clock the final one that's included on chain that meant that uh over time the time definitely on ambulance was increasing previously fast so there was um a bunch of changes that were made in summer plus i think they introduced a single leader uh to mitigate this there is also the externality that uh any you know people running a ton of full nodes and running them bringing them up really suddenly ended up bringing a ton of latency and load to the critical endeavor so there's this famous case where a single med bot launched thousands of full nodes at one time in like a space of 15 minutes and so all of a sudden everyone's full nodes are syncing with this new party they're sending them data uh and it it was such a strain on the network that i think the avalanche team thought they were being attacked when really it was just some party trying to capture some maybe uh and that was indistinguishable from an attack at this case and the reason why they did this was you could um i think at least you could propagate blocks with full nodes at that time and like gossip more of them so you had more of a chance of proposing the final block if you ran more so like i said before the mitigations this was so man plus plus changing how the consensus mechanism of avalanche work to make it uh make the process uh less conflictual i think that there's actually a leader in this process now um the last extraction strategy latency optimization you have a first come first searching where you have fast block times but you have medium to high fees it doesn't make sense for you to spam unchained instead it makes sense for you to get as close to the chain as possible and try to be as fast as possible to land your transactions in the places that you want without incurring transaction fees um that that would make it prohibitively expensive or impossible to so this makes all sorts of weird games happen uh there's one full node that as of a few months ago uh one one rollout that i was a few months ago didn't have a guide for how to run their full node but searchers figured out how to do this so there was an underground guide to running a full node for this uh roll up and passed around on discord and it's like kind of a secretive thing among searchers because it would help you i think optimize for your latency i know people who have launched hundreds thousands of different aws servers to try to find the one that is the closest to the sequencer um surprisingly this isn't talked about that much but uh there's an oracle team on first come first searching that runs their own invitation bot and so you post the oracle update at the same time as liquidation and since this first come first serve since you're launching these from the same server nobody else has an opportunity to even launch any of the prediction transactions so um the oracle team wins all the liquidations so i'm surprised and the externality of this is that um you know block producer centralization austria talked about this two different talks ago so it's much more difficult to optimize for low latency than it is medium latency right so 13 seconds or 14 seconds on heat that's a fair amount of time for you to find and be optimized for a semi-transaction something like 100 milliseconds is much less democratic the dominant strategy here is eventually to co-locate with validators or just become one these kinds of deals are much more difficult to make transparent it's not clear to me how you would democratize this too and even if you could offer access to multiple people how do you audit they could actually have equal access so my intuition is that chains that have latency optimization is a dominant strategy trend for blockbuster centralization and i would also question that this is really the kind of game that we want to incentivize so you know we already have latency style horse and trash by uh we can build new maybe more pro social games with crypto my cake maybe spicy um and there are a bunch of mitigations on the horizon too so things that haven't been implemented now but will be in 2022 hopefully uh or maybe early 2023 so osmosis control encryption we'll probably see fair sequencing services from arbor from shutter rolling out maybe on layer 2 and flashback style markets on other chains like like judo so to summarize in 2021 we saw a professionalized class of mv extractors that captured and paid out to miners over a billion dollars as a lower bound in med protocol design was stressed under hugely adversarial conditions with a ton of money on the line uh networks buckled under stress even failed at times from mev searchers and we saw a bunch of uh mitigations being implemented and pursued so thanks for listening that's my talk i think i have a single minute for questions if anybody has any [Music] you 