[Music] this time i've seen a lot of things um and um in this talk i want to share my insight um why you can't get around if you're developing a rocker whether it's layer one solution that's a side chain or it's layer two um you to build a block-based market um that allows you efficient in the extraction so to see why um networking what about actually is from plus principle every blockchain has three components first a virtual machine that is replicated on thousands if not millions of computers at the same time a consensus mechanism that keeps them all synchronized with each other and the consensus actually breaks down into two parts first is sequencing just selecting the next selection to go into the block and in other words propose a new form of the chain that has one block and then at the station that is attesting to the port containing that we block at the tip giving it economic weight in the fortress rule and that in present-day ethereum is a proof of work after the merge it will be proof of stake but in their food context for example it can also be [Music] the absence of a product group of data availability or the presence of a zero knowledge group or validity group right so um and if that component that we need is a block space market and that is the topic for today's problem so why do you need a box-based market um the question that um almost everyone asks in the beginning and maybe about crypto is why can't we have infinite block space or can we just make blocks as large as we want and then we create a large amount of supply for users so that's why i get the definition of whatever option is um so every transaction is due must be replayed and stored the only node's grammar i put an asterisk here because it's not like strictly true but in other case all the notes have to store what the current status and it can also get very large very quick to maximize the number of participants in a decentralized system we want to minimize the amount of resources that each of them has to consume in order to stay in a single network and also catch up to it and then sing from from scratch from the last checkpoint and that means you have to limit resource consumption to a point where people will consume a great hardware that can also participate so that's the reason why ethereum for example has a gasoline among other reasons so if you if you are starting from the sump that you need finite workspace then the question is how do you allocate this box based efficiency and different blockchains have tried different market mechanisms for that first combat sir or various forms of dutch options as we will see so to look back around the first slide the transaction uh starts in the blocks based market then is picked up by a sequencer then it's tested two in the block eventually makes it into the next in the end state designing block space markets used to be really easy so three years ago there were very few people thinking about workspace market design why because it was not an interesting problem um the problem that people were thinking about at the time was gas price estimation so um that was the only problem that people were dealing in real time so i how much should you get to get your transactions included in the time that you want and um and because guest press estimation was really poor and then to the under over bidding um transactions got stuck or overpaying or prices are swinging really hard and so um some time ago um computer implemented erp one type of night turning the market from fixed supply so there used to be um like a fixed limit on the amount of gas it can be in the block and then the price will float so as as client you might make and here tomorrow.9 replace that with a floating supply and the market calling you a fixed price right and that so this has been a large success you can consider the original problem of gas estimation soil mdd enters the room and as you can see the amount of lev um that is it being extracted from public blockchains it's going up um in some and what this means basically has made block space market design again why is that any transactions have complex preferences for placement okay so an led transaction wants to be positioned at a very specific point in a block our to other target transactions for example if the led transaction is doing inter-block arbitrage so other charge between the between two blocks are being lined then it wants to be first and block or very early if the other charge is done within a block then it wants to be positioned right after a target transaction for example like a trade that unbalances the decks that's good for example um if it's a liquidation then this is a similar similar format so you want to be positioned right after the oracle update so you can be across the public trash away the opportunity and the descendant just gets even more complicated because you want to be right before and after a targeted election and it doesn't even have to be just one a sandwich can uh have in the middle an arbitrarily large number of trends as long as they're all going in the same direction so you might even want to say i want to put three traits here in the order and then put mine in front of them so these are typical sandwiches that we're seeing um so what this means is if you have an unexpressive market i.e market where it that doesn't allow to build us to express their complex preferences and you have to did us with complex preferences and these bidders have an election center to get their transaction exactly the point where they want then the result is a lot of negative externalities for your blockchain so if your market mechanism at least include all of the ones that we will go through in a second informs what med extraction strategy searches the trading trunks etc will use and depending um how expressive your market is and if it's optimized for media expansion you will see various forms of negative externalities so in the following exam we will now go to different market mechanisms and then the strategy that leads to international textiles so the first one that everyone should be familiar with is the transparent edge function that is what ethereum is largely still using today and has been using for the last year so what this means is transactions accumulate in a public landmark and then every on average five seconds um the mining pool the capital takes these transactions monitors them into block and then the miners test it and it gets updated so and how do you compete in the strategy so for one you want to be the first to see um new transactions that end on a public record so you can be first to issue a response right um and then you want to be so you have these two things right so you want to have a good view of the output and then you want to latency and what this leads to is it leads to a lot of fair transactions um it leads to no troubling protection for users and it needs to block release uh centralization because extracting the same beer is very hard yes and so you have an incentive for mining foods and miners to vertically integrate into trading course and there's actually an interesting anecdote here so uh until i think uh one and a half years ago um the the dominant client with minus use was actually different in the sense that when it saw two transactions then at the right at the same gas but then it would decide randomly which one would include and so this had a different dominant enemy stranger searchers were like spamming spamming the mind of the miners and the network with many transactions in order to ensure that they would win the lot so then get changed how they find sequences and vectors and now the first one first injector is huge certain aspects is one that that's included and the others get discarded and so this is how it changed from spam being a normal enemy strategy to land um exit that option is the one that we have near here and today um i have dashboards and other md auction systems so this has changed the game in way because now searchers have a lot more can a lot better express what their transactions are supposed to do where they are supposed to be in relation to target transactions and this has shifted this game from being a latency war and war on memphis view and on spanning chain two one where researchers compete on who has can pay miners the most and this is largely a function of how low can you get your gas how high can you get your gas efficiency how little block space can you use so this has very few of the original negative expertise it has one new negative externalities the externality which is that now the block builder is flashbacks um has a lot more like there's a new party that has a fair amount power that didn't exist before and that is only going to go up and we all have our distance sometimes and as we will see more talks as um for example cross domain and we add us a picture so the builder role it will only go up in the coordinates that's really required um and then we will quickly go through some more so we have transparent constructions with low ps and low latency and and this sort of has the same problems as the original mechanism but it gets even worse as when the as when the latency of the chain is really low so when the keys are really low you encourage spam and when the latency has to be really low then you encourage basically vertically and vertical integration between mining pools and searchers so that's not this is a value that you want right so in this system for example you would not be able to have a system like flashbacks because flashbots even if it's an open system would lose to one that is co-located with different minor inputs so you would have to re-architect what just was this from the ground up so in the previous talk by shinduan we have seen why um fair sequencing slash get ordering is extremely hard to do in a decentralized way um and if you try it in you know all of these other ways then so it leads to many of the same problems right because if you have um if you have the ordering um based on you know first come first team then you encourage uh again a latency walk that in the income becomes uh you know co-location game um and so we really do encourage all of the nodes in the ordering system um to collocate with each other so they can work at the option of the co-location rights if anything so in either case um system turns towards centralization as well and then finally um you have to randomize the batch option so this is something that some workchains are experimenting with for example uh from hollywood so polygon um if you would put it on there you run actually two notes one is they form the sentry note that just accepts like one of the transactions and then it forwards a random selection of them so it's basically like as a weather you only see a randomized sketch of options for their transactions but there are like various ways you can do this like near for example has been thinking about being in construction where the batch is randomized after going on a chain and so you can add different ones but the problem here is always the same so um the certain design center has to spare and the miners who are the vendors who do want to extract the mvv and if they can't put the transactions in the place where they want and they are incentivized to approach the problem from the other side which is excluding all the transactions that they don't want right so you really end up going to a system where researchers the veterans or builders just commit follow the transaction that could mess up the audit that they want to achieve so you need a system where the parties are aligned in extracting the most immediate as possible you will not be able to do another another way that doesn't give you a lot of negative explanations and as a very smart man has said showing the incentive and i will show you the outcome um this is not something that i made up these problems exist everywhere here's an example of airline extracted in value germantown lufthansa said it would have to apply an additional 18 000 unnecessary flights through covet winter to hold on to their landing slots um yeah if you if you design the system in a way that that parties have to do particular things in order to you know to get a live system with them they will do it so another thing is nvd exists yeah and the way that you set up your block space market it shapes the dominant extraction strategy for structures and these extraction strategies create different negative exponenties that turn to users and the sustainability and robustness of your blockchain so dear blockchain architect your choices have long-run consequences build mechanisms that acknowledge that acknowledge reality how it is today it doesn't clear um assume that in e doesn't exist second every blockchain needs fees to prevent spam and allocate these gas resources in the workspace market so every blockchain needs a broadcast market every blockchain needs a way to express complex preferences to accommodate from the extraction in order to completely wreck your user experience and competition on christ is the least harmful and most efficient common immediate structure that we know so far that might change but today i would say it's definitely true and finally last slide at two bonus benefits so if you run a market mechanism that maximizes competing for price then you will also maximize the revenue of your block producer or blog to discuss or sequence like your layer 2 so if you even if you have a single sequencer layer 2 and you think you could really efficiently run the first like uh that first contrasts your kind of system you can still consider you should still consider the trade-offs between using that and using an mvp option where the search is complete on price because you in in the first one percep system most of the value will be extracted the search just goes here most of the value will be extracted when working design can be reinvested into your ecosystem either by paying anybody back to you just or by using incentives to grow your blockchain or by reinvesting into public goods funding so um and finally final point by making the central market more efficient you will also improve the liquidity and plumbing of your development system so your default applications will be grateful if they can rely on a robust search ecosystem where they can rely that the transactions in decentralized lending markets to be liquidated for the time at the best price possible and the same goes for arbitrage lisandra's changes and so on thank you and now taking questions due to the setup you might probably have to somebody ask the question then from the end and repeat them to me uh okay hi so i i saw the um where you said if you have a system with uh very fast transactions and very low cost to the transactions uh something like a flashbots actually couldn't compete and you have issues with spam and such how does that interact with our drive towards having fast transactions and low fees in layer 2 zk roll ups and the like great question yeah and i think it will require us to re-architect what the system like platforms would look like on another chain i think the end game is for all blockchains to have an efficient block like an efficient med market but it's an ongoing topic of research for us and for other participants in the ecosystem how and that system can be created uh in a very low latency system i think it's it's actually uh quite possible that this system will also involve some degree of cool location because if you're not co-located with um with the block builder or the mining or the money pool or the staking pool there i think um it will be impossible to compete with with a decentralized system with an open system against um the sort of private very integrated systems that we are trying to prevent um i can point you to so there are some systems that are trying to build this right now i know there's jito on solana i'm not 100 familiar how they work um but so there are already some um versions of like marion so trashbots being there other chances have much lower latency and so they could be they would indicate maybe they are even here at this conference and would be down to chat thank you hi hanzo um i have a question on if you were to create a new sort of uh blockchain is there a difference when with regards to mev whether the validators are known let's say we tandem in there's only 21 versus where it's completely permissionless and no one necessarily knows who the relatives are no i don't think it makes a difference i think it's if you don't have a system like that but then i think it's probably like the fewer parties you have the easier the more likely it is that the system will collapse back to some likely some even greater state of centralization because for example if you're a searcher then you know exactly you know who approached who the strike deals with and so on but i i think outside of that um no i don't think there's a large difference all right thank you asu we have to move on to the next speaker thank you for your presentation oh okay thank you very much [Music] you 