um awesome so how's it going everyone my name is luke and i am here to talk about uh ethereum mev and ethereum in 2021 this is your 2021 ethereum mev route uh unwrapped by media inspect um alex has already shouted us out a decent amount but um like we said the data is from mev inspect pi which is our open source block inspector uh flash spots you can find it on github if you want to play around with it yourself um or if you want to contribute um or just have questions on how to run it come check this out in mvv inspect in the flashbots discord so let's jump in mev on ethereum in 2021 so it you know it's no secret that mev got a lot bigger in 2021 on ethereum in particular um from our numbers we saw over 400 million dollars of extracted value on me on ethereum in 2021 and this excludes sandwiches which we know to be another uh several hundred million dollars of of extracted value so there's a huge amount of activity going on to quantify it a little bit more from a total's perspective we saw 1.6 million arbitrages 809 000 sandwiches and 20 000 liquidations in terms of minor payment uh over 300 million dollars of that went back to minors just in terms of payment for priority to place these extraction opportunities and so while it's interesting to see all these numbers kind of going up into the right um and seeing me growing as a space in general what i think is more interesting when we talk about 2021 is what alex was mentioning in that introduction which is about the competitiveness and the sort of changing the landscape of mvv on ethereum through 2021. so let's dive into that a little bit so here i've got a chart and on the bottom on the x-axis is going to be the percentage of profit that was paid to a minor and so let's say i make one dollar and i pay 50 cents that would be a 50 payment to the minor that would be that 0.5 that's getting pointed to right now now on the y-axis we're going to have the total number of opportunities that paid that percentage of profit to the miner so it'll be a graph over time graph showing basically the percentage of profit paid to minor uh spread out how much are people basically paying and we're going to look at that for different time segments sort of early on then going later into the year so looking at march to may we can see that in terms of how much of profit is going to minors from extracted opportunities it's relatively flat so there's obviously an upward inclination towards you know points towards like 60 to 90 or so but there's not a ton of agreement on how much money searchers should be paying as profit to uh two miners and also there's uh there's also a potential sorry i was checking the chat for a sec there there's also um you know a lot of discrepancy in terms of the actual gas usage of the different contracts that are executing all these transactions so we see basically this this relatively flat uh um distribution in terms of how much people are paying and we even see this little section near the bottom where people are paying virtually no money back to the miner in order to extract arbitrage these are these are definitely the good old days early days of flash spots sort of taking off when we fast forward to mid august there's a noticeable change happening already we can see that in general miners are or in general searchers are sort of centering around 80 of profit going to miners with some a little bit over a little bit under people who are historically paying maybe uh you know a little bit over 90 95 are now pulling that down because they realize they can still be competitive while paying less and then people below uh 0.5 or below 50 are bringing their payments up in order to remain competitive and unfortunately for those people who are paying zero they're now out of luck they're getting out competed by people paying a little bit more and of course uh there's an interesting trend that we can imagine happening here let's say that i'm about sitting solidly paying 80 percent maybe i decide okay um i can make i can i'm landing on chain maybe 25 of the time with the opportunities i'm trying to get and maybe if i pay a little bit more i can beat about the guys who i'm competing against so i'm going to bid a little bit more but then of course they're going to get upset bit themselves a little bit more etc etc and so it's natural for these little sort of inchings forward to lead to the price increasing overall for everyone if you look at twitter from that period of time you can see uh this is a famous searcher xerox on 9-1-1 saying uh we often see basically with a long thread talking about how bribes will potentially may or may not converge on 99.99 percent of profit over time and then mdv intern actually calls out that uh the searcher's been in the flashbots discord chaining bots that are bidding way too high up basically saying hey you're ruining it for the rest of us can you pull your bids back down and be a little bit more competitive on uh gas features things like that but unfortunately shaming and discord only goes so far um if we look at august october now we're well within the 90s in terms of percentage profit paid to minors and we look at october to now uh continuation of the same trend up into 97 of uh minor payments so a huge push upward throughout the year is competitiveness increase another way we can look at this is just total search of profit versus minor total minor payment over time there's a clear trend towards minor payment um and so this is talking about when we think about minor priority how does a minor choose which transactions to prioritize in their ordering it's they think about dollars per gas they have a fixed amount of gas that they can put within a block and they want to maximize the amount of money that they're making based on that amount of gas and so this is talking a little bit about the money so if we had the same contract who's paying a little bit more but there's this whole other half which is around the gas optimization as well so let's take into what the data looks like for people doing that over time as well so here's um one situation that alex alluded to a little bit there's two ways that you can pay for uh you can pay the miner for your priority you can pay either in fee which is sort of the traditional way that people use ethereum you pay fees to the miner which posts uh one five five nine or a base fee and then some optional tip amount or you can pay it by something called the coinbase which is basically a direct transfer of you to the miner's address and so there's a lot of reasons why you might want to use coinbase over tip and with the adoption of flashbots increasing in april and may you can see that there was a steady increase in people using coinbase which is the red section but then as searchers got smart and competition increased uh there was an alpha leak that became common knowledge that using gas price for your minor payment is a lot more gas efficient than using coinbase transfer and so as a result we can see in the data kind of post that tweet the adaptation back people switching uh from using coinbase back and using tip and it actually came at kind of a nice timing because um i think probably two weeks later was uh eip1559 so people had to go on and change their logic anyways in order to support the base fee so they probably thought well if i can get a little extra gas by switching over to tip instead of using coinbase i'll just do both at the same time and we'll kind of check both boxes so alex already shared these shout out to robert two for being the tweet provider for uh for all of us these are uh these are some good ones um so yeah increasingly we see competition around gas usage in general and one interesting question you might ask is can we see this in the data then can we see the efficiency um increasing for people in terms of gas usage over time when we look at mev opportunities and i was actually on this for quite some i was on this for for a good hour or so confused check out this graph so this is the weekly minimum gas used by any arbitrage you can see there's this giant spike that happened uh here around august uh it's right on august 5th is what it turns out to be which is known to be the eip-1559 adoption day but it's also the adoption of eip 3529 which is a reduction in refunds so it used to be that you could do all sorts of self-destructs on contracts and other sort of gas manipulation techniques in order to reduce the amount of gas that your contract uses and so people use this to the absolute maximum and then when it went away the floor in terms of what was possible in terms of minimum gas used had a huge bounce up this this makes it this graph makes it relatively obvious but the sort of graphs that oh and here's you can see the decline that i'm even inspected on the number of self-destruct calls that happened just in trace calls so people associate with me the opportunity so basically now that there's no benefit there's no one doing any any of their opportunities but here's the graph where i was looking at it was a lot more confusing but so you can see still that little divot around august 5th um one interesting thing though is we can see that beyond that point of august 5th there's there's a rough flattening happening so you can see the market somewhat sort of reaching a point of you know max efficiency in terms of extraction of arbitrages um but you can imagine maybe the trend adjusted for that this is not a mathematical adjustment adjusted for the uh for that eip change looks something like this and it trends a little bit more like what we would expect similarly for sandwiches they have a little bit more of a dramatic situation you can imagine the continuation absent the eip change would keep the downward movement of gas used but again we see that really solid line in terms of people reaching sort of maximal minimal gas usage for extracting the opportunity so i want to talk briefly about a couple i want to drill basically into two types of mpv extraction arbitrage to start and see some of the unique things that happen with arbitrages so here's total arbitrages over time extraction is about 10 000 arbitrage dollars a week on ethereum at the moment with a slight decline recently and one of the interesting things to look at with arbitrages is the share of profit that's uh being split among searchers so for the year of 2021 this these were the top searchers in terms of net profit that we found and how much money they made and the percentage of the total profit of all extracted arbitrage value that went to them so we see some pretty large numbers here five point nine percent five percent six percent etc um so it's kind of a small handful of people who are really deep into this who are who are heavily optimized for this competition basically um here's another graph showing that this is a graph of how many searchers split the top 95 percent of profits so if you said let's take off the 5 tail of remaining people who maybe landed one arbitrage throughout the year uh or throughout the month this monthly batch um how many people does it take to fill that 95 we can see that uh it's roughly doubled over the year a little maybe a little more than doubled from about 20 15 20 to 50 40 to 50. here's another interesting thing to look at arbitrages from is the number of hops in a captured arbitrage so you might think that there's sort of competing ideas here where you might think that because uh people are getting smarter and smarter they might capture longer arbitrages but at the same time the gas used the profit amount from maybe if i have an arbitrage featuring swapping from one pool to another to another versus one pull to another and back the profit might not be substantially different enough to justify the gas cost of that additional swap and so we can see that there's a relatively substantial increase in two swap arbitrages as compared to the rest of arbitrages although i am happy to say that um since uh since that slide that alex used was updated there has been crowned a new winner of the longest arbitrage on ethereum at least that i've found so far which is 14 hops so thanks to mbb inspect for crowning match champion congratulations um now i want to talk about sandwiches a little bit so here's a graph of sandwiches over time this is total sandwiches by protocol um and this the state is not as clear as we might like it to be it's this we group all unisloppy protocols to be into the same bucket so sushi swap unispot b2 pancake swap etc would all be considered uh that unispot v2 pair we can see that the vast majority of sandwich activity happens on um those markets like compared to something like union support v3 which has activity but substantially less so looking at this around april which is sort of the take-off period of flashbacks adoption in general you can see that there is a rough doubling of sandwiches in general and then around and then on may 5th which is the spike at the spike of unit swap v3 pool adoption with the launch of v3 there was a fairly immediate transition of liquidity from v2 you'll have to excuse this uh my photoshop abilities this is v2 liquidity unit swap v2 liquidity over time um and you can see that the drop the drop in liquidity for municipal v2 correlates pretty heavily with the number of sandwich attacks happening overall in the network and still even as unit swap e3 overtakes v2 in terms of total liquidity um it's still uh it doesn't sort of compen it doesn't become the larger source of sandwich attacks basically saying that new swap v3 is actually more resilient to sandwich attacks it seems it's pretty cool something else to look at in terms of this decline in sandwich attacks over time that we're seeing is miners and how they're thinking about front runners and sandwich attacks back in october ethermine announced in the flashbots discord that they will no longer be processing bundles that front run dex trades and so we wanted to take a look and see here's all the major minors and uh based on divided up based on how many sandwiches they've processed over time and so you can see ether mine here sort of holding strong to their commitment uh around october they there was a really substantial cut down in the number of sandwiches that they processed and they've since i think been refined and it's an approximate you can't just it's hard to detect sandwiches so it's not the sort of thing they can just flip a switch on but it looks like they're getting better and better at it in terms of reducing the number of sandwiches that they're processing um and it doesn't look like we're seeing that amongst any other large miners that they're deciding to cut back on sandwiches quite yet in fact it looks like f2 pool is taking most of the capacity that used to be uh attributed to ether mine i want to give one last shout out just to some of the other med that's been extracted that wasn't mentioned there's been all sorts of long tail mev such as san manila attacks which are attacks on sandwich bots just in time liquidity ads all sorts of nft activity um this is there's there's definitely been a lot more than what we've had the ability to share here that happened in 2021 um but i think we're looking forward to new additions to mev and spec buy in order to be able to analyze that going forward in the future that's what i have thank you awesome 