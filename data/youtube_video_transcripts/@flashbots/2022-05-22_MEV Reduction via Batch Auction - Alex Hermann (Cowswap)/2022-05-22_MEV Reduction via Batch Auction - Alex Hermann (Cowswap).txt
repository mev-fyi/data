[Music] my name is alex and i'm from kauswal been super excited to talk to you today about immub reduction how that actually could be achieved and it's currently also achieved the bad auctions i want to start with a small segway with a comparison between mev and high frequency trading i want to do that because i think there are quite some similarities if you're looking at it from the core principles actually they both represent a race to exploit market opportunities but then how it actually plays out yes they are quite different for example how can you actually win the race in the thank you how can you actually win this race in the mu respect in our blockchain space definitely we have to tip or bribe the miners and in high frequency trading it's actually all just about the speed i just have to be the fastest and so what you usually kind of end up doing is kind of buying the speed technology that is offered by the different exchanges and so it's also some kind of driving rate and then who is actually suffering from the negative externalities well if you have ever been front run in on the blockchain space definitely you're suffering from it but i think in general mev is kind of introducing inefficiencies and so every retail and institutional investor is kind of suffering from it and quite similar it's also in the high frequency space like all the sniping that is going on kind of causes market makers to price it in and then they are offering big bigger spreads and so kind of everyone loses a little bit because everyone gets a little bit more surprised but while high frequency trading has been around now for quite some time and yeah lots of academics looked into it and the most promising solution actually seems to be the frequent batch auction there's a very popular paper proposed by eric peter and john and they explain how frequent batch auctions can actually help with all the sniping that's going on and all the other negative externalities and so the thesis that i now want to take a look in with this talk is actually do a frequent batch auctions every really able to reduce the meb and to which extent and i would like to do it with the following agenda so first we want to look one more time at the exact definition of a frequent batch auction system then we want to compare this sequential and the batch execution then we will look exactly how that actually plays out with mde protection but of course after seeing all the positive sides we also then want to look into the challenges that i currently sell out with frequent bites auctions and then we would come to the conclusion so let's start for the first point what are freaking bad options well what one has to do is one has to discretize the trading in time that means one collects all the different orders over a longer time period and then with that you're able to build up these kind of order books as you can see down on the left side so you have on the one inside the order selling something that are kind of the blue orders and then on the other side you have the orders that are selling the opposite and that kind of builds up just the normal and order books and then what batch auction's actually doing is they're looking whether by demand and the sell demand is actually meeting and that's exactly where they are setting the clearing price and then everyone is settled exactly at that clearing price and what is really striking over here is definitely that the first two points of these characters they are naturally given in web3 because we put everything into blocks we always um batch all the orders that are come i mean in all the trades and so it's very natural that actually um frequent batch options could very fit very natural and well into the blockchain space now i want to do some visualizations like how does it actually differ the sequential and the better trading and so for that we first want to look at here some running example imagine you have here these three different buy orders that are i'm trading in one direction i'm selling one token for the other and then you have in cell order that it actually trades in the opposite direction and now depending on what the actual order is if they are trading against the m's then kind of the picture will look really completely different like actually they are all executed exactly at the same time but yeah depending on the order it will really look quite quite different but how could that same thing actually look with bad auctions well what we would want to do is kind of be on the one hand side sum up the by demand on the other inside sum up the cell demand and then we have a urban portion that we can match against each other and then we have only kind of a leftover that then actually needs to be traded against the amens and then what one usually does this one looks okay what is the effective clearing price um of the leftover against the amm and then one settles all the orders exactly with this clearing price and now i'm really curious on your opinion if you compare just these two different mechanisms what do you think intuitively is more fair which one would you prefer please raise your hand if you like this one more cool and who likes this one more some more people cool that that's also my favorite but obvious i'm biased i want to quickly um highlight that this of course was now a made-up example but um it is also happening right now in the theme space and in every block basically i just picked here some block and i plotted um on the x-axis the price that people got on an e-city trade so it's super liquid pair but we can still see that they are very various prices on the one hand side we have people who got much at the price of 2700 and on the other extreme we got people who were matched at 2000 7040. so there's really a price spread of 1.4 percent i think that's that's huge like everyone who would trade would love to be either on the one side or the other side and yeah this is kind of showing a little bit of what is all going on with the enemy's and well if we would actually um apply the whole auction mechanism what we would do we would kind of settle try to settle everyone exactly at the same price the uniform clearing price and because if we are doing that if we are trading them against each other and not against the amms we have less amm fees we have less slippage and all that sums up to an additional price improvement of 2 dollars that we can can contribute to all the traders it's just money that appears that we can re it's basically mev that we can distribute to all the different traders and you might say okay 2500 is not that big but we at coswap did some studies like how much that actually sums up over the year and here are two trading pairs for example for ec usdt where you have also seen the previous example from sums up over a year to 27 million that we can redistribute it um to traders on ecuc it's 28 million and then on all the other pairs it will be even it will also be quite some substantial amounts and yeah if you add it all up i think the numbers are getting quite significant okay this voice now basically how bad auctions can really improve the efficiency but then how additionally do they protect us from mev and for that i want to look at the surface of the mev surface of the auctions let's come back to our previous example where we have these green buy orders and the blue cell order if we execute them sequentially then basically each of these orders is prone to mev like depending on the ordering they will get different prices they can be sandwiched like everything can happen but if we are looking at the batch execution there is there was only this leftover trade that basically was matched against the amms and so only this one is prone to mev all the other traits there basically um protected from it because they are settled internally but then protocols like housework but also others um and doing much more than just that what we are also doing is we are always trying to find the optimized trading paths together with all the dex aggregators that we are working together with and so there is less back running opportunities also i'm rfq trading is more and more getting more and more popular getting more and more adoption and yeah as mentioned in all the other talks that also definitely prevents maybe and last but definitely not least kind of we are these days also submitting um these transactions for the users via these private networks under that even the leftover trade because it kind of enters this private mempool um yeah is then not prone to mvp here i also have some quantitative numbers um so we did here also a study checking on the pair is usdc how much of the actual trading volume that is right now happening on the ethereum chain could be actually matched internally in the batch and the figure we found was roughly 13 could be matched internally in auctions just by these coincidence of ones where we are matching two opposite orders against each other you might think hey that's actually not too big but there are other features that are coming for example waiting for a cow or more market maker integration and they will definitely boost with this number maybe you can cool these were all the upsides let's also look at the challenges so one point that auction have always been criticized for especially in the traditional world is the latency if we are in the web 3's situation it's actually not that problematic because we are anyways having some latency between the different blocks so over here you see the diagonal minus one then we would have sufficient time the first one we're talking about it's safe is that right in the next 15 seconds you would have sufficient time and then at some point we kind of have to close the batch and say okay all these orders should now be in the batch and then we start the actual price calculation yeah submission and what's definitely true is that because we have to close that a little bit early the dispatch okay then also other um challenges with auctions that are just game theory game theory takeoff actions so one of the points that one should always kind of consider is the information leakage if we are collecting the orders in the batches and if they are public and everybody could see that then other people have the time and to kind of react on them either by just placing also opposite orders in the in the current batch or done or alternatively kind of front run it on completely different venues for example at the amm directly on the blockchain on the mms but there are different solutions out there that could tackle it i mean private member pools were attacked before or kind of see it and then there's also this notion of incentive compatibility that basically means in the trading space that it would be the best option for each trader to really reveal the actual willing that he is i think i'm one of four sorry the actual price that he's willing to pay for yeah and this is it would be really nice if he would have trading i'm not exactly sure how you want to do it for free unfortunately it's not always holding um if you have a small order you can definitely do that it will not impact it too much but if you're a real whale and want to trade a lot of funds in one direction that's fine yeah then you basically have to kind of split up your right execution you have to split it over several batches sometimes but well the same thing is also right now true with continuous training and there's one more point i would quickly like to get into so for the options it's very important that they have the access to the best liquidity and in the web three space that definitely means that they should kind of consider all the amms and one small issue is that if we are starting at blank n minus m1 and kind of observe the amm in a particular state and then we are starting the optimization with all the collect batch orders that then sorry if you're starting then the optimization um with this state in mind and then if in the next block there is then actually somebody who takes an arbitrage opportunity or something and kind of front runs front runs us and puts the first transaction and that actually shifts the amm state then kind of our calculations are no longer 100 correct and that also causes some small issues right so given all these pros and cons what are the actual conclusions my conclusions is that if we would trade war with frequent badge auctions and we would have certainly some winners and these winners in my point of view are definitely retail investors because they would be better protected um for mev and they can get better prices via cows arbi treasurers not necessarily market makers it's a little bit divided if you are for example providing liquidity on an amm then if there is internal matching on a batch level that means automatically the amms will get less um fees so there is definitely a disadvantage for them but in general can freaking batch options were invented to kind of help market makers and from all the sniping attacks and everything and of course to other use cases where it's where auctions fit in very well uh liquidations and i think there are investments so overall i think if these um actors actually the green ones over here if they kind of convert to more and more action trading then definitely we can have a big mev reduction on the other player cool so thank you all for listening and if you want to give it a practical try feel free to kind of visit house web and give it time [Applause] thank you for the talk um could you talk a little bit about the censorship resistance qualities of like mev protection chains like cal swap and i know that clearly like the implementation of batching is really good on like the theoretical level but curious to know like obviously going through a public mempool like the public mempool of ethereum is like does it does mean that you you could get front run but like the censorship resistance quality of the ethereum mempool is so much greater than like going through flashbots so curious to know like how cow swap kind of figures that out so just to make sure that i understood the question correctly you're talking about this step where one has found a good solution um that that should trade the whole auction and then it's submitted to the ethereum chain and how the censorship over there plays out yeah especially so anytime you're bypassing the public men pool and there's obviously great things like the batch auctions happening outside of the public mempool but tell me a little bit about the censorship resistance qualities of using like um like dark pools or private pools or cow swap or i guess probably more california for you yeah yeah so definitely um the more decentralized things are the the better is actually also the property regarding um censorship resistance so right now causewab and i think also many other services they are a little bit more centralized and with that basically one could censor different orders um but at the same time we and other platforms i think have a big incentive to kind of not censor um all the different players because yeah we want to offer a good service and and that's in the short term and in the long term definitely if everything is more decentralized then you can have always different actors that actually then yeah prevent the censorship and plug and um yeah settle the actual trades so we are right now in the process of kind of um decentralizing all on our solar network that are the kind of the guys who are finding the best solutions for the batches and yeah if it's well decentralized then this helps definitely a lot with this censorship and regarding the censorships in the memphis regarding private submissions i think if something like that would happen we have professional bots running in the background and then they could detect it and choose other routes if that really happens [Applause] [Music] 